/*! For license information please see main.js.LICENSE.txt */
var fem;(()=>{var t={977:function(t,e){var r;!function(n){"use strict";var i=function(t){return.5*(Math.exp(t)+Math.exp(-t))},s=function(t){return.5*(Math.exp(t)-Math.exp(-t))},a=function(){throw SyntaxError("Invalid Param")};function o(t,e){var r=Math.abs(t),n=Math.abs(e);return 0===t?Math.log(n):0===e?Math.log(r):r<3e3&&n<3e3?.5*Math.log(t*t+e*e):Math.log(t/Math.cos(Math.atan2(e,t)))}function h(t,e){if(!(this instanceof h))return new h(t,e);var r=function(t,e){var r={re:0,im:0};if(null==t)r.re=r.im=0;else if(void 0!==e)r.re=t,r.im=e;else switch(typeof t){case"object":if("im"in t&&"re"in t)r.re=t.re,r.im=t.im;else if("abs"in t&&"arg"in t){if(!Number.isFinite(t.abs)&&Number.isFinite(t.arg))return h.INFINITY;r.re=t.abs*Math.cos(t.arg),r.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!Number.isFinite(t.r)&&Number.isFinite(t.phi))return h.INFINITY;r.re=t.r*Math.cos(t.phi),r.im=t.r*Math.sin(t.phi)}else 2===t.length?(r.re=t[0],r.im=t[1]):a();break;case"string":r.im=r.re=0;var n=t.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),i=1,s=0;null===n&&a();for(var o=0;o<n.length;o++){var l=n[o];" "===l||"\t"===l||"\n"===l||("+"===l?i++:"-"===l?s++:"i"===l||"I"===l?(i+s===0&&a()," "===n[o+1]||isNaN(n[o+1])?r.im+=parseFloat((s%2?"-":"")+"1"):(r.im+=parseFloat((s%2?"-":"")+n[o+1]),o++),i=s=0):((i+s===0||isNaN(l))&&a(),"i"===n[o+1]||"I"===n[o+1]?(r.im+=parseFloat((s%2?"-":"")+l),o++):r.re+=parseFloat((s%2?"-":"")+l),i=s=0))}i+s>0&&a();break;case"number":r.im=0,r.re=t;break;default:a()}return isNaN(r.re)||isNaN(r.im),r}(t,e);this.re=r.re,this.im=r.im}h.prototype={re:0,im:0,sign:function(){var t=this.abs();return new h(this.re/t,this.im/t)},add:function(t,e){var r=new h(t,e);return this.isInfinite()&&r.isInfinite()?h.NAN:this.isInfinite()||r.isInfinite()?h.INFINITY:new h(this.re+r.re,this.im+r.im)},sub:function(t,e){var r=new h(t,e);return this.isInfinite()&&r.isInfinite()?h.NAN:this.isInfinite()||r.isInfinite()?h.INFINITY:new h(this.re-r.re,this.im-r.im)},mul:function(t,e){var r=new h(t,e);return this.isInfinite()&&r.isZero()||this.isZero()&&r.isInfinite()?h.NAN:this.isInfinite()||r.isInfinite()?h.INFINITY:0===r.im&&0===this.im?new h(this.re*r.re,0):new h(this.re*r.re-this.im*r.im,this.re*r.im+this.im*r.re)},div:function(t,e){var r=new h(t,e);if(this.isZero()&&r.isZero()||this.isInfinite()&&r.isInfinite())return h.NAN;if(this.isInfinite()||r.isZero())return h.INFINITY;if(this.isZero()||r.isInfinite())return h.ZERO;t=this.re,e=this.im;var n,i,s=r.re,a=r.im;return 0===a?new h(t/s,e/s):Math.abs(s)<Math.abs(a)?new h((t*(i=s/a)+e)/(n=s*i+a),(e*i-t)/n):new h((t+e*(i=a/s))/(n=a*i+s),(e-t*i)/n)},pow:function(t,e){var r=new h(t,e);if(t=this.re,e=this.im,r.isZero())return h.ONE;if(0===r.im){if(0===e&&t>0)return new h(Math.pow(t,r.re),0);if(0===t)switch((r.re%4+4)%4){case 0:return new h(Math.pow(e,r.re),0);case 1:return new h(0,Math.pow(e,r.re));case 2:return new h(-Math.pow(e,r.re),0);case 3:return new h(0,-Math.pow(e,r.re))}}if(0===t&&0===e&&r.re>0&&r.im>=0)return h.ZERO;var n=Math.atan2(e,t),i=o(t,e);return t=Math.exp(r.re*i-r.im*n),e=r.im*i+r.re*n,new h(t*Math.cos(e),t*Math.sin(e))},sqrt:function(){var t,e,r=this.re,n=this.im,i=this.abs();if(r>=0){if(0===n)return new h(Math.sqrt(r),0);t=.5*Math.sqrt(2*(i+r))}else t=Math.abs(n)/Math.sqrt(2*(i-r));return e=r<=0?.5*Math.sqrt(2*(i-r)):Math.abs(n)/Math.sqrt(2*(i+r)),new h(t,n<0?-e:e)},exp:function(){var t=Math.exp(this.re);return this.im,new h(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){var t=this.re,e=this.im;return new h(Math.expm1(t)*Math.cos(e)+function(t){var e=Math.PI/4;if(-e>t||t>e)return Math.cos(t)-1;var r=t*t;return r*(r*(r*(r*(r*(r*(r*(r/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-.5)}(e),Math.exp(t)*Math.sin(e))},log:function(){var t=this.re,e=this.im;return new h(o(t,e),Math.atan2(e,t))},abs:function(){return t=this.re,e=this.im,r=Math.abs(t),n=Math.abs(e),r<3e3&&n<3e3?Math.sqrt(r*r+n*n):(r<n?(r=n,n=t/e):n=e/t,r*Math.sqrt(1+n*n));var t,e,r,n},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var t=this.re,e=this.im;return new h(Math.sin(t)*i(e),Math.cos(t)*s(e))},cos:function(){var t=this.re,e=this.im;return new h(Math.cos(t)*i(e),-Math.sin(t)*s(e))},tan:function(){var t=2*this.re,e=2*this.im,r=Math.cos(t)+i(e);return new h(Math.sin(t)/r,s(e)/r)},cot:function(){var t=2*this.re,e=2*this.im,r=Math.cos(t)-i(e);return new h(-Math.sin(t)/r,s(e)/r)},sec:function(){var t=this.re,e=this.im,r=.5*i(2*e)+.5*Math.cos(2*t);return new h(Math.cos(t)*i(e)/r,Math.sin(t)*s(e)/r)},csc:function(){var t=this.re,e=this.im,r=.5*i(2*e)-.5*Math.cos(2*t);return new h(Math.sin(t)*i(e)/r,-Math.cos(t)*s(e)/r)},asin:function(){var t=this.re,e=this.im,r=new h(e*e-t*t+1,-2*t*e).sqrt(),n=new h(r.re-e,r.im+t).log();return new h(n.im,-n.re)},acos:function(){var t=this.re,e=this.im,r=new h(e*e-t*t+1,-2*t*e).sqrt(),n=new h(r.re-e,r.im+t).log();return new h(Math.PI/2-n.im,n.re)},atan:function(){var t=this.re,e=this.im;if(0===t){if(1===e)return new h(0,1/0);if(-1===e)return new h(0,-1/0)}var r=t*t+(1-e)*(1-e),n=new h((1-e*e-t*t)/r,-2*t/r).log();return new h(-.5*n.im,.5*n.re)},acot:function(){var t=this.re,e=this.im;if(0===e)return new h(Math.atan2(1,t),0);var r=t*t+e*e;return 0!==r?new h(t/r,-e/r).atan():new h(0!==t?t/0:0,0!==e?-e/0:0).atan()},asec:function(){var t=this.re,e=this.im;if(0===t&&0===e)return new h(0,1/0);var r=t*t+e*e;return 0!==r?new h(t/r,-e/r).acos():new h(0!==t?t/0:0,0!==e?-e/0:0).acos()},acsc:function(){var t=this.re,e=this.im;if(0===t&&0===e)return new h(Math.PI/2,1/0);var r=t*t+e*e;return 0!==r?new h(t/r,-e/r).asin():new h(0!==t?t/0:0,0!==e?-e/0:0).asin()},sinh:function(){var t=this.re,e=this.im;return new h(s(t)*Math.cos(e),i(t)*Math.sin(e))},cosh:function(){var t=this.re,e=this.im;return new h(i(t)*Math.cos(e),s(t)*Math.sin(e))},tanh:function(){var t=2*this.re,e=2*this.im,r=i(t)+Math.cos(e);return new h(s(t)/r,Math.sin(e)/r)},coth:function(){var t=2*this.re,e=2*this.im,r=i(t)-Math.cos(e);return new h(s(t)/r,-Math.sin(e)/r)},csch:function(){var t=this.re,e=this.im,r=Math.cos(2*e)-i(2*t);return new h(-2*s(t)*Math.cos(e)/r,2*i(t)*Math.sin(e)/r)},sech:function(){var t=this.re,e=this.im,r=Math.cos(2*e)+i(2*t);return new h(2*i(t)*Math.cos(e)/r,-2*s(t)*Math.sin(e)/r)},asinh:function(){var t=this.im;this.im=-this.re,this.re=t;var e=this.asin();return this.re=-this.im,this.im=t,t=e.re,e.re=-e.im,e.im=t,e},acosh:function(){var t=this.acos();if(t.im<=0){var e=t.re;t.re=-t.im,t.im=e}else e=t.im,t.im=-t.re,t.re=e;return t},atanh:function(){var t=this.re,e=this.im,r=t>1&&0===e,n=1-t,i=1+t,s=n*n+e*e,a=0!==s?new h((i*n-e*e)/s,(e*n+i*e)/s):new h(-1!==t?t/0:0,0!==e?e/0:0),l=a.re;return a.re=o(a.re,a.im)/2,a.im=Math.atan2(a.im,l)/2,r&&(a.im=-a.im),a},acoth:function(){var t=this.re,e=this.im;if(0===t&&0===e)return new h(0,Math.PI/2);var r=t*t+e*e;return 0!==r?new h(t/r,-e/r).atanh():new h(0!==t?t/0:0,0!==e?-e/0:0).atanh()},acsch:function(){var t=this.re,e=this.im;if(0===e)return new h(0!==t?Math.log(t+Math.sqrt(t*t+1)):1/0,0);var r=t*t+e*e;return 0!==r?new h(t/r,-e/r).asinh():new h(0!==t?t/0:0,0!==e?-e/0:0).asinh()},asech:function(){var t=this.re,e=this.im;if(this.isZero())return h.INFINITY;var r=t*t+e*e;return 0!==r?new h(t/r,-e/r).acosh():new h(0!==t?t/0:0,0!==e?-e/0:0).acosh()},inverse:function(){if(this.isZero())return h.INFINITY;if(this.isInfinite())return h.ZERO;var t=this.re,e=this.im,r=t*t+e*e;return new h(t/r,-e/r)},conjugate:function(){return new h(this.re,-this.im)},neg:function(){return new h(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new h(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new h(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new h(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){var r=new h(t,e);return Math.abs(r.re-this.re)<=h.EPSILON&&Math.abs(r.im-this.im)<=h.EPSILON},clone:function(){return new h(this.re,this.im)},toString:function(){var t=this.re,e=this.im,r="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<h.EPSILON&&(t=0),Math.abs(e)<h.EPSILON&&(e=0),0===e?r+t:(0!==t?(r+=t,r+=" ",e<0?(e=-e,r+="-"):r+="+",r+=" "):e<0&&(e=-e,r+="-"),1!==e&&(r+=e),r+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return 0===this.im&&0===this.re},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},h.ZERO=new h(0,0),h.ONE=new h(1,0),h.I=new h(0,1),h.PI=new h(Math.PI,0),h.E=new h(Math.E,0),h.INFINITY=new h(1/0,1/0),h.NAN=new h(NaN,NaN),h.EPSILON=1e-15,void 0===(r=function(){return h}.apply(e,[]))||(t.exports=r)}()},776:function(t,e,r){var n;!function(i){"use strict";var s,a,o,h=9e15,l=1e9,c="0123456789abcdef",u="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",f="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",d={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-h,maxE:h,crypto:!1},p=!0,g="[DecimalError] ",m=g+"Invalid argument: ",y=g+"Precision limit exceeded",_=g+"crypto unavailable",v="[object Decimal]",x=Math.floor,b=Math.pow,w=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,M=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,E=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,S=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,N=1e7,k=u.length-1,F=f.length-1,O={toStringTag:v};function A(t){var e,r,n,i=t.length-1,s="",a=t[0];if(i>0){for(s+=a,e=1;e<i;e++)(r=7-(n=t[e]+"").length)&&(s+=G(r)),s+=n;(r=7-(n=(a=t[e])+"").length)&&(s+=G(r))}else if(0===a)return"0";for(;a%10==0;)a/=10;return s+a}function T(t,e,r){if(t!==~~t||t<e||t>r)throw Error(m+t)}function C(t,e,r,n){var i,s,a,o;for(s=t[0];s>=10;s/=10)--e;return--e<0?(e+=7,i=0):(i=Math.ceil((e+1)/7),e%=7),s=b(10,7-e),o=t[i]%s|0,null==n?e<3?(0==e?o=o/100|0:1==e&&(o=o/10|0),a=r<4&&99999==o||r>3&&49999==o||5e4==o||0==o):a=(r<4&&o+1==s||r>3&&o+1==s/2)&&(t[i+1]/s/100|0)==b(10,e-2)-1||(o==s/2||0==o)&&0==(t[i+1]/s/100|0):e<4?(0==e?o=o/1e3|0:1==e?o=o/100|0:2==e&&(o=o/10|0),a=(n||r<4)&&9999==o||!n&&r>3&&4999==o):a=((n||r<4)&&o+1==s||!n&&r>3&&o+1==s/2)&&(t[i+1]/s/1e3|0)==b(10,e-3)-1,a}function P(t,e,r){for(var n,i,s=[0],a=0,o=t.length;a<o;){for(i=s.length;i--;)s[i]*=e;for(s[0]+=c.indexOf(t.charAt(a++)),n=0;n<s.length;n++)s[n]>r-1&&(void 0===s[n+1]&&(s[n+1]=0),s[n+1]+=s[n]/r|0,s[n]%=r)}return s.reverse()}O.absoluteValue=O.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),R(t)},O.ceil=function(){return R(new this.constructor(this),this.e+1,2)},O.clampedTo=O.clamp=function(t,e){var r=this,n=r.constructor;if(t=new n(t),e=new n(e),!t.s||!e.s)return new n(NaN);if(t.gt(e))throw Error(m+e);return r.cmp(t)<0?t:r.cmp(e)>0?e:new n(r)},O.comparedTo=O.cmp=function(t){var e,r,n,i,s=this,a=s.d,o=(t=new s.constructor(t)).d,h=s.s,l=t.s;if(!a||!o)return h&&l?h!==l?h:a===o?0:!a^h<0?1:-1:NaN;if(!a[0]||!o[0])return a[0]?h:o[0]?-l:0;if(h!==l)return h;if(s.e!==t.e)return s.e>t.e^h<0?1:-1;for(e=0,r=(n=a.length)<(i=o.length)?n:i;e<r;++e)if(a[e]!==o[e])return a[e]>o[e]^h<0?1:-1;return n===i?0:n>i^h<0?1:-1},O.cosine=O.cos=function(){var t,e,r=this,n=r.constructor;return r.d?r.d[0]?(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+7,n.rounding=1,r=function(t,e){var r,n,i;if(e.isZero())return e;(n=e.d.length)<32?i=(1/$(4,r=Math.ceil(n/3))).toString():(r=16,i="2.3283064365386962890625e-10"),t.precision+=r,e=J(t,1,e.times(i),new t(1));for(var s=r;s--;){var a=e.times(e);e=a.times(a).minus(a).times(8).plus(1)}return t.precision-=r,e}(n,K(n,r)),n.precision=t,n.rounding=e,R(2==o||3==o?r.neg():r,t,e,!0)):new n(1):new n(NaN)},O.cubeRoot=O.cbrt=function(){var t,e,r,n,i,s,a,o,h,l,c=this,u=c.constructor;if(!c.isFinite()||c.isZero())return new u(c);for(p=!1,(s=c.s*b(c.s*c,1/3))&&Math.abs(s)!=1/0?n=new u(s.toString()):(r=A(c.d),(s=((t=c.e)-r.length+1)%3)&&(r+=1==s||-2==s?"0":"00"),s=b(r,1/3),t=x((t+1)/3)-(t%3==(t<0?-1:2)),(n=new u(r=s==1/0?"5e"+t:(r=s.toExponential()).slice(0,r.indexOf("e")+1)+t)).s=c.s),a=(t=u.precision)+3;;)if(l=(h=(o=n).times(o).times(o)).plus(c),n=I(l.plus(c).times(o),l.plus(h),a+2,1),A(o.d).slice(0,a)===(r=A(n.d)).slice(0,a)){if("9999"!=(r=r.slice(a-3,a+1))&&(i||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(R(n,t+1,1),e=!n.times(n).times(n).eq(c));break}if(!i&&(R(o,t+1,0),o.times(o).times(o).eq(c))){n=o;break}a+=4,i=1}return p=!0,R(n,t,u.rounding,e)},O.decimalPlaces=O.dp=function(){var t,e=this.d,r=NaN;if(e){if(r=7*((t=e.length-1)-x(this.e/7)),t=e[t])for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r},O.dividedBy=O.div=function(t){return I(this,new this.constructor(t))},O.dividedToIntegerBy=O.divToInt=function(t){var e=this.constructor;return R(I(this,new e(t),0,1,1),e.precision,e.rounding)},O.equals=O.eq=function(t){return 0===this.cmp(t)},O.floor=function(){return R(new this.constructor(this),this.e+1,3)},O.greaterThan=O.gt=function(t){return this.cmp(t)>0},O.greaterThanOrEqualTo=O.gte=function(t){var e=this.cmp(t);return 1==e||0===e},O.hyperbolicCosine=O.cosh=function(){var t,e,r,n,i,s=this,a=s.constructor,o=new a(1);if(!s.isFinite())return new a(s.s?1/0:NaN);if(s.isZero())return o;r=a.precision,n=a.rounding,a.precision=r+Math.max(s.e,s.sd())+4,a.rounding=1,(i=s.d.length)<32?e=(1/$(4,t=Math.ceil(i/3))).toString():(t=16,e="2.3283064365386962890625e-10"),s=J(a,1,s.times(e),new a(1),!0);for(var h,l=t,c=new a(8);l--;)h=s.times(s),s=o.minus(h.times(c.minus(h.times(c))));return R(s,a.precision=r,a.rounding=n,!0)},O.hyperbolicSine=O.sinh=function(){var t,e,r,n,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(e=s.precision,r=s.rounding,s.precision=e+Math.max(i.e,i.sd())+4,s.rounding=1,(n=i.d.length)<3)i=J(s,2,i,i,!0);else{t=(t=1.4*Math.sqrt(n))>16?16:0|t,i=J(s,2,i=i.times(1/$(5,t)),i,!0);for(var a,o=new s(5),h=new s(16),l=new s(20);t--;)a=i.times(i),i=i.times(o.plus(a.times(h.times(a).plus(l))))}return s.precision=e,s.rounding=r,R(i,e,r,!0)},O.hyperbolicTangent=O.tanh=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+7,n.rounding=1,I(r.sinh(),r.cosh(),n.precision=t,n.rounding=e)):new n(r.s)},O.inverseCosine=O.acos=function(){var t,e=this,r=e.constructor,n=e.abs().cmp(1),i=r.precision,s=r.rounding;return-1!==n?0===n?e.isNeg()?D(r,i,s):new r(0):new r(NaN):e.isZero()?D(r,i+4,s).times(.5):(r.precision=i+6,r.rounding=1,e=e.asin(),t=D(r,i+4,s).times(.5),r.precision=i,r.rounding=s,t.minus(e))},O.inverseHyperbolicCosine=O.acosh=function(){var t,e,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(t=n.precision,e=n.rounding,n.precision=t+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,p=!1,r=r.times(r).minus(1).sqrt().plus(r),p=!0,n.precision=t,n.rounding=e,r.ln()):new n(r)},O.inverseHyperbolicSine=O.asinh=function(){var t,e,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,p=!1,r=r.times(r).plus(1).sqrt().plus(r),p=!0,n.precision=t,n.rounding=e,r.ln())},O.inverseHyperbolicTangent=O.atanh=function(){var t,e,r,n,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=s.precision,e=s.rounding,n=i.sd(),Math.max(n,t)<2*-i.e-1?R(new s(i),t,e,!0):(s.precision=r=n-i.e,i=I(i.plus(1),new s(1).minus(i),r+t,1),s.precision=t+4,s.rounding=1,i=i.ln(),s.precision=t,s.rounding=e,i.times(.5))):new s(NaN)},O.inverseSine=O.asin=function(){var t,e,r,n,i=this,s=i.constructor;return i.isZero()?new s(i):(e=i.abs().cmp(1),r=s.precision,n=s.rounding,-1!==e?0===e?((t=D(s,r+4,n).times(.5)).s=i.s,t):new s(NaN):(s.precision=r+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=r,s.rounding=n,i.times(2)))},O.inverseTangent=O.atan=function(){var t,e,r,n,i,s,a,o,h,l=this,c=l.constructor,u=c.precision,f=c.rounding;if(l.isFinite()){if(l.isZero())return new c(l);if(l.abs().eq(1)&&u+4<=F)return(a=D(c,u+4,f).times(.25)).s=l.s,a}else{if(!l.s)return new c(NaN);if(u+4<=F)return(a=D(c,u+4,f).times(.5)).s=l.s,a}for(c.precision=o=u+10,c.rounding=1,t=r=Math.min(28,o/7+2|0);t;--t)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(p=!1,e=Math.ceil(o/7),n=1,h=l.times(l),a=new c(l),i=l;-1!==t;)if(i=i.times(h),s=a.minus(i.div(n+=2)),i=i.times(h),void 0!==(a=s.plus(i.div(n+=2))).d[e])for(t=e;a.d[t]===s.d[t]&&t--;);return r&&(a=a.times(2<<r-1)),p=!0,R(a,c.precision=u,c.rounding=f,!0)},O.isFinite=function(){return!!this.d},O.isInteger=O.isInt=function(){return!!this.d&&x(this.e/7)>this.d.length-2},O.isNaN=function(){return!this.s},O.isNegative=O.isNeg=function(){return this.s<0},O.isPositive=O.isPos=function(){return this.s>0},O.isZero=function(){return!!this.d&&0===this.d[0]},O.lessThan=O.lt=function(t){return this.cmp(t)<0},O.lessThanOrEqualTo=O.lte=function(t){return this.cmp(t)<1},O.logarithm=O.log=function(t){var e,r,n,i,s,a,o,h,l=this,c=l.constructor,u=c.precision,f=c.rounding;if(null==t)t=new c(10),e=!0;else{if(r=(t=new c(t)).d,t.s<0||!r||!r[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(r=l.d,l.s<0||!r||!r[0]||l.eq(1))return new c(r&&!r[0]?-1/0:1!=l.s?NaN:r?0:1/0);if(e)if(r.length>1)s=!0;else{for(i=r[0];i%10==0;)i/=10;s=1!==i}if(p=!1,a=Y(l,o=u+5),n=e?j(c,o+10):Y(t,o),C((h=I(a,n,o,1)).d,i=u,f))do{if(a=Y(l,o+=10),n=e?j(c,o+10):Y(t,o),h=I(a,n,o,1),!s){+A(h.d).slice(i+1,i+15)+1==1e14&&(h=R(h,u+1,0));break}}while(C(h.d,i+=10,f));return p=!0,R(h,u,f)},O.minus=O.sub=function(t){var e,r,n,i,s,a,o,h,l,c,u,f,d=this,g=d.constructor;if(t=new g(t),!d.d||!t.d)return d.s&&t.s?d.d?t.s=-t.s:t=new g(t.d||d.s!==t.s?d:NaN):t=new g(NaN),t;if(d.s!=t.s)return t.s=-t.s,d.plus(t);if(l=d.d,f=t.d,o=g.precision,h=g.rounding,!l[0]||!f[0]){if(f[0])t.s=-t.s;else{if(!l[0])return new g(3===h?-0:0);t=new g(d)}return p?R(t,o,h):t}if(r=x(t.e/7),c=x(d.e/7),l=l.slice(),s=c-r){for((u=s<0)?(e=l,s=-s,a=f.length):(e=f,r=c,a=l.length),s>(n=Math.max(Math.ceil(o/7),a)+2)&&(s=n,e.length=1),e.reverse(),n=s;n--;)e.push(0);e.reverse()}else{for((u=(n=l.length)<(a=f.length))&&(a=n),n=0;n<a;n++)if(l[n]!=f[n]){u=l[n]<f[n];break}s=0}for(u&&(e=l,l=f,f=e,t.s=-t.s),a=l.length,n=f.length-a;n>0;--n)l[a++]=0;for(n=f.length;n>s;){if(l[--n]<f[n]){for(i=n;i&&0===l[--i];)l[i]=N-1;--l[i],l[n]+=N}l[n]-=f[n]}for(;0===l[--a];)l.pop();for(;0===l[0];l.shift())--r;return l[0]?(t.d=l,t.e=L(l,r),p?R(t,o,h):t):new g(3===h?-0:0)},O.modulo=O.mod=function(t){var e,r=this,n=r.constructor;return t=new n(t),!r.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||r.d&&!r.d[0]?R(new n(r),n.precision,n.rounding):(p=!1,9==n.modulo?(e=I(r,t.abs(),0,3,1)).s*=t.s:e=I(r,t,0,n.modulo,1),e=e.times(t),p=!0,r.minus(e))},O.naturalExponential=O.exp=function(){return H(this)},O.naturalLogarithm=O.ln=function(){return Y(this)},O.negated=O.neg=function(){var t=new this.constructor(this);return t.s=-t.s,R(t)},O.plus=O.add=function(t){var e,r,n,i,s,a,o,h,l,c,u=this,f=u.constructor;if(t=new f(t),!u.d||!t.d)return u.s&&t.s?u.d||(t=new f(t.d||u.s===t.s?u:NaN)):t=new f(NaN),t;if(u.s!=t.s)return t.s=-t.s,u.minus(t);if(l=u.d,c=t.d,o=f.precision,h=f.rounding,!l[0]||!c[0])return c[0]||(t=new f(u)),p?R(t,o,h):t;if(s=x(u.e/7),n=x(t.e/7),l=l.slice(),i=s-n){for(i<0?(r=l,i=-i,a=c.length):(r=c,n=s,a=l.length),i>(a=(s=Math.ceil(o/7))>a?s+1:a+1)&&(i=a,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for((a=l.length)-(i=c.length)<0&&(i=a,r=c,c=l,l=r),e=0;i;)e=(l[--i]=l[i]+c[i]+e)/N|0,l[i]%=N;for(e&&(l.unshift(e),++n),a=l.length;0==l[--a];)l.pop();return t.d=l,t.e=L(l,n),p?R(t,o,h):t},O.precision=O.sd=function(t){var e,r=this;if(void 0!==t&&t!==!!t&&1!==t&&0!==t)throw Error(m+t);return r.d?(e=B(r.d),t&&r.e+1>e&&(e=r.e+1)):e=NaN,e},O.round=function(){var t=this,e=t.constructor;return R(new e(t),t.e+1,e.rounding)},O.sine=O.sin=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+7,n.rounding=1,r=function(t,e){var r,n=e.d.length;if(n<3)return e.isZero()?e:J(t,2,e,e);r=(r=1.4*Math.sqrt(n))>16?16:0|r,e=J(t,2,e=e.times(1/$(5,r)),e);for(var i,s=new t(5),a=new t(16),o=new t(20);r--;)i=e.times(e),e=e.times(s.plus(i.times(a.times(i).minus(o))));return e}(n,K(n,r)),n.precision=t,n.rounding=e,R(o>2?r.neg():r,t,e,!0)):new n(NaN)},O.squareRoot=O.sqrt=function(){var t,e,r,n,i,s,a=this,o=a.d,h=a.e,l=a.s,c=a.constructor;if(1!==l||!o||!o[0])return new c(!l||l<0&&(!o||o[0])?NaN:o?a:1/0);for(p=!1,0==(l=Math.sqrt(+a))||l==1/0?(((e=A(o)).length+h)%2==0&&(e+="0"),l=Math.sqrt(e),h=x((h+1)/2)-(h<0||h%2),n=new c(e=l==1/0?"5e"+h:(e=l.toExponential()).slice(0,e.indexOf("e")+1)+h)):n=new c(l.toString()),r=(h=c.precision)+3;;)if(n=(s=n).plus(I(a,s,r+2,1)).times(.5),A(s.d).slice(0,r)===(e=A(n.d)).slice(0,r)){if("9999"!=(e=e.slice(r-3,r+1))&&(i||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(R(n,h+1,1),t=!n.times(n).eq(a));break}if(!i&&(R(s,h+1,0),s.times(s).eq(a))){n=s;break}r+=4,i=1}return p=!0,R(n,h,c.rounding,t)},O.tangent=O.tan=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+10,n.rounding=1,(r=r.sin()).s=1,r=I(r,new n(1).minus(r.times(r)).sqrt(),t+10,0),n.precision=t,n.rounding=e,R(2==o||4==o?r.neg():r,t,e,!0)):new n(NaN)},O.times=O.mul=function(t){var e,r,n,i,s,a,o,h,l,c=this,u=c.constructor,f=c.d,d=(t=new u(t)).d;if(t.s*=c.s,!(f&&f[0]&&d&&d[0]))return new u(!t.s||f&&!f[0]&&!d||d&&!d[0]&&!f?NaN:f&&d?0*t.s:t.s/0);for(r=x(c.e/7)+x(t.e/7),(h=f.length)<(l=d.length)&&(s=f,f=d,d=s,a=h,h=l,l=a),s=[],n=a=h+l;n--;)s.push(0);for(n=l;--n>=0;){for(e=0,i=h+n;i>n;)o=s[i]+d[n]*f[i-n-1]+e,s[i--]=o%N|0,e=o/N|0;s[i]=(s[i]+e)%N|0}for(;!s[--a];)s.pop();return e?++r:s.shift(),t.d=s,t.e=L(s,r),p?R(t,u.precision,u.rounding):t},O.toBinary=function(t,e){return Q(this,2,t,e)},O.toDecimalPlaces=O.toDP=function(t,e){var r=this,n=r.constructor;return r=new n(r),void 0===t?r:(T(t,0,l),void 0===e?e=n.rounding:T(e,0,8),R(r,t+r.e+1,e))},O.toExponential=function(t,e){var r,n=this,i=n.constructor;return void 0===t?r=z(n,!0):(T(t,0,l),void 0===e?e=i.rounding:T(e,0,8),r=z(n=R(new i(n),t+1,e),!0,t+1)),n.isNeg()&&!n.isZero()?"-"+r:r},O.toFixed=function(t,e){var r,n,i=this,s=i.constructor;return void 0===t?r=z(i):(T(t,0,l),void 0===e?e=s.rounding:T(e,0,8),r=z(n=R(new s(i),t+i.e+1,e),!1,t+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r},O.toFraction=function(t){var e,r,n,i,s,a,o,h,l,c,u,f,d=this,g=d.d,y=d.constructor;if(!g)return new y(d);if(l=r=new y(1),n=h=new y(0),a=(s=(e=new y(n)).e=B(g)-d.e-1)%7,e.d[0]=b(10,a<0?7+a:a),null==t)t=s>0?e:l;else{if(!(o=new y(t)).isInt()||o.lt(l))throw Error(m+o);t=o.gt(e)?s>0?e:l:o}for(p=!1,o=new y(A(g)),c=y.precision,y.precision=s=7*g.length*2;u=I(o,e,0,1,1),1!=(i=r.plus(u.times(n))).cmp(t);)r=n,n=i,i=l,l=h.plus(u.times(i)),h=i,i=e,e=o.minus(u.times(i)),o=i;return i=I(t.minus(r),n,0,1,1),h=h.plus(i.times(l)),r=r.plus(i.times(n)),h.s=l.s=d.s,f=I(l,n,s,1).minus(d).abs().cmp(I(h,r,s,1).minus(d).abs())<1?[l,n]:[h,r],y.precision=c,p=!0,f},O.toHexadecimal=O.toHex=function(t,e){return Q(this,16,t,e)},O.toNearest=function(t,e){var r=this,n=r.constructor;if(r=new n(r),null==t){if(!r.d)return r;t=new n(1),e=n.rounding}else{if(t=new n(t),void 0===e?e=n.rounding:T(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(p=!1,r=I(r,t,0,e,1).times(t),p=!0,R(r)):(t.s=r.s,r=t),r},O.toNumber=function(){return+this},O.toOctal=function(t,e){return Q(this,8,t,e)},O.toPower=O.pow=function(t){var e,r,n,i,s,a,o=this,h=o.constructor,l=+(t=new h(t));if(!(o.d&&t.d&&o.d[0]&&t.d[0]))return new h(b(+o,l));if((o=new h(o)).eq(1))return o;if(n=h.precision,s=h.rounding,t.eq(1))return R(o,n,s);if((e=x(t.e/7))>=t.d.length-1&&(r=l<0?-l:l)<=9007199254740991)return i=V(h,o,r,n),t.s<0?new h(1).div(i):R(i,n,s);if((a=o.s)<0){if(e<t.d.length-1)return new h(NaN);if(0==(1&t.d[e])&&(a=1),0==o.e&&1==o.d[0]&&1==o.d.length)return o.s=a,o}return(e=0!=(r=b(+o,l))&&isFinite(r)?new h(r+"").e:x(l*(Math.log("0."+A(o.d))/Math.LN10+o.e+1)))>h.maxE+1||e<h.minE-1?new h(e>0?a/0:0):(p=!1,h.rounding=o.s=1,r=Math.min(12,(e+"").length),(i=H(t.times(Y(o,n+r)),n)).d&&C((i=R(i,n+5,1)).d,n,s)&&(e=n+10,+A((i=R(H(t.times(Y(o,e+r)),e),e+5,1)).d).slice(n+1,n+15)+1==1e14&&(i=R(i,n+1,0))),i.s=a,p=!0,h.rounding=s,R(i,n,s))},O.toPrecision=function(t,e){var r,n=this,i=n.constructor;return void 0===t?r=z(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(T(t,1,l),void 0===e?e=i.rounding:T(e,0,8),r=z(n=R(new i(n),t,e),t<=n.e||n.e<=i.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+r:r},O.toSignificantDigits=O.toSD=function(t,e){var r=this.constructor;return void 0===t?(t=r.precision,e=r.rounding):(T(t,1,l),void 0===e?e=r.rounding:T(e,0,8)),R(new r(this),t,e)},O.toString=function(){var t=this,e=t.constructor,r=z(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+r:r},O.truncated=O.trunc=function(){return R(new this.constructor(this),this.e+1,1)},O.valueOf=O.toJSON=function(){var t=this,e=t.constructor,r=z(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+r:r};var I=function(){function t(t,e,r){var n,i=0,s=t.length;for(t=t.slice();s--;)n=t[s]*e+i,t[s]=n%r|0,i=n/r|0;return i&&t.unshift(i),t}function e(t,e,r,n){var i,s;if(r!=n)s=r>n?1:-1;else for(i=s=0;i<r;i++)if(t[i]!=e[i]){s=t[i]>e[i]?1:-1;break}return s}function r(t,e,r,n){for(var i=0;r--;)t[r]-=i,i=t[r]<e[r]?1:0,t[r]=i*n+t[r]-e[r];for(;!t[0]&&t.length>1;)t.shift()}return function(n,i,s,o,h,l){var c,u,f,d,p,g,m,y,_,v,b,w,M,E,S,k,F,O,A,T,C=n.constructor,P=n.s==i.s?1:-1,I=n.d,z=i.d;if(!(I&&I[0]&&z&&z[0]))return new C(n.s&&i.s&&(I?!z||I[0]!=z[0]:z)?I&&0==I[0]||!z?0*P:P/0:NaN);for(l?(p=1,u=n.e-i.e):(l=N,p=7,u=x(n.e/p)-x(i.e/p)),A=z.length,F=I.length,v=(_=new C(P)).d=[],f=0;z[f]==(I[f]||0);f++);if(z[f]>(I[f]||0)&&u--,null==s?(E=s=C.precision,o=C.rounding):E=h?s+(n.e-i.e)+1:s,E<0)v.push(1),g=!0;else{if(E=E/p+2|0,f=0,1==A){for(d=0,z=z[0],E++;(f<F||d)&&E--;f++)S=d*l+(I[f]||0),v[f]=S/z|0,d=S%z|0;g=d||f<F}else{for((d=l/(z[0]+1)|0)>1&&(z=t(z,d,l),I=t(I,d,l),A=z.length,F=I.length),k=A,w=(b=I.slice(0,A)).length;w<A;)b[w++]=0;(T=z.slice()).unshift(0),O=z[0],z[1]>=l/2&&++O;do{d=0,(c=e(z,b,A,w))<0?(M=b[0],A!=w&&(M=M*l+(b[1]||0)),(d=M/O|0)>1?(d>=l&&(d=l-1),1==(c=e(m=t(z,d,l),b,y=m.length,w=b.length))&&(d--,r(m,A<y?T:z,y,l))):(0==d&&(c=d=1),m=z.slice()),(y=m.length)<w&&m.unshift(0),r(b,m,w,l),-1==c&&(c=e(z,b,A,w=b.length))<1&&(d++,r(b,A<w?T:z,w,l)),w=b.length):0===c&&(d++,b=[0]),v[f++]=d,c&&b[0]?b[w++]=I[k]||0:(b=[I[k]],w=1)}while((k++<F||void 0!==b[0])&&E--);g=void 0!==b[0]}v[0]||v.shift()}if(1==p)_.e=u,a=g;else{for(f=1,d=v[0];d>=10;d/=10)f++;_.e=f+u*p-1,R(_,h?s+_.e+1:s,o,g)}return _}}();function R(t,e,r,n){var i,s,a,o,h,l,c,u,f,d=t.constructor;t:if(null!=e){if(!(u=t.d))return t;for(i=1,o=u[0];o>=10;o/=10)i++;if((s=e-i)<0)s+=7,a=e,h=(c=u[f=0])/b(10,i-a-1)%10|0;else if((f=Math.ceil((s+1)/7))>=(o=u.length)){if(!n)break t;for(;o++<=f;)u.push(0);c=h=0,i=1,a=(s%=7)-7+1}else{for(c=o=u[f],i=1;o>=10;o/=10)i++;h=(a=(s%=7)-7+i)<0?0:c/b(10,i-a-1)%10|0}if(n=n||e<0||void 0!==u[f+1]||(a<0?c:c%b(10,i-a-1)),l=r<4?(h||n)&&(0==r||r==(t.s<0?3:2)):h>5||5==h&&(4==r||n||6==r&&(s>0?a>0?c/b(10,i-a):0:u[f-1])%10&1||r==(t.s<0?8:7)),e<1||!u[0])return u.length=0,l?(e-=t.e+1,u[0]=b(10,(7-e%7)%7),t.e=-e||0):u[0]=t.e=0,t;if(0==s?(u.length=f,o=1,f--):(u.length=f+1,o=b(10,7-s),u[f]=a>0?(c/b(10,i-a)%b(10,a)|0)*o:0),l)for(;;){if(0==f){for(s=1,a=u[0];a>=10;a/=10)s++;for(a=u[0]+=o,o=1;a>=10;a/=10)o++;s!=o&&(t.e++,u[0]==N&&(u[0]=1));break}if(u[f]+=o,u[f]!=N)break;u[f--]=0,o=1}for(s=u.length;0===u[--s];)u.pop()}return p&&(t.e>d.maxE?(t.d=null,t.e=NaN):t.e<d.minE&&(t.e=0,t.d=[0])),t}function z(t,e,r){if(!t.isFinite())return X(t);var n,i=t.e,s=A(t.d),a=s.length;return e?(r&&(n=r-a)>0?s=s.charAt(0)+"."+s.slice(1)+G(n):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(t.e<0?"e":"e+")+t.e):i<0?(s="0."+G(-i-1)+s,r&&(n=r-a)>0&&(s+=G(n))):i>=a?(s+=G(i+1-a),r&&(n=r-i-1)>0&&(s=s+"."+G(n))):((n=i+1)<a&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-a)>0&&(i+1===a&&(s+="."),s+=G(n))),s}function L(t,e){var r=t[0];for(e*=7;r>=10;r/=10)e++;return e}function j(t,e,r){if(e>k)throw p=!0,r&&(t.precision=r),Error(y);return R(new t(u),e,1,!0)}function D(t,e,r){if(e>F)throw Error(y);return R(new t(f),e,r,!0)}function B(t){var e=t.length-1,r=7*e+1;if(e=t[e]){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function G(t){for(var e="";t--;)e+="0";return e}function V(t,e,r,n){var i,s=new t(1),a=Math.ceil(n/7+4);for(p=!1;;){if(r%2&&tt((s=s.times(e)).d,a)&&(i=!0),0===(r=x(r/2))){r=s.d.length-1,i&&0===s.d[r]&&++s.d[r];break}tt((e=e.times(e)).d,a)}return p=!0,s}function q(t){return 1&t.d[t.d.length-1]}function U(t,e,r){for(var n,i=new t(e[0]),s=0;++s<e.length;){if(!(n=new t(e[s])).s){i=n;break}i[r](n)&&(i=n)}return i}function H(t,e){var r,n,i,s,a,o,h,l=0,c=0,u=0,f=t.constructor,d=f.rounding,g=f.precision;if(!t.d||!t.d[0]||t.e>17)return new f(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(null==e?(p=!1,h=g):h=e,o=new f(.03125);t.e>-2;)t=t.times(o),u+=5;for(h+=n=Math.log(b(2,u))/Math.LN10*2+5|0,r=s=a=new f(1),f.precision=h;;){if(s=R(s.times(t),h,1),r=r.times(++c),A((o=a.plus(I(s,r,h,1))).d).slice(0,h)===A(a.d).slice(0,h)){for(i=u;i--;)a=R(a.times(a),h,1);if(null!=e)return f.precision=g,a;if(!(l<3&&C(a.d,h-n,d,l)))return R(a,f.precision=g,d,p=!0);f.precision=h+=10,r=s=o=new f(1),c=0,l++}a=o}}function Y(t,e){var r,n,i,s,a,o,h,l,c,u,f,d=1,g=t,m=g.d,y=g.constructor,_=y.rounding,v=y.precision;if(g.s<0||!m||!m[0]||!g.e&&1==m[0]&&1==m.length)return new y(m&&!m[0]?-1/0:1!=g.s?NaN:m?0:g);if(null==e?(p=!1,c=v):c=e,y.precision=c+=10,n=(r=A(m)).charAt(0),!(Math.abs(s=g.e)<15e14))return l=j(y,c+2,v).times(s+""),g=Y(new y(n+"."+r.slice(1)),c-10).plus(l),y.precision=v,null==e?R(g,v,_,p=!0):g;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;)n=(r=A((g=g.times(t)).d)).charAt(0),d++;for(s=g.e,n>1?(g=new y("0."+r),s++):g=new y(n+"."+r.slice(1)),u=g,h=a=g=I(g.minus(1),g.plus(1),c,1),f=R(g.times(g),c,1),i=3;;){if(a=R(a.times(f),c,1),A((l=h.plus(I(a,new y(i),c,1))).d).slice(0,c)===A(h.d).slice(0,c)){if(h=h.times(2),0!==s&&(h=h.plus(j(y,c+2,v).times(s+""))),h=I(h,new y(d),c,1),null!=e)return y.precision=v,h;if(!C(h.d,c-10,_,o))return R(h,y.precision=v,_,p=!0);y.precision=c+=10,l=a=g=I(u.minus(1),u.plus(1),c,1),f=R(g.times(g),c,1),i=o=1}h=l,i+=2}}function X(t){return String(t.s*t.s/0)}function W(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;48===e.charCodeAt(n);n++);for(i=e.length;48===e.charCodeAt(i-1);--i);if(e=e.slice(n,i)){if(i-=n,t.e=r=r-n-1,t.d=[],n=(r+1)%7,r<0&&(n+=7),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=7;n<i;)t.d.push(+e.slice(n,n+=7));n=7-(e=e.slice(n)).length}else n-=i;for(;n--;)e+="0";t.d.push(+e),p&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function Z(t,e){var r,n,i,a,o,h,l,c,u;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),S.test(e))return W(t,e)}else if("Infinity"===e||"NaN"===e)return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(M.test(e))r=16,e=e.toLowerCase();else if(w.test(e))r=2;else{if(!E.test(e))throw Error(m+e);r=8}for((a=e.search(/p/i))>0?(l=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),o=(a=e.indexOf("."))>=0,n=t.constructor,o&&(a=(h=(e=e.replace(".","")).length)-a,i=V(n,new n(r),a,2*a)),a=u=(c=P(e,r,N)).length-1;0===c[a];--a)c.pop();return a<0?new n(0*t.s):(t.e=L(c,u),t.d=c,p=!1,o&&(t=I(t,i,4*h)),l&&(t=t.times(Math.abs(l)<54?b(2,l):s.pow(2,l))),p=!0,t)}function J(t,e,r,n,i){var s,a,o,h,l=t.precision,c=Math.ceil(l/7);for(p=!1,h=r.times(r),o=new t(n);;){if(a=I(o.times(h),new t(e++*e++),l,1),o=i?n.plus(a):n.minus(a),n=I(a.times(h),new t(e++*e++),l,1),void 0!==(a=o.plus(n)).d[c]){for(s=c;a.d[s]===o.d[s]&&s--;);if(-1==s)break}s=o,o=n,n=a,a=s}return p=!0,a.d.length=c+1,a}function $(t,e){for(var r=t;--e;)r*=t;return r}function K(t,e){var r,n=e.s<0,i=D(t,t.precision,1),s=i.times(.5);if((e=e.abs()).lte(s))return o=n?4:1,e;if((r=e.divToInt(i)).isZero())o=n?3:2;else{if((e=e.minus(r.times(i))).lte(s))return o=q(r)?n?2:3:n?4:1,e;o=q(r)?n?1:4:n?3:2}return e.minus(i).abs()}function Q(t,e,r,n){var i,s,o,h,u,f,d,p,g,m=t.constructor,y=void 0!==r;if(y?(T(r,1,l),void 0===n?n=m.rounding:T(n,0,8)):(r=m.precision,n=m.rounding),t.isFinite()){for(y?(i=2,16==e?r=4*r-3:8==e&&(r=3*r-2)):i=e,(o=(d=z(t)).indexOf("."))>=0&&(d=d.replace(".",""),(g=new m(1)).e=d.length-o,g.d=P(z(g),10,i),g.e=g.d.length),s=u=(p=P(d,10,i)).length;0==p[--u];)p.pop();if(p[0]){if(o<0?s--:((t=new m(t)).d=p,t.e=s,p=(t=I(t,g,r,n,0,i)).d,s=t.e,f=a),o=p[r],h=i/2,f=f||void 0!==p[r+1],f=n<4?(void 0!==o||f)&&(0===n||n===(t.s<0?3:2)):o>h||o===h&&(4===n||f||6===n&&1&p[r-1]||n===(t.s<0?8:7)),p.length=r,f)for(;++p[--r]>i-1;)p[r]=0,r||(++s,p.unshift(1));for(u=p.length;!p[u-1];--u);for(o=0,d="";o<u;o++)d+=c.charAt(p[o]);if(y){if(u>1)if(16==e||8==e){for(o=16==e?4:3,--u;u%o;u++)d+="0";for(u=(p=P(d,i,e)).length;!p[u-1];--u);for(o=1,d="1.";o<u;o++)d+=c.charAt(p[o])}else d=d.charAt(0)+"."+d.slice(1);d=d+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)d="0"+d;d="0."+d}else if(++s>u)for(s-=u;s--;)d+="0";else s<u&&(d=d.slice(0,s)+"."+d.slice(s))}else d=y?"0p+0":"0";d=(16==e?"0x":2==e?"0b":8==e?"0o":"")+d}else d=X(t);return t.s<0?"-"+d:d}function tt(t,e){if(t.length>e)return t.length=e,!0}function et(t){return new this(t).abs()}function rt(t){return new this(t).acos()}function nt(t){return new this(t).acosh()}function it(t,e){return new this(t).plus(e)}function st(t){return new this(t).asin()}function at(t){return new this(t).asinh()}function ot(t){return new this(t).atan()}function ht(t){return new this(t).atanh()}function lt(t,e){t=new this(t),e=new this(e);var r,n=this.precision,i=this.rounding,s=n+4;return t.s&&e.s?t.d||e.d?!e.d||t.isZero()?(r=e.s<0?D(this,n,i):new this(0)).s=t.s:!t.d||e.isZero()?(r=D(this,s,1).times(.5)).s=t.s:e.s<0?(this.precision=s,this.rounding=1,r=this.atan(I(t,e,s,1)),e=D(this,s,1),this.precision=n,this.rounding=i,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(I(t,e,s,1)):(r=D(this,s,1).times(e.s>0?.25:.75)).s=t.s:r=new this(NaN),r}function ct(t){return new this(t).cbrt()}function ut(t){return R(t=new this(t),t.e+1,2)}function ft(t,e,r){return new this(t).clamp(e,r)}function dt(t){if(!t||"object"!=typeof t)throw Error(g+"Object expected");var e,r,n,i=!0===t.defaults,s=["precision",1,l,"rounding",0,8,"toExpNeg",-h,0,"toExpPos",0,h,"maxE",0,h,"minE",-h,0,"modulo",0,9];for(e=0;e<s.length;e+=3)if(r=s[e],i&&(this[r]=d[r]),void 0!==(n=t[r])){if(!(x(n)===n&&n>=s[e+1]&&n<=s[e+2]))throw Error(m+r+": "+n);this[r]=n}if(r="crypto",i&&(this[r]=d[r]),void 0!==(n=t[r])){if(!0!==n&&!1!==n&&0!==n&&1!==n)throw Error(m+r+": "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(_);this[r]=!0}else this[r]=!1}return this}function pt(t){return new this(t).cos()}function gt(t){return new this(t).cosh()}function mt(t,e){return new this(t).div(e)}function yt(t){return new this(t).exp()}function _t(t){return R(t=new this(t),t.e+1,3)}function vt(){var t,e,r=new this(0);for(p=!1,t=0;t<arguments.length;)if((e=new this(arguments[t++])).d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return p=!0,new this(1/0);r=e}return p=!0,r.sqrt()}function xt(t){return t instanceof s||t&&t.toStringTag===v||!1}function bt(t){return new this(t).ln()}function wt(t,e){return new this(t).log(e)}function Mt(t){return new this(t).log(2)}function Et(t){return new this(t).log(10)}function St(){return U(this,arguments,"lt")}function Nt(){return U(this,arguments,"gt")}function kt(t,e){return new this(t).mod(e)}function Ft(t,e){return new this(t).mul(e)}function Ot(t,e){return new this(t).pow(e)}function At(t){var e,r,n,i,s=0,a=new this(1),o=[];if(void 0===t?t=this.precision:T(t,1,l),n=Math.ceil(t/7),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));s<n;)(i=e[s])>=429e7?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:o[s++]=i%1e7;else{if(!crypto.randomBytes)throw Error(_);for(e=crypto.randomBytes(n*=4);s<n;)(i=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((127&e[s+3])<<24))>=214e7?crypto.randomBytes(4).copy(e,s):(o.push(i%1e7),s+=4);s=n/4}else for(;s<n;)o[s++]=1e7*Math.random()|0;for(t%=7,(n=o[--s])&&t&&(i=b(10,7-t),o[s]=(n/i|0)*i);0===o[s];s--)o.pop();if(s<0)r=0,o=[0];else{for(r=-1;0===o[0];r-=7)o.shift();for(n=1,i=o[0];i>=10;i/=10)n++;n<7&&(r-=7-n)}return a.e=r,a.d=o,a}function Tt(t){return R(t=new this(t),t.e+1,this.rounding)}function Ct(t){return(t=new this(t)).d?t.d[0]?t.s:0*t.s:t.s||NaN}function Pt(t){return new this(t).sin()}function It(t){return new this(t).sinh()}function Rt(t){return new this(t).sqrt()}function zt(t,e){return new this(t).sub(e)}function Lt(){var t=0,e=arguments,r=new this(e[t]);for(p=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return p=!0,R(r,this.precision,this.rounding)}function jt(t){return new this(t).tan()}function Dt(t){return new this(t).tanh()}function Bt(t){return R(t=new this(t),t.e+1,1)}(s=function t(e){var r,n,i;function s(t){var e,r,n,i=this;if(!(i instanceof s))return new s(t);if(i.constructor=s,xt(t))return i.s=t.s,void(p?!t.d||t.e>s.maxE?(i.e=NaN,i.d=null):t.e<s.minE?(i.e=0,i.d=[0]):(i.e=t.e,i.d=t.d.slice()):(i.e=t.e,i.d=t.d?t.d.slice():t.d));if("number"==(n=typeof t)){if(0===t)return i.s=1/t<0?-1:1,i.e=0,void(i.d=[0]);if(t<0?(t=-t,i.s=-1):i.s=1,t===~~t&&t<1e7){for(e=0,r=t;r>=10;r/=10)e++;return void(p?e>s.maxE?(i.e=NaN,i.d=null):e<s.minE?(i.e=0,i.d=[0]):(i.e=e,i.d=[t]):(i.e=e,i.d=[t]))}return 0*t!=0?(t||(i.s=NaN),i.e=NaN,void(i.d=null)):W(i,t.toString())}if("string"!==n)throw Error(m+t);return 45===(r=t.charCodeAt(0))?(t=t.slice(1),i.s=-1):(43===r&&(t=t.slice(1)),i.s=1),S.test(t)?W(i,t):Z(i,t)}if(s.prototype=O,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=dt,s.clone=t,s.isDecimal=xt,s.abs=et,s.acos=rt,s.acosh=nt,s.add=it,s.asin=st,s.asinh=at,s.atan=ot,s.atanh=ht,s.atan2=lt,s.cbrt=ct,s.ceil=ut,s.clamp=ft,s.cos=pt,s.cosh=gt,s.div=mt,s.exp=yt,s.floor=_t,s.hypot=vt,s.ln=bt,s.log=wt,s.log10=Et,s.log2=Mt,s.max=St,s.min=Nt,s.mod=kt,s.mul=Ft,s.pow=Ot,s.random=At,s.round=Tt,s.sign=Ct,s.sin=Pt,s.sinh=It,s.sqrt=Rt,s.sub=zt,s.sum=Lt,s.tan=jt,s.tanh=Dt,s.trunc=Bt,void 0===e&&(e={}),e&&!0!==e.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],r=0;r<i.length;)e.hasOwnProperty(n=i[r++])||(e[n]=this[n]);return s.config(e),s}(d)).prototype.constructor=s,s.default=s.Decimal=s,u=new s(u),f=new s(f),void 0===(n=function(){return s}.call(e,r,e,t))||(t.exports=n)}()},628:function(t,e){var r;!function(n){"use strict";var i={s:1,n:0,d:1};function s(t){function e(){var e=Error.apply(this,arguments);e.name=this.name=t,this.stack=e.stack,this.message=e.message}function r(){}return r.prototype=Error.prototype,e.prototype=new r,e}var a=d.DivisionByZero=s("DivisionByZero"),o=d.InvalidParameter=s("InvalidParameter");function h(t,e){return isNaN(t=parseInt(t,10))&&l(),t*e}function l(){throw new o}function c(t){for(var e={},r=t,n=2,i=4;i<=r;){for(;r%n==0;)r/=n,e[n]=(e[n]||0)+1;i+=1+2*n++}return r!==t?r>1&&(e[r]=(e[r]||0)+1):e[t]=(e[t]||0)+1,e}var u=function(t,e){var r,n=0,s=1,o=1,c=0,u=0,f=0,d=1,p=1,g=0,m=1,y=1,_=1,v=1e7;if(null==t);else if(void 0!==e)o=(n=t)*(s=e);else switch(typeof t){case"object":"d"in t&&"n"in t?(n=t.n,s=t.d,"s"in t&&(n*=t.s)):0 in t?(n=t[0],1 in t&&(s=t[1])):l(),o=n*s;break;case"number":if(t<0&&(o=t,t=-t),t%1==0)n=t;else if(t>0){for(t>=1&&(t/=p=Math.pow(10,Math.floor(1+Math.log(t)/Math.LN10)));m<=v&&_<=v;){if(t===(r=(g+y)/(m+_))){m+_<=v?(n=g+y,s=m+_):_>m?(n=y,s=_):(n=g,s=m);break}t>r?(g+=y,m+=_):(y+=g,_+=m),m>v?(n=y,s=_):(n=g,s=m)}n*=p}else(isNaN(t)||isNaN(e))&&(s=n=NaN);break;case"string":if(null===(m=t.match(/\d+|./g))&&l(),"-"===m[g]?(o=-1,g++):"+"===m[g]&&g++,m.length===g+1?u=h(m[g++],o):"."===m[g+1]||"."===m[g]?("."!==m[g]&&(c=h(m[g++],o)),(1+ ++g===m.length||"("===m[g+1]&&")"===m[g+3]||"'"===m[g+1]&&"'"===m[g+3])&&(u=h(m[g],o),d=Math.pow(10,m[g].length),g++),("("===m[g]&&")"===m[g+2]||"'"===m[g]&&"'"===m[g+2])&&(f=h(m[g+1],o),p=Math.pow(10,m[g+1].length)-1,g+=3)):"/"===m[g+1]||":"===m[g+1]?(u=h(m[g],o),d=h(m[g+2],1),g+=3):"/"===m[g+3]&&" "===m[g+1]&&(c=h(m[g],o),u=h(m[g+2],o),d=h(m[g+4],1),g+=5),m.length<=g){o=n=f+(s=d*p)*c+p*u;break}default:l()}if(0===s)throw new a;i.s=o<0?-1:1,i.n=Math.abs(n),i.d=Math.abs(s)};function f(t,e){if(!t)return e;if(!e)return t;for(;;){if(!(t%=e))return e;if(!(e%=t))return t}}function d(t,e){if(!(this instanceof d))return new d(t,e);u(t,e),t=f(i.d,i.n),this.s=i.s,this.n=i.n/t,this.d=i.d/t}d.prototype={s:1,n:0,d:1,abs:function(){return new d(this.n,this.d)},neg:function(){return new d(-this.s*this.n,this.d)},add:function(t,e){return u(t,e),new d(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(t,e){return u(t,e),new d(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(t,e){return u(t,e),new d(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(t,e){return u(t,e),new d(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return new d(this)},mod:function(t,e){return isNaN(this.n)||isNaN(this.d)?new d(NaN):void 0===t?new d(this.s*this.n%this.d,1):(u(t,e),0===i.n&&0===this.d&&d(0,0),new d(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d))},gcd:function(t,e){return u(t,e),new d(f(i.n,this.n)*f(i.d,this.d),i.d*this.d)},lcm:function(t,e){return u(t,e),0===i.n&&0===this.n?new d:new d(i.n*this.n,f(i.n,this.n)*f(i.d,this.d))},ceil:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new d(NaN):new d(Math.ceil(t*this.s*this.n/this.d),t)},floor:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new d(NaN):new d(Math.floor(t*this.s*this.n/this.d),t)},round:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new d(NaN):new d(Math.round(t*this.s*this.n/this.d),t)},inverse:function(){return new d(this.s*this.d,this.n)},pow:function(t,e){if(u(t,e),1===i.d)return i.s<0?new d(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):new d(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s<0)return null;var r=c(this.n),n=c(this.d),s=1,a=1;for(var o in r)if("1"!==o){if("0"===o){s=0;break}if(r[o]*=i.n,r[o]%i.d!=0)return null;r[o]/=i.d,s*=Math.pow(o,r[o])}for(var o in n)if("1"!==o){if(n[o]*=i.n,n[o]%i.d!=0)return null;n[o]/=i.d,a*=Math.pow(o,n[o])}return i.s<0?new d(a,s):new d(s,a)},equals:function(t,e){return u(t,e),this.s*this.n*i.d==i.s*i.n*this.d},compare:function(t,e){u(t,e);var r=this.s*this.n*i.d-i.s*i.n*this.d;return(0<r)-(r<0)},simplify:function(t){if(isNaN(this.n)||isNaN(this.d))return this;var e=this.abs().toContinued();function r(t){return 1===t.length?new d(t[0]):r(t.slice(1)).inverse().add(t[0])}t=t||.001;for(var n=0;n<e.length;n++){var i=r(e.slice(0,n+1));if(i.sub(this.abs()).abs().valueOf()<t)return i.mul(this.s)}return this},divisible:function(t,e){return u(t,e),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(t){var e,r="",n=this.n,i=this.d;return this.s<0&&(r+="-"),1===i?r+=n:(t&&(e=Math.floor(n/i))>0&&(r+=e,r+=" ",n%=i),r+=n,r+="/",r+=i),r},toLatex:function(t){var e,r="",n=this.n,i=this.d;return this.s<0&&(r+="-"),1===i?r+=n:(t&&(e=Math.floor(n/i))>0&&(r+=e,n%=i),r+="\\frac{",r+=n,r+="}{",r+=i,r+="}"),r},toContinued:function(){var t,e=this.n,r=this.d,n=[];if(isNaN(e)||isNaN(r))return n;do{n.push(Math.floor(e/r)),t=e%r,e=r,r=t}while(1!==e);return n},toString:function(t){var e=this.n,r=this.d;if(isNaN(e)||isNaN(r))return"NaN";t=t||15;var n=function(t,e){for(;e%2==0;e/=2);for(;e%5==0;e/=5);if(1===e)return 0;for(var r=10%e,n=1;1!==r;n++)if(r=10*r%e,n>2e3)return 0;return n}(0,r),i=function(t,e,r){for(var n=1,i=function(t,e,r){for(var n=1;e>0;t=t*t%r,e>>=1)1&e&&(n=n*t%r);return n}(10,r,e),s=0;s<300;s++){if(n===i)return s;n=10*n%e,i=10*i%e}return 0}(0,r,n),s=-1===this.s?"-":"";if(s+=e/r|0,e%=r,(e*=10)&&(s+="."),n){for(var a=i;a--;)s+=e/r|0,e%=r,e*=10;for(s+="(",a=n;a--;)s+=e/r|0,e%=r,e*=10;s+=")"}else for(a=t;e&&a--;)s+=e/r|0,e%=r,e*=10;return s}},void 0===(r=function(){return d}.apply(e,[]))||(t.exports=r)}()},228:t=>{t.exports=function t(e,r){"use strict";var n,i,s=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,a=/(^[ ]*|[ ]*$)/g,o=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,h=/^0x[0-9a-f]+$/i,l=/^0/,c=function(e){return t.insensitive&&(""+e).toLowerCase()||""+e},u=c(e).replace(a,"")||"",f=c(r).replace(a,"")||"",d=u.replace(s,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),p=f.replace(s,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),g=parseInt(u.match(h),16)||1!==d.length&&u.match(o)&&Date.parse(u),m=parseInt(f.match(h),16)||g&&f.match(o)&&Date.parse(f)||null;if(m){if(g<m)return-1;if(g>m)return 1}for(var y=0,_=Math.max(d.length,p.length);y<_;y++){if(n=!(d[y]||"").match(l)&&parseFloat(d[y])||d[y]||0,i=!(p[y]||"").match(l)&&parseFloat(p[y])||p[y]||0,isNaN(n)!==isNaN(i))return isNaN(n)?1:-1;if(typeof n!=typeof i&&(n+="",i+=""),n<i)return-1;if(n>i)return 1}return 0}},377:(t,e,r)=>{var n=r(832),i=r(652),s=r(801),a=r(30),o=r(618),h=r(49),l=r(971);l.alea=n,l.xor128=i,l.xorwow=s,l.xorshift7=a,l.xor4096=o,l.tychei=h,t.exports=l},832:function(t,e,r){var n;!function(t,i,s){function a(t){var e,r=this,n=(e=4022871197,function(t){t=String(t);for(var r=0;r<t.length;r++){var n=.02519603282416938*(e+=t.charCodeAt(r));n-=e=n>>>0,e=(n*=e)>>>0,e+=4294967296*(n-=e)}return 2.3283064365386963e-10*(e>>>0)});r.next=function(){var t=2091639*r.s0+2.3283064365386963e-10*r.c;return r.s0=r.s1,r.s1=r.s2,r.s2=t-(r.c=0|t)},r.c=1,r.s0=n(" "),r.s1=n(" "),r.s2=n(" "),r.s0-=n(t),r.s0<0&&(r.s0+=1),r.s1-=n(t),r.s1<0&&(r.s1+=1),r.s2-=n(t),r.s2<0&&(r.s2+=1),n=null}function o(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function h(t,e){var r=new a(t),n=e&&e.state,i=r.next;return i.int32=function(){return 4294967296*r.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,n&&("object"==typeof n&&o(n,r),i.state=function(){return o(r,{})}),i}i&&i.exports?i.exports=h:r.amdD&&r.amdO?void 0===(n=function(){return h}.call(e,r,e,i))||(i.exports=n):this.alea=h}(0,t=r.nmd(t),r.amdD)},49:function(t,e,r){var n;!function(t,i,s){function a(t){var e=this,r="";e.next=function(){var t=e.b,r=e.c,n=e.d,i=e.a;return t=t<<25^t>>>7^r,r=r-n|0,n=n<<24^n>>>8^i,i=i-t|0,e.b=t=t<<20^t>>>12^r,e.c=r=r-n|0,e.d=n<<16^r>>>16^i,e.a=i-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):r+=t;for(var n=0;n<r.length+20;n++)e.b^=0|r.charCodeAt(n),e.next()}function o(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function h(t,e){var r=new a(t),n=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=r.next,i.quick=i,n&&("object"==typeof n&&o(n,r),i.state=function(){return o(r,{})}),i}i&&i.exports?i.exports=h:r.amdD&&r.amdO?void 0===(n=function(){return h}.call(e,r,e,i))||(i.exports=n):this.tychei=h}(0,t=r.nmd(t),r.amdD)},652:function(t,e,r){var n;!function(t,i,s){function a(t){var e=this,r="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:r+=t;for(var n=0;n<r.length+64;n++)e.x^=0|r.charCodeAt(n),e.next()}function o(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function h(t,e){var r=new a(t),n=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=r.next,i.quick=i,n&&("object"==typeof n&&o(n,r),i.state=function(){return o(r,{})}),i}i&&i.exports?i.exports=h:r.amdD&&r.amdO?void 0===(n=function(){return h}.call(e,r,e,i))||(i.exports=n):this.xor128=h}(0,t=r.nmd(t),r.amdD)},618:function(t,e,r){var n;!function(t,i,s){function a(t){var e=this;e.next=function(){var t,r,n=e.w,i=e.X,s=e.i;return e.w=n=n+1640531527|0,r=i[s+34&127],t=i[s=s+1&127],r^=r<<13,t^=t<<17,r^=r>>>15,t^=t>>>12,r=i[s]=r^t,e.i=s,r+(n^n>>>16)|0},function(t,e){var r,n,i,s,a,o=[],h=128;for(e===(0|e)?(n=e,e=null):(e+="\0",n=0,h=Math.max(h,e.length)),i=0,s=-32;s<h;++s)e&&(n^=e.charCodeAt((s+32)%e.length)),0===s&&(a=n),n^=n<<10,n^=n>>>15,n^=n<<4,n^=n>>>13,s>=0&&(a=a+1640531527|0,i=0==(r=o[127&s]^=n+a)?i+1:0);for(i>=128&&(o[127&(e&&e.length||0)]=-1),i=127,s=512;s>0;--s)n=o[i+34&127],r=o[i=i+1&127],n^=n<<13,r^=r<<17,n^=n>>>15,r^=r>>>12,o[i]=n^r;t.w=a,t.X=o,t.i=i}(e,t)}function o(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function h(t,e){null==t&&(t=+new Date);var r=new a(t),n=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=r.next,i.quick=i,n&&(n.X&&o(n,r),i.state=function(){return o(r,{})}),i}i&&i.exports?i.exports=h:r.amdD&&r.amdO?void 0===(n=function(){return h}.call(e,r,e,i))||(i.exports=n):this.xor4096=h}(0,t=r.nmd(t),r.amdD)},30:function(t,e,r){var n;!function(t,i,s){function a(t){var e=this;e.next=function(){var t,r,n=e.x,i=e.i;return t=n[i],r=(t^=t>>>7)^t<<24,r^=(t=n[i+1&7])^t>>>10,r^=(t=n[i+3&7])^t>>>3,r^=(t=n[i+4&7])^t<<7,t=n[i+7&7],r^=(t^=t<<13)^t<<9,n[i]=r,e.i=i+1&7,r},function(t,e){var r,n=[];if(e===(0|e))n[0]=e;else for(e=""+e,r=0;r<e.length;++r)n[7&r]=n[7&r]<<15^e.charCodeAt(r)+n[r+1&7]<<13;for(;n.length<8;)n.push(0);for(r=0;r<8&&0===n[r];++r);for(8==r?n[7]=-1:n[r],t.x=n,t.i=0,r=256;r>0;--r)t.next()}(e,t)}function o(t,e){return e.x=t.x.slice(),e.i=t.i,e}function h(t,e){null==t&&(t=+new Date);var r=new a(t),n=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=r.next,i.quick=i,n&&(n.x&&o(n,r),i.state=function(){return o(r,{})}),i}i&&i.exports?i.exports=h:r.amdD&&r.amdO?void 0===(n=function(){return h}.call(e,r,e,i))||(i.exports=n):this.xorshift7=h}(0,t=r.nmd(t),r.amdD)},801:function(t,e,r){var n;!function(t,i,s){function a(t){var e=this,r="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:r+=t;for(var n=0;n<r.length+64;n++)e.x^=0|r.charCodeAt(n),n==r.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function o(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function h(t,e){var r=new a(t),n=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=r.next,i.quick=i,n&&("object"==typeof n&&o(n,r),i.state=function(){return o(r,{})}),i}i&&i.exports?i.exports=h:r.amdD&&r.amdO?void 0===(n=function(){return h}.call(e,r,e,i))||(i.exports=n):this.xorwow=h}(0,t=r.nmd(t),r.amdD)},971:function(t,e,r){var n;!function(i,s,a){var o,h=256,l=a.pow(h,6),c=a.pow(2,52),u=2*c,f=255;function d(t,e,r){var n=[],f=y(m((e=1==e?{entropy:!0}:e||{}).entropy?[t,_(s)]:null==t?function(){try{var t;return o&&(t=o.randomBytes)?t=t(h):(t=new Uint8Array(h),(i.crypto||i.msCrypto).getRandomValues(t)),_(t)}catch(t){var e=i.navigator,r=e&&e.plugins;return[+new Date,i,r,i.screen,_(s)]}}():t,3),n),d=new p(n),v=function(){for(var t=d.g(6),e=l,r=0;t<c;)t=(t+r)*h,e*=h,r=d.g(1);for(;t>=u;)t/=2,e/=2,r>>>=1;return(t+r)/e};return v.int32=function(){return 0|d.g(4)},v.quick=function(){return d.g(4)/4294967296},v.double=v,y(_(d.S),s),(e.pass||r||function(t,e,r,n){return n&&(n.S&&g(n,d),t.state=function(){return g(d,{})}),r?(a.random=t,e):t})(v,f,"global"in e?e.global:this==a,e.state)}function p(t){var e,r=t.length,n=this,i=0,s=n.i=n.j=0,a=n.S=[];for(r||(t=[r++]);i<h;)a[i]=i++;for(i=0;i<h;i++)a[i]=a[s=f&s+t[i%r]+(e=a[i])],a[s]=e;(n.g=function(t){for(var e,r=0,i=n.i,s=n.j,a=n.S;t--;)e=a[i=f&i+1],r=r*h+a[f&(a[i]=a[s=f&s+e])+(a[s]=e)];return n.i=i,n.j=s,r})(h)}function g(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function m(t,e){var r,n=[],i=typeof t;if(e&&"object"==i)for(r in t)try{n.push(m(t[r],e-1))}catch(t){}return n.length?n:"string"==i?t:t+"\0"}function y(t,e){for(var r,n=t+"",i=0;i<n.length;)e[f&i]=f&(r^=19*e[f&i])+n.charCodeAt(i++);return _(e)}function _(t){return String.fromCharCode.apply(0,t)}if(y(a.random(),s),t.exports){t.exports=d;try{o=r(42)}catch(t){}}else void 0===(n=function(){return d}.call(e,r,e,t))||(t.exports=n)}("undefined"!=typeof self?self:this,[],Math)},287:function(t,e){"use strict";var r,n;void 0===(n="function"==typeof(r=function(){function t(){return!0}function e(){return!1}function r(){}return function n(){var i=[{name:"number",test:function(t){return"number"==typeof t}},{name:"string",test:function(t){return"string"==typeof t}},{name:"boolean",test:function(t){return"boolean"==typeof t}},{name:"Function",test:function(t){return"function"==typeof t}},{name:"Array",test:Array.isArray},{name:"Date",test:function(t){return t instanceof Date}},{name:"RegExp",test:function(t){return t instanceof RegExp}},{name:"Object",test:function(t){return"object"==typeof t&&null!==t&&t.constructor===Object}},{name:"null",test:function(t){return null===t}},{name:"undefined",test:function(t){return void 0===t}}],s={name:"any",test:t},a=[],o=[],h={types:i,conversions:o,ignore:a};function l(t){var e=D(h.types,(function(e){return e.name===t}));if(e)return e;if("any"===t)return s;var r=D(h.types,(function(e){return e.name.toLowerCase()===t.toLowerCase()}));throw new TypeError('Unknown type "'+t+'"'+(r?'. Did you mean "'+r.name+'"?':""))}function c(t){return t===s?999:h.types.indexOf(t)}function u(t){var e=D(h.types,(function(e){return e.test(t)}));if(e)return e.name;throw new TypeError("Value has unknown type. Value: "+t)}function f(t){return t.map((function(t){var e=t.types.map(x);return(t.restParam?"...":"")+e.join("|")})).join(",")}function d(t,e){var r=0===t.indexOf("..."),n=(r?t.length>3?t.slice(3):"any":t).split("|").map(C).filter(P).filter(T),i=function(t,e){var r={};return t.forEach((function(t){-1!==e.indexOf(t.from)||-1===e.indexOf(t.to)||r[t.from]||(r[t.from]=t)})),Object.keys(r).map((function(t){return r[t]}))}(e,n),s=n.map((function(t){var e=l(t);return{name:t,typeIndex:c(e),test:e.test,conversion:null,conversionIndex:-1}})),a=i.map((function(t){var r=l(t.from);return{name:t.from,typeIndex:c(r),test:r.test,conversion:t,conversionIndex:e.indexOf(t)}}));return{types:s.concat(a),restParam:r}}function p(t){var e=z(t);return!!e&&e.restParam}function g(t){return t.types.some((function(t){return null!=t.conversion}))}function m(e){if(e&&0!==e.types.length){if(1===e.types.length)return l(e.types[0].name).test;if(2===e.types.length){var r=l(e.types[0].name).test,n=l(e.types[1].name).test;return function(t){return r(t)||n(t)}}var i=e.types.map((function(t){return l(t.name).test}));return function(t){for(var e=0;e<i.length;e++)if(i[e](t))return!0;return!1}}return t}function y(t){var e,r,n,i;if(p(t)){var s=(e=(i=t,i.slice(0,i.length-1)).map(m)).length,a=m(z(t));return function(t){for(var r=0;r<e.length;r++)if(!e[r](t[r]))return!1;return function(t){for(var e=s;e<t.length;e++)if(!a(t[e]))return!1;return!0}(t)&&t.length>=s+1}}return 0===t.length?function(t){return 0===t.length}:1===t.length?(r=m(t[0]),function(t){return r(t[0])&&1===t.length}):2===t.length?(r=m(t[0]),n=m(t[1]),function(t){return r(t[0])&&n(t[1])&&2===t.length}):(e=t.map(m),function(t){for(var r=0;r<e.length;r++)if(!e[r](t[r]))return!1;return t.length===e.length})}function _(t,e){return e<t.params.length?t.params[e]:p(t.params)?z(t.params):null}function v(t,e,r){var n=_(t,e);return(n?r?n.types.filter(b):n.types:[]).map(x)}function x(t){return t.name}function b(t){return null===t.conversion||void 0===t.conversion}function w(t,e){var r=function(t){for(var e={},r=0;r<t.length;r++)e[t[r]]=!0;return Object.keys(e)}(B(t,(function(t){return v(t,e,!1)})));return-1!==r.indexOf("any")?["any"]:r}function M(t,e,r){var n,i,s,a=t||"unnamed",o=r;for(s=0;s<e.length;s++){var h=o.filter((function(t){var r=m(_(t,s));return(s<t.params.length||p(t.params))&&r(e[s])}));if(0===h.length){if((i=w(o,s)).length>0){var l=u(e[s]);return(n=new TypeError("Unexpected type of argument in function "+a+" (expected: "+i.join(" or ")+", actual: "+l+", index: "+s+")")).data={category:"wrongType",fn:a,index:s,actual:l,expected:i},n}}else o=h}var c=o.map((function(t){return p(t.params)?1/0:t.params.length}));if(e.length<Math.min.apply(null,c))return i=w(o,s),(n=new TypeError("Too few arguments in function "+a+" (expected: "+i.join(" or ")+", index: "+e.length+")")).data={category:"tooFewArgs",fn:a,index:e.length,expected:i},n;var f=Math.max.apply(null,c);return e.length>f?((n=new TypeError("Too many arguments in function "+a+" (expected: "+f+", actual: "+e.length+")")).data={category:"tooManyArgs",fn:a,index:e.length,expectedLength:f},n):((n=new TypeError('Arguments of type "'+e.join(", ")+'" do not match any of the defined signatures of function '+a+".")).data={category:"mismatch",actual:e.map(u)},n)}function E(t){for(var e=999,r=0;r<t.types.length;r++)b(t.types[r])&&(e=Math.min(e,t.types[r].typeIndex));return e}function S(t){for(var e=999,r=0;r<t.types.length;r++)b(t.types[r])||(e=Math.min(e,t.types[r].conversionIndex));return e}function N(t,e){var r;return 0!=(r=t.restParam-e.restParam)||0!=(r=g(t)-g(e))||0!=(r=E(t)-E(e))?r:S(t)-S(e)}function k(t,e){var r,n,i=Math.min(t.params.length,e.params.length);if(0!=(n=t.params.some(g)-e.params.some(g)))return n;for(r=0;r<i;r++)if(0!=(n=g(t.params[r])-g(e.params[r])))return n;for(r=0;r<i;r++)if(0!==(n=N(t.params[r],e.params[r])))return n;return t.params.length-e.params.length}function F(t){var e,r,n,i,s=[],a=[];switch(t.types.forEach((function(t){t.conversion&&(s.push(l(t.conversion.from).test),a.push(t.conversion.convert))})),a.length){case 0:return function(t){return t};case 1:return e=s[0],n=a[0],function(t){return e(t)?n(t):t};case 2:return e=s[0],r=s[1],n=a[0],i=a[1],function(t){return e(t)?n(t):r(t)?i(t):t};default:return function(t){for(var e=0;e<a.length;e++)if(s[e](t))return a[e](t);return t}}}function O(t,e){return function t(r,n,i){if(n<r.length){var s,a=r[n],o=e?a.types.filter(b):a.types;if(a.restParam){var h=o.filter(b);s=h.length<o.length?[h,o]:[o]}else s=o.map((function(t){return[t]}));return B(s,(function(e){return t(r,n+1,i.concat([e]))}))}return[i.map((function(t,e){return{types:t,restParam:e===r.length-1&&p(r)}}))]}(t,0,[])}function A(t,n){if(0===Object.keys(n).length)throw new SyntaxError("No signatures provided");var i=[];Object.keys(n).map((function(t){return function(t,e,r){var n=[];return""!==t.trim()&&(n=t.split(",").map(C).map((function(t,e,n){var i=d(t,r);if(i.restParam&&e!==n.length-1)throw new SyntaxError('Unexpected rest parameter "'+t+'": only allowed for the last parameter');return i}))),n.some(R)?null:{params:n,fn:e}}(t,n[t],h.conversions)})).filter(I).forEach((function(t){var e=D(i,(function(e){return function(t,e){for(var r=Math.max(t.params.length,e.params.length),n=0;n<r;n++)if(!j(v(t,n,!0),v(e,n,!0)))return!1;var i=t.params.length,s=e.params.length,a=p(t.params),o=p(e.params);return a?o?i===s:s>=i:o?i>=s:i===s}(e,t)}));if(e)throw new TypeError('Conflicting signatures "'+f(e.params)+'" and "'+f(t.params)+'".');i.push(t)}));var s=B(i,(function(t){return(t?O(t.params,!1):[]).map((function(e){return{params:e,fn:t.fn}}))})).filter(I);s.sort(k);var a=s[0]&&s[0].params.length<=2&&!p(s[0].params),o=s[1]&&s[1].params.length<=2&&!p(s[1].params),l=s[2]&&s[2].params.length<=2&&!p(s[2].params),c=s[3]&&s[3].params.length<=2&&!p(s[3].params),u=s[4]&&s[4].params.length<=2&&!p(s[4].params),_=s[5]&&s[5].params.length<=2&&!p(s[5].params),x=a&&o&&l&&c&&u&&_,b=s.map((function(t){return y(t.params)})),w=a?m(s[0].params[0]):e,E=o?m(s[1].params[0]):e,S=l?m(s[2].params[0]):e,N=c?m(s[3].params[0]):e,A=u?m(s[4].params[0]):e,T=_?m(s[5].params[0]):e,P=a?m(s[0].params[1]):e,z=o?m(s[1].params[1]):e,G=l?m(s[2].params[1]):e,V=c?m(s[3].params[1]):e,q=u?m(s[4].params[1]):e,U=_?m(s[5].params[1]):e,H=s.map((function(t){return function(t,e){var r=e;if(t.some(g)){var n=p(t),i=t.map(F);r=function(){for(var t=[],r=n?arguments.length-1:arguments.length,s=0;s<r;s++)t[s]=i[s](arguments[s]);return n&&(t[r]=arguments[r].map(i[r])),e.apply(this,t)}}var s=r;if(p(t)){var a=t.length-1;s=function(){return r.apply(this,L(arguments,0,a).concat([L(arguments,a)]))}}return s}(t.params,t.fn)})),Y=a?H[0]:r,X=o?H[1]:r,W=l?H[2]:r,Z=c?H[3]:r,J=u?H[4]:r,$=_?H[5]:r,K=a?s[0].params.length:-1,Q=o?s[1].params.length:-1,tt=l?s[2].params.length:-1,et=c?s[3].params.length:-1,rt=u?s[4].params.length:-1,nt=_?s[5].params.length:-1,it=x?6:0,st=s.length,at=function(){for(var e=it;e<st;e++)if(b[e](arguments))return H[e].apply(this,arguments);throw M(t,arguments,s)},ot=function t(e,r){return arguments.length===K&&w(e)&&P(r)?Y.apply(t,arguments):arguments.length===Q&&E(e)&&z(r)?X.apply(t,arguments):arguments.length===tt&&S(e)&&G(r)?W.apply(t,arguments):arguments.length===et&&N(e)&&V(r)?Z.apply(t,arguments):arguments.length===rt&&A(e)&&q(r)?J.apply(t,arguments):arguments.length===nt&&T(e)&&U(r)?$.apply(t,arguments):at.apply(t,arguments)};try{Object.defineProperty(ot,"name",{value:t})}catch(t){}return ot.signatures=function(t){var e={};return t.forEach((function(t){t.params.some(g)||O(t.params,!0).forEach((function(r){e[f(r)]=t.fn}))})),e}(s),ot}function T(t){return-1===h.ignore.indexOf(t)}function C(t){return t.trim()}function P(t){return!!t}function I(t){return null!==t}function R(t){return 0===t.types.length}function z(t){return t[t.length-1]}function L(t,e,r){return Array.prototype.slice.call(t,e,r)}function j(t,e){for(var r=0;r<t.length;r++)if(n=e,i=t[r],-1!==n.indexOf(i))return!0;var n,i;return!1}function D(t,e){for(var r=0;r<t.length;r++)if(e(t[r]))return t[r]}function B(t,e){return Array.prototype.concat.apply([],t.map(e))}function G(t){for(var e="",r=0;r<t.length;r++){var n=t[r];if(("object"==typeof n.signatures||"string"==typeof n.signature)&&""!==n.name)if(""===e)e=n.name;else if(e!==n.name){var i=new Error("Function names do not match (expected: "+e+", actual: "+n.name+")");throw i.data={actual:n.name,expected:e},i}}return e}function V(t){var e,r={};function n(t,n){if(r.hasOwnProperty(t)&&n!==r[t])throw(e=new Error('Signature "'+t+'" is defined twice')).data={signature:t},e}for(var i=0;i<t.length;i++){var s=t[i];if("object"==typeof s.signatures)for(var a in s.signatures)s.signatures.hasOwnProperty(a)&&(n(a,s.signatures[a]),r[a]=s.signatures[a]);else{if("string"!=typeof s.signature)throw(e=new TypeError("Function is no typed-function (index: "+i+")")).data={index:i},e;n(s.signature,s),r[s.signature]=s}}return r}return(h=A("typed",{"string, Object":A,Object:function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(t[r]);return A(G(e),t)},"...Function":function(t){return A(G(t),V(t))},"string, ...Function":function(t,e){return A(t,V(e))}})).create=n,h.types=i,h.conversions=o,h.ignore=a,h.convert=function(t,e){var r=u(t);if(e===r)return t;for(var n=0;n<h.conversions.length;n++){var i=h.conversions[n];if(i.from===r&&i.to===e)return i.convert(t)}throw new Error("Cannot convert from "+r+" to "+e)},h.find=function(t,e){if(!t.signatures)throw new TypeError("Function is no typed-function");var r;if("string"==typeof e){r=e.split(",");for(var n=0;n<r.length;n++)r[n]=r[n].trim()}else{if(!Array.isArray(e))throw new TypeError("String array or a comma separated string expected");r=e}var i=r.join(","),s=t.signatures[i];if(s)return s;throw new TypeError("Signature not found (signature: "+(t.name||"unnamed")+"("+r.join(", ")+"))")},h.addType=function(t,e){if(!t||"string"!=typeof t.name||"function"!=typeof t.test)throw new TypeError("Object with properties {name: string, test: function} expected");if(!1!==e)for(var r=0;r<h.types.length;r++)if("Object"===h.types[r].name)return void h.types.splice(r,0,t);h.types.push(t)},h.addConversion=function(t){if(!t||"string"!=typeof t.from||"string"!=typeof t.to||"function"!=typeof t.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");h.conversions.push(t)},h}()})?r.apply(e,[]):r)||(t.exports=n)},42:()=>{}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var s=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}r.amdD=function(){throw new Error("define cannot be used indirect")},r.amdO={},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var n={};(()=>{"use strict";r.r(n),r.d(n,{FemComponent:()=>ma});var t,e={move:"M",line:"L",curve:"C",arc:"A",close:"Z"};"undefined"!=typeof window?t=window:void 0!==r.g?t=r.g:"undefined"!=typeof self&&(t=self);var i,s=t,a=function(t){return{translateX:t.e,translateY:t.f,scaleX:Math.sqrt(t.a*t.a+t.b*t.b),scaleY:Math.sqrt(t.c*t.c+t.d*t.d),rotation:180*Math.atan2(t.b,t.a)/Math.PI}},o=function(t){i=t},h=function(t,e){e=e&&e.identity()||new i;for(var r=t,n=[];r&&r._matrix;)n.push(r._matrix),r=r.parent;n.reverse();for(var s=0;s<n.length;s++){var a=n[s].elements;e.multiply(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9])}return e},l=function(t,e,r){return r*(e-t)+t},c=function(t,e){for(;t<0;)t+=e;return t%e},u=s.Float32Array||Array,f=function(t){return Math.floor(1e6*t)/1e6},d=Object.freeze({__proto__:null,decomposeMatrix:a,getComputedMatrix:h,setMatrix:o,lerp:l,mod:c,NumArray:u,toFixed:f}),p=Array.prototype.slice,g={isNaN:function(t){return"number"==typeof t&&t!==+t},isElement:function(t){return!(!t||1!==t.nodeType)},isObject:function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},extend:function(t){for(var e=p.call(arguments,1),r=0;r<e.length;r++){var n=e[r];for(var i in n)t[i]=n[i]}return t},defaults:function(t){for(var e=p.call(arguments,1),r=0;r<e.length;r++){var n=e[r];for(var i in n)void 0===t[i]&&(t[i]=n[i])}return t},each:function(t,e,r){for(var n=r||this,i=!function(t){if(null==t)return!1;var e=t.length;return"number"==typeof e&&e>=0&&e<4294967296}(t)&&Object.keys(t),s=(i||t).length,a=0;a<s;a++){var o=i?i[a]:a;e.call(n,t[o],o,t)}return t},performance:s.performance&&s.performance.now?s.performance:Date},m={on:y,off:_,trigger:function(t){var e=this;if(!e._events)return e;var r=Array.prototype.slice.call(arguments,1),n=e._events[t];return n&&v(e,n,r),e},listen:function(t,e,r){var n=this;if(t){var i=function(){r.apply(n,arguments)};i.obj=t,i.name=e,i.handler=r,t.on(e,i)}return n},ignore:function(t,e,r){return t.off(e,r),this},Types:{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",remove:"remove",insert:"insert",order:"order",load:"load"}};function y(t,e){var r=this;return r._events||(r._events={}),(r._events[t]||(r._events[t]=[])).push(e),r}function _(t,e){var r=this;if(!r._events)return r;if(!t&&!e)return r._events={},r;for(var n=t?[t]:Object.keys(r._events),i=0,s=n.length;i<s;i++){t=n[i];var a=r._events[t];if(a){var o=[];if(e)for(var h=0,l=a.length;h<l;h++){var c=a[h];c=c.handler?c.handler:c,e&&e!==c&&o.push(c)}r._events[t]=o}}return r}function v(t,e,r){var n;switch(r.length){case 0:n=function(n){e[n].call(t,r[0])};break;case 1:n=function(n){e[n].call(t,r[0],r[1])};break;case 2:n=function(n){e[n].call(t,r[0],r[1],r[2])};break;case 3:n=function(n){e[n].call(t,r[0],r[1],r[2],r[3])};break;default:n=function(n){e[n].apply(t,r)}}for(var i=0;i<e.length;i++)n(i)}function x(t,e){this.x=t||0,this.y=e||0}m.bind=y,m.unbind=_,g.extend(x,{zero:new x,add:function(t,e){return new x(t.x+e.x,t.y+e.y)},sub:function(t,e){return new x(t.x-e.x,t.y-e.y)},subtract:function(t,e){return x.sub(t,e)},ratioBetween:function(t,e){return(t.x*e.x+t.y*e.y)/(t.length()*e.length())},angleBetween:function(t,e){var r,n;return arguments.length>=4?(r=arguments[0]-arguments[2],n=arguments[1]-arguments[3],Math.atan2(n,r)):(r=t.x-e.x,n=t.y-e.y,Math.atan2(n,r))},distanceBetween:function(t,e){return Math.sqrt(x.distanceBetweenSquared(t,e))},distanceBetweenSquared:function(t,e){var r=t.x-e.x,n=t.y-e.y;return r*r+n*n},MakeObservable:function(t){t.bind=t.on=function(){return this._bound||(this._x=this.x,this._y=this.y,Object.defineProperty(this,"x",w),Object.defineProperty(this,"y",M),g.extend(this,b),this._bound=!0),m.bind.apply(this,arguments),this}}}),g.extend(x.prototype,m,{constructor:x,set:function(t,e){return this.x=t,this.y=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this},clear:function(){return this.x=0,this.y=0,this},clone:function(){return new x(this.x,this.y)},add:function(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x+=t,this.y+=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x+=t.x,this.y+=t.y):(this.x+=t,this.y+=e)),this},addSelf:function(t){return this.add.apply(this,arguments)},sub:function(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x-=t,this.y-=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x-=t.x,this.y-=t.y):(this.x-=t,this.y-=e)),this},subtract:function(){return this.sub.apply(this,arguments)},subSelf:function(t){return this.sub.apply(this,arguments)},subtractSelf:function(t){return this.sub.apply(this,arguments)},multiply:function(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x*=t,this.y*=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x*=t.x,this.y*=t.y):(this.x*=t,this.y*=e)),this},multiplySelf:function(t){return this.multiply.apply(this,arguments)},multiplyScalar:function(t){return this.multiply(t)},divide:function(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x/=t,this.y/=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x/=t.x,this.y/=t.y):(this.x/=t,this.y/=e),g.isNaN(this.x)&&(this.x=0),g.isNaN(this.y)&&(this.y=0)),this},divideSelf:function(t){return this.divide.apply(this,arguments)},divideScalar:function(t){return this.divide(t)},negate:function(){return this.multiply(-1)},dot:function(t){return this.x*t.x+this.y*t.y},length:function(){return Math.sqrt(this.lengthSquared())},lengthSquared:function(){return this.x*this.x+this.y*this.y},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,r=this.y-t.y;return e*e+r*r},setLength:function(t){return this.normalize().multiplyScalar(t)},equals:function(t,e){return e=void 0===e?1e-4:e,this.distanceTo(t)<e},lerp:function(t,e){var r=(t.x-this.x)*e+this.x,n=(t.y-this.y)*e+this.y;return this.set(r,n)},isZero:function(t){return t=void 0===t?1e-4:t,this.length()<t},toString:function(){return this.x+", "+this.y},toObject:function(){return{x:this.x,y:this.y}},rotate:function(t){var e=Math.cos(t),r=Math.sin(t);return this.x=this.x*e-this.y*r,this.y=this.x*r+this.y*e,this}});var b={constructor:x,set:function(t,e){return this._x=t,this._y=e,this.trigger(m.Types.change)},copy:function(t){return this._x=t.x,this._y=t.y,this.trigger(m.Types.change)},clear:function(){return this._x=0,this._y=0,this.trigger(m.Types.change)},clone:function(){return new x(this._x,this._y)},add:function(t,e){return arguments.length<=0?this:(arguments.length<=1?"number"==typeof t?(this._x+=t,this._y+=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this._x+=t.x,this._y+=t.y):(this._x+=t,this._y+=e),this.trigger(m.Types.change))},sub:function(t,e){return arguments.length<=0?this:(arguments.length<=1?"number"==typeof t?(this._x-=t,this._y-=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this._x-=t.x,this._y-=t.y):(this._x-=t,this._y-=e),this.trigger(m.Types.change))},multiply:function(t,e){return arguments.length<=0?this:(arguments.length<=1?"number"==typeof t?(this._x*=t,this._y*=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this._x*=t.x,this._y*=t.y):(this._x*=t,this._y*=e),this.trigger(m.Types.change))},divide:function(t,e){return arguments.length<=0?this:(arguments.length<=1?"number"==typeof t?(this._x/=t,this._y/=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this._x/=t.x,this._y/=t.y):(this._x/=t,this._y/=e),g.isNaN(this._x)&&(this._x=0),g.isNaN(this._y)&&(this._y=0),this.trigger(m.Types.change))},dot:function(t){return this._x*t.x+this._y*t.y},lengthSquared:function(){return this._x*this._x+this._y*this._y},distanceToSquared:function(t){var e=this._x-t.x,r=this._y-t.y;return e*e+r*r},lerp:function(t,e){var r=(t.x-this._x)*e+this._x,n=(t.y-this._y)*e+this._y;return this.set(r,n)},toString:function(){return this._x+", "+this._y},toObject:function(){return{x:this._x,y:this._y}},rotate:function(t){var e=Math.cos(t),r=Math.sin(t);return this._x=this._x*e-this._y*r,this._y=this._x*r+this._y*e,this}},w={enumerable:!0,get:function(){return this._x},set:function(t){this._x=t,this.trigger(m.Types.change,"x")}},M={enumerable:!0,get:function(){return this._y},set:function(t){this._y=t,this.trigger(m.Types.change,"y")}};function E(t,r,n,i,s,a,o){x.call(this,t,r),this._broadcast=function(){this.trigger(m.Types.change)}.bind(this),this._command=o||e.move,this._relative=!0;var h="number"==typeof n,l="number"==typeof i,c="number"==typeof s,u="number"==typeof a;(h||l||c||u)&&E.AppendCurveProperties(this),h&&(this.controls.left.x=n),l&&(this.controls.left.y=i),c&&(this.controls.right.x=s),u&&(this.controls.right.y=a)}x.MakeObservable(x.prototype),g.extend(E,{AppendCurveProperties:function(t){t.relative=!0,t.controls={},t.controls.left=new x(0,0),t.controls.right=new x(0,0)},MakeObservable:function(t){Object.defineProperty(t,"command",{enumerable:!0,get:function(){return this._command},set:function(t){this._command=t,this._command!==e.curve||g.isObject(this.controls)||E.AppendCurveProperties(this),this.trigger(m.Types.change)}}),Object.defineProperty(t,"relative",{enumerable:!0,get:function(){return this._relative},set:function(t){this._relative!=t&&(this._relative=!!t,this.trigger(m.Types.change))}}),g.extend(t,x.prototype,S),t.bind=t.on=function(){var t=this._bound;x.prototype.bind.apply(this,arguments),t||g.extend(this,S)}}});var S={constructor:E,listen:function(){return g.isObject(this.controls)||E.AppendCurveProperties(this),this.controls.left.bind(m.Types.change,this._broadcast),this.controls.right.bind(m.Types.change,this._broadcast),this},ignore:function(){return this.controls.left.unbind(m.Types.change,this._broadcast),this.controls.right.unbind(m.Types.change,this._broadcast),this},copy:function(t){return this.x=t.x,this.y=t.y,"string"==typeof t.command&&(this.command=t.command),g.isObject(t.controls)&&(g.isObject(this.controls)||E.AppendCurveProperties(this),this.controls.left.copy(t.controls.left),this.controls.right.copy(t.controls.right)),"boolean"==typeof t.relative&&(this.relative=t.relative),this.command===e.arc&&(this.rx=t.rx,this.ry=t.ry,this.xAxisRotation=t.xAxisRotation,this.largeArcFlag=t.largeArcFlag,this.sweepFlag=t.sweepFlag),this},clone:function(){var t=this.controls,e=new E(this.x,this.y,t&&t.left.x,t&&t.left.y,t&&t.right.x,t&&t.right.y,this.command);return e.relative=this._relative,e},toObject:function(){var t={x:this.x,y:this.y};return this._command&&(t.command=this._command),this._relative&&(t.relative=this._relative),this.controls&&(t.controls={left:this.controls.left.toObject(),right:this.controls.right.toObject()}),t},toString:function(){return this.controls?[this._x,this._y,this.controls.left.x,this.controls.left.y,this.controls.right.x,this.controls.right.y,this._command,this._relative?1:0].join(", "):[this._x,this._y].join(", ")}};E.MakeObservable(E.prototype);var N=0,k={nextFrameID:null,Types:{webgl:"WebGLRenderer",svg:"SVGRenderer",canvas:"CanvasRenderer"},Version:"v0.7.8",PublishDate:"2021-07-14T02:15:23.697Z",Identifier:"two-",Resolution:12,AutoCalculateImportedMatrices:!0,Instances:[],uniqueId:function(){return N++}},F=Math.PI/2,O={CollinearityEpsilon:Math.pow(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:.25,angle:0,epsilon:Number.EPSILON},abscissas:[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],weights:[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]]},A=function(t,e,r,n,i){var s=1-t;return s*s*s*e+3*s*s*t*r+3*s*t*t*n+t*t*t*i},T=function(t,e,r,n,i,s,a,o,h){var l=(h=h||O.RecursionLimit)+1;if(Math.abs(t-a)<.001&&Math.abs(e-o)<.001)return[new E(a,o)];for(var c=[],u=0;u<l;u++){var f=u/l,d=A(f,t,r,i,a),p=A(f,e,n,s,o);c.push(new E(d,p))}return c},C=function(t,e,r,n,i,s,a,o,h){if(t===r&&e===n&&i===a&&s===o){var l=a-t,c=o-e;return Math.sqrt(l*l+c*c)}var u=9*(r-i)+3*(a-t),f=6*(t+i)-12*r,d=3*(r-t),p=9*(n-s)+3*(o-e),g=6*(e+s)-12*n,m=3*(n-e);return I((function(t){var e=(u*t+f)*t+d,r=(p*t+g)*t+m;return Math.sqrt(e*e+r*r)}),0,1,h||O.RecursionLimit)},P=function(t,e,r,n,i,s,a,o){for(var h,l,c,u,f,d,p,g,m=[],y=[[],[]],_=0;_<2;++_)if(0==_?(l=6*t-12*r+6*i,h=-3*t+9*r-9*i+3*a,c=3*r-3*t):(l=6*e-12*n+6*s,h=-3*e+9*n-9*s+3*o,c=3*n-3*e),Math.abs(h)<1e-12){if(Math.abs(l)<1e-12)continue;0<(u=-c/l)&&u<1&&m.push(u)}else p=l*l-4*c*h,g=Math.sqrt(p),p<0||(0<(f=(-l+g)/(2*h))&&f<1&&m.push(f),0<(d=(-l-g)/(2*h))&&d<1&&m.push(d));for(var v,x=m.length,b=x;x--;)v=1-(u=m[x]),y[0][x]=v*v*v*t+3*v*v*u*r+3*v*u*u*i+u*u*u*a,y[1][x]=v*v*v*e+3*v*v*u*n+3*v*u*u*s+u*u*u*o;return y[0][b]=t,y[1][b]=e,y[0][b+1]=a,y[1][b+1]=o,y[0].length=y[1].length=b+2,{min:{x:Math.min.apply(0,y[0]),y:Math.min.apply(0,y[1])},max:{x:Math.max.apply(0,y[0]),y:Math.max.apply(0,y[1])}}},I=function(t,e,r,n){for(var i=O.abscissas[n-2],s=O.weights[n-2],a=.5*(r-e),o=a+e,h=0,l=n+1>>1,c=1&n?s[h++]*t(o):0;h<l;){var u=a*i[h];c+=s[h++]*(t(o+u)+t(o-u))}return a*c},R=function(t,r){for(var n=t.length,i=n-1,s=0;s<n;s++){var a=t[s];g.isObject(a.controls)||E.AppendCurveProperties(a);var o=r?c(s-1,n):Math.max(s-1,0),h=r?c(s+1,n):Math.min(s+1,i),l=t[o],u=a,f=t[h];z(l,u,f),u.command=0===s?e.move:e.curve}},z=function(t,e,r){var n=x.angleBetween(t,e),i=x.angleBetween(r,e),s=x.distanceBetween(t,e),a=x.distanceBetween(r,e),o=(n+i)/2;return s<1e-4||a<1e-4?("boolean"!=typeof e.relative||e.relative||(e.controls.left.copy(e),e.controls.right.copy(e)),e):(s*=.33,a*=.33,i<n?o+=F:o-=F,e.controls.left.x=Math.cos(o)*s,e.controls.left.y=Math.sin(o)*s,o-=Math.PI,e.controls.right.x=Math.cos(o)*a,e.controls.right.y=Math.sin(o)*a,"boolean"!=typeof e.relative||e.relative||(e.controls.left.x+=e.x,e.controls.left.y+=e.y,e.controls.right.x+=e.x,e.controls.right.y+=e.y),e)},L=function(t,e,r){return new x(2*t.x-(e.x+t.x)-(r?t.x:0),2*t.y-(e.y+t.y)-(r?t.y:0))},j=Object.freeze({__proto__:null,Curve:O,getComponentOnCubicBezier:A,subdivide:T,getCurveLength:C,getCurveBoundingBox:P,integrate:I,getCurveFromPoints:R,getControlPoints:z,getReflection:L,getAnchorsFromArcData:function(t,r,n,i,s,a,o){for(var h=k.Resolution,l=0;l<h;l++){var c=(l+1)/h;o&&(c=1-c);var u=c*a+s,f=new E(n*Math.cos(u),i*Math.sin(u));E.AppendCurveProperties(f),f.command=e.line}}}),D=s.devicePixelRatio||1,B=function(t){return D/function(t){return t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1}(t)},G=Math.cos,V=Math.sin,q=Math.tan,U=[];function H(t,e,r,n,i,s){this.elements=new u(9);var a=t;Array.isArray(a)||(a=Array.prototype.slice.call(arguments)),this.identity(),a.length>0&&this.set(a)}function Y(){this.renderer={},this._renderer.flagMatrix=Y.FlagMatrix.bind(this),this.isShape=!0,this.id=k.Identifier+k.uniqueId(),this.classList=[],this.matrix=new H,this.translation=new x,this.rotation=0,this.scale=1,this.skewX=0,this.skewY=0}function X(){Array.call(this),arguments[0]&&Array.isArray(arguments[0])?arguments[0].length>0&&Array.prototype.push.apply(this,arguments[0]):arguments.length>0&&Array.prototype.push.apply(this,arguments)}function W(t){X.apply(this,arguments),Object.defineProperty(this,"_events",{value:{},enumerable:!1}),this.ids={},this.attach(Array.isArray(t)?t:Array.prototype.slice.call(arguments)),this.on(m.Types.insert,this.attach),this.on(m.Types.remove,this.detach)}o(H),g.extend(H,{Identity:[1,0,0,0,1,0,0,0,1],Multiply:function(t,e,r){if(e.length<=3){var n=t,i=e[0]||0,s=e[1]||0,a=e[2]||0;return{x:n[0]*i+n[1]*s+n[2]*a,y:n[3]*i+n[4]*s+n[5]*a,z:n[6]*i+n[7]*s+n[8]*a}}var o=t[0],h=t[1],l=t[2],c=t[3],f=t[4],d=t[5],p=t[6],g=t[7],m=t[8],y=e[0],_=e[1],v=e[2],x=e[3],b=e[4],w=e[5],M=e[6],E=e[7],S=e[8];return(r=r||new u(9))[0]=o*y+h*x+l*M,r[1]=o*_+h*b+l*E,r[2]=o*v+h*w+l*S,r[3]=c*y+f*x+d*M,r[4]=c*_+f*b+d*E,r[5]=c*v+f*w+d*S,r[6]=p*y+g*x+m*M,r[7]=p*_+g*b+m*E,r[8]=p*v+g*w+m*S,r}}),g.extend(H.prototype,m,{constructor:H,manual:!1,set:function(t,e,r,n,i,s,a,o,h){var l;return void 0===e&&(t=(l=t)[0],e=l[1],r=l[2],n=l[3],i=l[4],s=l[5],a=l[6],o=l[7],h=l[8]),this.elements[0]=t,this.elements[1]=e,this.elements[2]=r,this.elements[3]=n,this.elements[4]=i,this.elements[5]=s,this.elements[6]=a,this.elements[7]=o,this.elements[8]=h,this.trigger(m.Types.change)},copy:function(t){return this.elements[0]=t.elements[0],this.elements[1]=t.elements[1],this.elements[2]=t.elements[2],this.elements[3]=t.elements[3],this.elements[4]=t.elements[4],this.elements[5]=t.elements[5],this.elements[6]=t.elements[6],this.elements[7]=t.elements[7],this.elements[8]=t.elements[8],this.manual=t.manual,this.trigger(m.Types.change)},identity:function(){return this.elements[0]=H.Identity[0],this.elements[1]=H.Identity[1],this.elements[2]=H.Identity[2],this.elements[3]=H.Identity[3],this.elements[4]=H.Identity[4],this.elements[5]=H.Identity[5],this.elements[6]=H.Identity[6],this.elements[7]=H.Identity[7],this.elements[8]=H.Identity[8],this.trigger(m.Types.change)},multiply:function(t,e,r,n,i,s,a,o,h){if(void 0===e)return this.elements[0]*=t,this.elements[1]*=t,this.elements[2]*=t,this.elements[3]*=t,this.elements[4]*=t,this.elements[5]*=t,this.elements[6]*=t,this.elements[7]*=t,this.elements[8]*=t,this.trigger(m.Types.change);if(void 0===n)return t=t||0,e=e||0,r=r||0,{x:(i=this.elements)[0]*t+i[1]*e+i[2]*r,y:i[3]*t+i[4]*e+i[5]*r,z:i[6]*t+i[7]*e+i[8]*r};var l=this.elements,c=[t,e,r,n,i,s,a,o,h],u=l[0],f=l[1],d=l[2],p=l[3],g=l[4],y=l[5],_=l[6],v=l[7],x=l[8],b=c[0],w=c[1],M=c[2],E=c[3],S=c[4],N=c[5],k=c[6],F=c[7],O=c[8];return this.elements[0]=u*b+f*E+d*k,this.elements[1]=u*w+f*S+d*F,this.elements[2]=u*M+f*N+d*O,this.elements[3]=p*b+g*E+y*k,this.elements[4]=p*w+g*S+y*F,this.elements[5]=p*M+g*N+y*O,this.elements[6]=_*b+v*E+x*k,this.elements[7]=_*w+v*S+x*F,this.elements[8]=_*M+v*N+x*O,this.trigger(m.Types.change)},inverse:function(t){var e=this.elements;t=t||new H;var r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],h=e[6],l=e[7],c=e[8],u=c*a-o*l,f=-c*s+o*h,d=l*s-a*h,p=r*u+n*f+i*d;return p?(p=1/p,t.elements[0]=u*p,t.elements[1]=(-c*n+i*l)*p,t.elements[2]=(o*n-i*a)*p,t.elements[3]=f*p,t.elements[4]=(c*r-i*h)*p,t.elements[5]=(-o*r+i*s)*p,t.elements[6]=d*p,t.elements[7]=(-l*r+n*h)*p,t.elements[8]=(a*r-n*s)*p,t):null},scale:function(t,e){var r=arguments.length;return r<=1&&(e=t),this.multiply(t,0,0,0,e,0,0,0,1)},rotate:function(t){var e=G(t),r=V(t);return this.multiply(e,-r,0,r,e,0,0,0,1)},translate:function(t,e){return this.multiply(1,0,t,0,1,e,0,0,1)},skewX:function(t){var e=q(t);return this.multiply(1,e,0,0,1,0,0,0,1)},skewY:function(t){var e=q(t);return this.multiply(1,0,0,e,1,0,0,0,1)},toString:function(t){return U.length=0,this.toTransformArray(t,U),U.map(f).join(" ")},toTransformArray:function(t,e){var r=this.elements,n=!!e,i=r[0],s=r[1],a=r[2],o=r[3],h=r[4],l=r[5];if(t){var c=r[6],u=r[7],f=r[8];return n?(e[0]=i,e[1]=o,e[2]=c,e[3]=s,e[4]=h,e[5]=u,e[6]=a,e[7]=l,void(e[8]=f)):[i,o,c,s,h,u,a,l,f]}return n?(e[0]=i,e[1]=o,e[2]=s,e[3]=h,e[4]=a,void(e[5]=l)):[i,o,s,h,a,l]},toArray:function(t,e){var r=this.elements,n=!!e,i=r[0],s=r[1],a=r[2],o=r[3],h=r[4],l=r[5];if(t){var c=r[6],u=r[7],f=r[8];return n?(e[0]=i,e[1]=s,e[2]=a,e[3]=o,e[4]=h,e[5]=l,e[6]=c,e[7]=u,void(e[8]=f)):[i,s,a,o,h,l,c,u,f]}return n?(e[0]=i,e[1]=s,e[2]=a,e[3]=o,e[4]=h,void(e[5]=l)):[i,s,a,o,h,l]},toObject:function(){return{elements:this.toArray(!0),manual:!!this.manual}},clone:function(){return(new H).copy(this)}}),g.extend(Y,{FlagMatrix:function(){this._flagMatrix=!0},MakeObservable:function(t){var e={enumerable:!1,get:function(){return this._translation},set:function(t){this._translation&&this._translation.unbind(m.Types.change,this._renderer.flagMatrix),this._translation=t,this._translation.bind(m.Types.change,this._renderer.flagMatrix),Y.FlagMatrix.call(this)}};Object.defineProperty(t,"translation",e),Object.defineProperty(t,"position",e),Object.defineProperty(t,"rotation",{enumerable:!0,get:function(){return this._rotation},set:function(t){this._rotation=t,this._flagMatrix=!0}}),Object.defineProperty(t,"scale",{enumerable:!0,get:function(){return this._scale},set:function(t){this._scale instanceof x&&this._scale.unbind(m.Types.change,this._renderer.flagMatrix),this._scale=t,this._scale instanceof x&&this._scale.bind(m.Types.change,this._renderer.flagMatrix),this._flagMatrix=!0,this._flagScale=!0}}),Object.defineProperty(t,"skewX",{enumerable:!0,get:function(){return this._skewX},set:function(t){this._skewX=t,this._flagMatrix=!0}}),Object.defineProperty(t,"skewY",{enumerable:!0,get:function(){return this._skewY},set:function(t){this._skewY=t,this._flagMatrix=!0}}),Object.defineProperty(t,"matrix",{enumerable:!0,get:function(){return this._matrix},set:function(t){this._matrix=t,this._flagMatrix=!0}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return this._id},set:function(t){var e=this._id;t!==this._id&&(this._id=t,this._flagId=!0,this.parent&&(delete this.parent.children.ids[e],this.parent.children.ids[this._id]=this))}}),Object.defineProperty(t,"className",{enumerable:!0,get:function(){return this._className},set:function(t){if(this._flagClassName=this._className!==t,this._flagClassName){for(var e=this._className.split(/\s+?/),r=t.split(/\s+?/),n=0;n<e.length;n++){var i=e[n],s=Array.prototype.indexOf.call(this.classList,i);s>=0&&this.classList.splice(s,1)}this.classList=this.classList.concat(r)}this._className=t}}),Object.defineProperty(t,"renderer",{enumerable:!1,get:function(){return this._renderer},set:function(t){this._renderer=t}})}}),g.extend(Y.prototype,m,{constructor:Y,_flagId:!0,_flagMatrix:!0,_flagScale:!1,_flagClassName:!1,_id:"",_translation:null,_rotation:0,_scale:1,_skewX:0,_skewY:0,_className:"",addTo:function(t){return t.add(this),this},clone:function(t){var e=new Y;return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()},_update:function(t){return!this._matrix.manual&&this._flagMatrix&&(this._matrix.identity().translate(this.translation.x,this.translation.y),this._scale instanceof x?this._matrix.scale(this._scale.x,this._scale.y):this._matrix.scale(this._scale),this._matrix.rotate(this.rotation),this._matrix.skewX(this.skewX),this._matrix.skewY(this.skewY)),t&&this.parent&&this.parent._update&&this.parent._update(),this},flagReset:function(){return this._flagId=this._flagMatrix=this._flagScale=this._flagClassName=!1,this}}),Y.MakeObservable(Y.prototype),X.prototype=new Array,g.extend(X.prototype,m,{constructor:X,pop:function(){var t=Array.prototype.pop.apply(this,arguments);return this.trigger(m.Types.remove,[t]),t},shift:function(){var t=Array.prototype.shift.apply(this,arguments);return this.trigger(m.Types.remove,[t]),t},push:function(){var t=Array.prototype.push.apply(this,arguments);return this.trigger(m.Types.insert,arguments),t},unshift:function(){var t=Array.prototype.unshift.apply(this,arguments);return this.trigger(m.Types.insert,arguments),t},splice:function(){var t,e=Array.prototype.splice.apply(this,arguments);return this.trigger(m.Types.remove,e),arguments.length>2&&(t=this.slice(arguments[0],arguments[0]+arguments.length-2),this.trigger(m.Types.insert,t),this.trigger(m.Types.order)),e},sort:function(){return Array.prototype.sort.apply(this,arguments),this.trigger(m.Types.order),this},reverse:function(){return Array.prototype.reverse.apply(this,arguments),this.trigger(m.Types.order),this},indexOf:function(){return Array.prototype.indexOf.apply(this,arguments)}}),W.prototype=new X,g.extend(W.prototype,{constructor:W,attach:function(t){for(var e=0;e<t.length;e++){var r=t[e];r&&r.id&&(this.ids[r.id]=r)}return this},detach:function(t){for(var e=0;e<t.length;e++)delete this.ids[t[e].id];return this}});var Z=Math.min,J=Math.max;function $(t){Y.call(this,!0),this._renderer.type="group",this.additions=[],this.subtractions=[],this.children=Array.isArray(t)?t:Array.prototype.slice.call(arguments)}function K(t,e){var r,n=t.parent;function i(){e.subtractions.length>0&&(r=Array.prototype.indexOf.call(e.subtractions,t))>=0&&e.subtractions.splice(r,1),e.additions.length>0&&(r=Array.prototype.indexOf.call(e.additions,t))>=0&&e.additions.splice(r,1),t.parent=e,e.additions.push(t),e._flagAdditions=!0}function s(){(r=Array.prototype.indexOf.call(n.additions,t))>=0&&n.additions.splice(r,1),(r=Array.prototype.indexOf.call(n.subtractions,t))<0&&(n.subtractions.push(t),n._flagSubtractions=!0)}n!==e?(n&&n.children.ids[t.id]&&(r=Array.prototype.indexOf.call(n.children,t),n.children.splice(r,1),s()),e?i():(s(),n._flagAdditions&&0===n.additions.length&&(n._flagAdditions=!1),n._flagSubtractions&&0===n.subtractions.length&&(n._flagSubtractions=!1),delete t.parent)):i()}g.extend($,{Children:W,InsertChildren:function(t){for(var e=0;e<t.length;e++)K.call(this,t[e],this)},RemoveChildren:function(t){for(var e=0;e<t.length;e++)K.call(this,t[e])},OrderChildren:function(t){this._flagOrder=!0},Properties:["fill","stroke","linewidth","cap","join","miter","closed","curved","automatic"],MakeObservable:function(t){var e=$.Properties;Object.defineProperty(t,"visible",{enumerable:!0,get:function(){return this._visible},set:function(t){this._flagVisible=this._visible!==t||this._flagVisible,this._visible=t}}),Object.defineProperty(t,"opacity",{enumerable:!0,get:function(){return this._opacity},set:function(t){this._flagOpacity=this._opacity!==t||this._flagOpacity,this._opacity=t}}),Object.defineProperty(t,"beginning",{enumerable:!0,get:function(){return this._beginning},set:function(t){this._flagBeginning=this._beginning!==t||this._flagBeginning,this._beginning=t}}),Object.defineProperty(t,"ending",{enumerable:!0,get:function(){return this._ending},set:function(t){this._flagEnding=this._ending!==t||this._flagEnding,this._ending=t}}),Object.defineProperty(t,"length",{enumerable:!0,get:function(){if(this._flagLength||this._length<=0){if(this._length=0,!this.children)return this._length;for(var t=0;t<this.children.length;t++){var e=this.children[t];this._length+=e.length}}return this._length}}),Y.MakeObservable(t),$.MakeGetterSetters(t,e),Object.defineProperty(t,"children",{enumerable:!0,get:function(){return this._children},set:function(t){var e=$.InsertChildren.bind(this),r=$.RemoveChildren.bind(this),n=$.OrderChildren.bind(this);this._children&&(this._children.unbind(),this._children.length>0&&r(this._children)),this._children=new W(t),this._children.bind(m.Types.insert,e),this._children.bind(m.Types.remove,r),this._children.bind(m.Types.order,n),t.length>0&&e(t)}}),Object.defineProperty(t,"mask",{enumerable:!0,get:function(){return this._mask},set:function(t){this._mask=t,this._flagMask=!0,t.clip||(t.clip=!0)}})},MakeGetterSetters:function(t,e){Array.isArray(e)||(e=[e]),g.each(e,(function(e){$.MakeGetterSetter(t,e)}))},MakeGetterSetter:function(t,e){var r="_"+e;Object.defineProperty(t,e,{enumerable:!0,get:function(){return this[r]},set:function(t){this[r]=t;for(var n=0;n<this.children.length;n++)this.children[n][e]=t}})}}),g.extend($.prototype,Y.prototype,{constructor:$,_flagAdditions:!1,_flagSubtractions:!1,_flagOrder:!1,_flagOpacity:!0,_flagBeginning:!1,_flagEnding:!1,_flagLength:!1,_flagMask:!1,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_length:0,_mask:null,clone:function(t){var e=new $,r=this.children.map((function(t){return t.clone()}));return e.add(r),e.opacity=this.opacity,this.mask&&(e.mask=this.mask),e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.className=this.className,this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()},toObject:function(){var t={children:[],translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale instanceof x?this.scale.toObject():this.scale,opacity:this.opacity,className:this.className,mask:this.mask?this.mask.toObject():null};return this.matrix.manual&&(t.matrix=this.matrix.toObject()),g.each(this.children,(function(e,r){t.children[r]=e.toObject()}),this),t},corner:function(){for(var t=this.getBoundingClientRect(!0),e=0;e<this.children.length;e++){var r=this.children[e];r.translation.x-=t.left,r.translation.y-=t.top}return this},center:function(){for(var t=this.getBoundingClientRect(!0),e=t.left+t.width/2-this.translation.x,r=t.top+t.height/2-this.translation.y,n=0;n<this.children.length;n++){var i=this.children[n];i.isShape&&(i.translation.x-=e,i.translation.y-=r)}return this},getById:function(t){var e=null;return function r(n){if(n.id===t)return n;if(n.children)for(var i=0;i<n.children.length;i++)if(e=r(n.children[i]))return e;return null}(this)},getByClassName:function(t){var e=[];return function r(n){if(Array.prototype.indexOf.call(n.classList,t)>=0&&e.push(n),n.children)for(var i=0;i<n.children.length;i++)r(n.children[i]);return e}(this)},getByType:function(t){var e=[];return function r(n){if(n instanceof t&&e.push(n),n.children)for(var i=0;i<n.children.length;i++)r(n.children[i]);return e}(this)},add:function(t){t=t instanceof Array?t.slice():Array.prototype.slice.call(arguments);for(var e=0;e<t.length;e++){var r=t[e];if(r&&r.id){var n=Array.prototype.indexOf.call(this.children,r);n>=0&&this.children.splice(n,1),this.children.push(r)}}return this},remove:function(t){var e=arguments.length,r=this.parent;if(e<=0&&r)return r.remove(this),this;t=t instanceof Array?t.slice():Array.prototype.slice.call(arguments);for(var n=0;n<t.length;n++){var i=t[n];if(i&&this.children.ids[i.id]){var s=this.children.indexOf(i);s>=0&&this.children.splice(s,1)}}return this},getBoundingClientRect:function(t){var e,r,n,i,s,a,o,l,c,u;this._update(!0);var f=1/0,d=-1/0,p=1/0,m=-1/0,y=/texture|gradient/i;r=t?this._matrix:h(this);for(var _=0;_<this.children.length;_++){var v=this.children[_];v.visible&&!y.test(v._renderer.type)&&(o="number"!=typeof(e=v.getBoundingClientRect(t)).top||g.isNaN(e.top)||!isFinite(e.top),l="number"!=typeof e.left||g.isNaN(e.left)||!isFinite(e.left),c="number"!=typeof e.right||g.isNaN(e.right)||!isFinite(e.right),u="number"!=typeof e.bottom||g.isNaN(e.bottom)||!isFinite(e.bottom),o||l||c||u||(p=Z(e.top,p),f=Z(e.left,f),d=J(e.right,d),m=J(e.bottom,m)))}return t&&(n=r.multiply(f,p,1),i=r.multiply(f,m,1),s=r.multiply(d,p,1),a=r.multiply(d,m,1),p=Z(n.y,i.y,s.y,a.y),f=Z(n.x,i.x,s.x,a.x),d=J(n.x,i.x,s.x,a.x),m=J(n.y,i.y,s.y,a.y)),{top:p,left:f,right:d,bottom:m,width:d-f,height:m-p}},noFill:function(){return this.children.forEach((function(t){t.noFill()})),this},noStroke:function(){return this.children.forEach((function(t){t.noStroke()})),this},subdivide:function(){var t=arguments;return this.children.forEach((function(e){e.subdivide.apply(e,t)})),this},_update:function(){var t,e,r;if(this._flagBeginning||this._flagEnding){var n=Math.min(this._beginning,this._ending),i=Math.max(this._beginning,this._ending),s=this.length,a=0,o=n*s,h=i*s;for(t=0;t<this.children.length;t++)o>a+(e=(r=this.children[t]).length)?(r.beginning=1,r.ending=1):h<a?(r.beginning=0,r.ending=0):o>a&&o<a+e?(r.beginning=(o-a)/e,r.ending=1):h>a&&h<a+e?(r.beginning=0,r.ending=(h-a)/e):(r.beginning=0,r.ending=1),a+=e}return Y.prototype._update.apply(this,arguments)},flagReset:function(){return this._flagAdditions&&(this.additions.length=0,this._flagAdditions=!1),this._flagSubtractions&&(this.subtractions.length=0,this._flagSubtractions=!1),this._flagOrder=this._flagMask=this._flagOpacity=this._flagBeginning=this._flagEnding=!1,Y.prototype.flagReset.call(this),this}}),$.MakeObservable($.prototype);var Q=[],tt=2*Math.PI,et=Math.max,rt=Math.min,nt=Math.abs,it=Math.sin,st=Math.cos,at=Math.acos,ot=Math.sqrt,ht=function(t){return 1==t[0]&&0==t[3]&&0==t[1]&&1==t[4]&&0==t[2]&&0==t[5]},lt={isHidden:/(undefined|none|transparent)/i,alignments:{left:"start",middle:"center",right:"end"},shim:function(t,e){return t.tagName=t.nodeName=e||"canvas",t.nodeType=1,t.getAttribute=function(t){return this[t]},t.setAttribute=function(t,e){return this[t]=e,this},t},group:{renderChild:function(t){lt[t._renderer.type].render.call(t,this.ctx,!0,this.clip)},render:function(t){if(!this._visible)return this;this._update();var e=this._matrix.elements,r=this.parent;this._renderer.opacity=this._opacity*(r&&r._renderer?r._renderer.opacity:1);var n=this._mask,i=ht(e),s=!i||!!n;if(this._renderer.context||(this._renderer.context={}),this._renderer.context.ctx=t,s&&(t.save(),i||t.transform(e[0],e[3],e[1],e[4],e[2],e[5])),n&&lt[n._renderer.type].render.call(n,t,!0),this._opacity>0&&0!==this._scale)for(var a=0;a<this.children.length;a++){var o=this.children[a];lt[o._renderer.type].render.call(o,t)}return s&&t.restore(),this.flagReset()}},path:{render:function(t,r,n){var i,s,a,o,h,l,u,f,d,p,g,m,y,_,v,b,w,M,E,S,N,k,F,O,A,T,C,P,I,R,z,L,j,D,B;if(B=this.parent&&this.parent._renderer?this.parent._renderer.opacity:1,R=this._mask,z=this._clip,h=this._opacity*(B||1),l=this._visible,!r&&(!l||z||0===h))return this;this._update(),i=this._matrix.elements,s=this._stroke,a=this._linewidth,o=this._fill,u=this._cap,f=this._join,d=this._miter,p=this._closed,y=(m=(g=this._renderer.vertices).length)-1,L=ht(i),D=this.dashes,L||(t.save(),t.transform(i[0],i[3],i[1],i[4],i[2],i[5])),R&&lt[R._renderer.type].render.call(R,t,!0),o&&("string"==typeof o?t.fillStyle=o:(lt[o._renderer.type].render.call(o,t),t.fillStyle=o._renderer.effect)),s&&("string"==typeof s?t.strokeStyle=s:(lt[s._renderer.type].render.call(s,t),t.strokeStyle=s._renderer.effect),a&&(t.lineWidth=a),d&&(t.miterLimit=d),f&&(t.lineJoin=f),!p&&u&&(t.lineCap=u)),"number"==typeof h&&(t.globalAlpha=h),D&&D.length>0&&(t.lineDashOffset=D.offset||0,t.setLineDash(D)),t.beginPath();for(var G=0;G<g.length;G++)switch(P=(w=g[G]).x,I=w.y,w.command){case e.close:t.closePath();break;case e.arc:var V=w.rx,q=w.ry,U=w.xAxisRotation,H=w.largeArcFlag,Y=w.sweepFlag,X=(b=g[v=p?c(G-1,m):et(G-1,0)]).x,W=b.y;lt.renderSvgArcCommand(t,X,W,V,q,H,Y,U,P,I);break;case e.curve:v=p?c(G-1,m):Math.max(G-1,0),_=p?c(G+1,m):Math.min(G+1,y),b=g[v],M=g[_],O=b.controls&&b.controls.right||x.zero,A=w.controls&&w.controls.left||x.zero,b._relative?(k=O.x+b.x,F=O.y+b.y):(k=O.x,F=O.y),w._relative?(S=A.x+w.x,N=A.y+w.y):(S=A.x,N=A.y),t.bezierCurveTo(k,F,S,N,P,I),G>=y&&p&&(M=E,T=w.controls&&w.controls.right||x.zero,C=M.controls&&M.controls.left||x.zero,w._relative?(k=T.x+w.x,F=T.y+w.y):(k=T.x,F=T.y),M._relative?(S=C.x+M.x,N=C.y+M.y):(S=C.x,N=C.y),P=M.x,I=M.y,t.bezierCurveTo(k,F,S,N,P,I));break;case e.line:t.lineTo(P,I);break;case e.move:E=w,t.moveTo(P,I)}return p&&t.closePath(),z||n||(lt.isHidden.test(o)||((j=o._renderer&&o._renderer.offset)&&(t.save(),t.translate(-o._renderer.offset.x,-o._renderer.offset.y),t.scale(o._renderer.scale.x,o._renderer.scale.y)),t.fill(),j&&t.restore()),lt.isHidden.test(s)||((j=s._renderer&&s._renderer.offset)&&(t.save(),t.translate(-s._renderer.offset.x,-s._renderer.offset.y),t.scale(s._renderer.scale.x,s._renderer.scale.y),t.lineWidth=a/s._renderer.scale.x),t.stroke(),j&&t.restore())),L||t.restore(),z&&!n&&t.clip(),D&&D.length>0&&t.setLineDash(Q),this.flagReset()}},text:{render:function(t,e,r){var n=this.parent&&this.parent._renderer?this.parent._renderer.opacity:1,i=this._opacity*n,s=this._visible,a=this._mask,o=this._clip;if(!e&&(!s||o||0===i))return this;this._update();var h,l,c,u,f,d,p,g,m,y,_,v=this._matrix.elements,x=this._stroke,b=this._linewidth,w=this._fill,M=this._decoration,E=ht(v),S=w._renderer&&w._renderer.offset&&x._renderer&&x._renderer.offset,N=this.dashes,k=lt.alignments[this._alignment]||this._alignment,F=this._baseline;if(E||(t.save(),t.transform(v[0],v[3],v[1],v[4],v[2],v[5])),a&&lt[a._renderer.type].render.call(a,t,!0),S||(t.font=[this._style,this._weight,this._size+"px/"+this._leading+"px",this._family].join(" ")),t.textAlign=k,t.textBaseline=F,w&&("string"==typeof w?t.fillStyle=w:(lt[w._renderer.type].render.call(w,t),t.fillStyle=w._renderer.effect)),x&&("string"==typeof x?t.strokeStyle=x:(lt[x._renderer.type].render.call(x,t),t.strokeStyle=x._renderer.effect),b&&(t.lineWidth=b)),"number"==typeof i&&(t.globalAlpha=i),N&&N.length>0&&(t.lineDashOffset=N.offset||0,t.setLineDash(N)),o||r||(lt.isHidden.test(w)||(w._renderer&&w._renderer.offset?(d=w._renderer.scale.x,p=w._renderer.scale.y,t.save(),t.translate(-w._renderer.offset.x,-w._renderer.offset.y),t.scale(d,p),h=this._size/w._renderer.scale.y,l=this._leading/w._renderer.scale.y,t.font=[this._style,this._weight,h+"px/",l+"px",this._family].join(" "),c=w._renderer.offset.x/w._renderer.scale.x,u=w._renderer.offset.y/w._renderer.scale.y,t.fillText(this.value,c,u),t.restore()):t.fillText(this.value,0,0)),lt.isHidden.test(x)||(x._renderer&&x._renderer.offset?(d=x._renderer.scale.x,p=x._renderer.scale.y,t.save(),t.translate(-x._renderer.offset.x,-x._renderer.offset.y),t.scale(d,p),h=this._size/x._renderer.scale.y,l=this._leading/x._renderer.scale.y,t.font=[this._style,this._weight,h+"px/",l+"px",this._family].join(" "),c=x._renderer.offset.x/x._renderer.scale.x,u=x._renderer.offset.y/x._renderer.scale.y,f=b/x._renderer.scale.x,t.lineWidth=f,t.strokeText(this.value,c,u),t.restore()):t.strokeText(this.value,0,0))),/(underline|strikethrough)/i.test(M)){var O=t.measureText(this.value),A=1;switch(M){case"underline":m=O.actualBoundingBoxAscent,_=O.actualBoundingBoxAscent;break;case"strikethrough":m=0,_=0,A=.5}switch(F){case"top":m+=this._size*A,_+=this._size*A;break;case"baseline":case"bottom":m-=this._size*A,_-=this._size*A}switch(k){case"left":case"start":g=0,y=O.width;break;case"right":case"end":g=-O.width,y=0;break;default:g=-O.width/2,y=O.width/2}t.lineWidth=Math.max(Math.floor(this._size/15),1),t.strokeStyle=t.fillStyle,t.beginPath(),t.moveTo(g,m),t.lineTo(y,_),t.stroke()}return E||t.restore(),o&&!r&&t.clip(),N&&N.length>0&&t.setLineDash(Q),this.flagReset()}},"linear-gradient":{render:function(t){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops){this._renderer.effect=t.createLinearGradient(this.left._x,this.left._y,this.right._x,this.right._y);for(var e=0;e<this.stops.length;e++){var r=this.stops[e];this._renderer.effect.addColorStop(r._offset,r._color)}}return this.flagReset()}},"radial-gradient":{render:function(t){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops){this._renderer.effect=t.createRadialGradient(this.center._x,this.center._y,0,this.focal._x,this.focal._y,this._radius);for(var e=0;e<this.stops.length;e++){var r=this.stops[e];this._renderer.effect.addColorStop(r._offset,r._color)}}return this.flagReset()}},texture:{render:function(t){this._update();var e=this.image;return(!this._renderer.effect||(this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)&&(this._renderer.effect=t.createPattern(this.image,this._repeat)),(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof x||(this._renderer.offset=new x),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,e&&(this._renderer.offset.x+=e.width/2,this._renderer.offset.y+=e.height/2,this._scale instanceof x?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof x||(this._renderer.scale=new x),this._scale instanceof x?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}},renderSvgArcCommand:function(t,e,r,n,i,s,a,o,h,l){o=o*Math.PI/180,n=nt(n),i=nt(i);var u=(e-h)/2,f=(r-l)/2,d=st(o)*u+it(o)*f,p=-it(o)*u+st(o)*f,g=n*n,m=i*i,y=d*d,_=p*p,v=y/g+_/m;if(v>1){var x=ot(v);g=(n*=x)*n,m=(i*=x)*i}var b=g*_+m*y,w=ot(et(0,(g*m-b)/b));s===a&&(w=-w);var M=w*n*p/i,E=-w*i*d/n,S=st(o)*M-it(o)*E+(e+h)/2,N=it(o)*M+st(o)*E+(r+l)/2,F=ut(1,0,(d-M)/n,(p-E)/i);!function(t,e,r,n,i,s,a,o,h){var l=O.Tolerance.epsilon,u=a-s,f=Math.abs(u)<l;(u=c(u,tt))<l&&(u=f?0:tt),!0!==o||f||(u===tt?u=-tt:u-=tt);for(var d=0;d<k.Resolution;d++){var p=s+d/(k.Resolution-1)*u,g=e+n*Math.cos(p),m=r+i*Math.sin(p);if(0!==h){var y=Math.cos(h),_=Math.sin(h),v=g-e,x=m-r;g=v*y-x*_+e,m=v*_+x*y+r}t.lineTo(g,m)}}(t,S,N,n,i,F,F+ut((d-M)/n,(p-E)/i,(-d-M)/n,(-p-E)/i)%tt,0===a,o)}};function ct(t){var e=!1!==t.smoothing;this.domElement=t.domElement||document.createElement("canvas"),this.ctx=this.domElement.getContext("2d"),this.overdraw=t.overdraw||!1,void 0!==this.ctx.imageSmoothingEnabled&&(this.ctx.imageSmoothingEnabled=e),this.scene=new $,this.scene.parent=this}function ut(t,e,r,n){var i=t*r+e*n,s=ot(t*t+e*e)*ot(r*r+n*n),a=at(et(-1,rt(1,i/s)));return t*n-e*r<0&&(a=-a),a}g.extend(ct,{Utils:lt}),g.extend(ct.prototype,m,{constructor:ct,setSize:function(t,e,r){return this.width=t,this.height=e,this.ratio=void 0===r?B(this.ctx):r,this.domElement.width=t*this.ratio,this.domElement.height=e*this.ratio,this.domElement.style&&g.extend(this.domElement.style,{width:t+"px",height:e+"px"}),this.trigger(m.Types.resize,t,e,r)},render:function(){var t=1===this.ratio;return t||(this.ctx.save(),this.ctx.scale(this.ratio,this.ratio)),this.overdraw||this.ctx.clearRect(0,0,this.width,this.height),lt.group.render.call(this.scene,this.ctx),t||this.ctx.restore(),this}});var ft={Image:null,isHeadless:!1,shim:function(t,e){return ct.Utils.shim(t),void 0!==e&&(ft.Image=e),ft.isHeadless=!0,t}},dt={hasEventListeners:"function"==typeof s.addEventListener,bind:function(t,e,r,n){return this.hasEventListeners?t.addEventListener(e,r,!!n):t.attachEvent("on"+e,r),dt},unbind:function(t,e,r,n){return dt.hasEventListeners?t.removeEventListeners(e,r,!!n):t.detachEvent("on"+e,r),dt},getRequestAnimationFrame:function(){var t,e=0,r=["ms","moz","webkit","o"],n=s.requestAnimationFrame;if(!n){for(var i=0;i<r.length;i++)n=s[r[i]+"RequestAnimationFrame"]||n,t=s[r[i]+"CancelAnimationFrame"]||s[r[i]+"CancelRequestAnimationFrame"]||t;n=n||function(t,r){var n=(new Date).getTime(),i=Math.max(0,16-(n-e)),a=s.setTimeout((function(){t(n+i)}),i);return e=n+i,a}}return n}},pt=s.document?s.document.createElement("div"):{};function gt(t){this.name="Two.js",this.message=t}pt.id="help-two-load",Object.defineProperty(dt,"temp",{enumerable:!0,get:function(){return g.isElement(pt)&&!s.document.head.contains(pt)&&(g.extend(pt.style,{display:"none"}),s.document.head.appendChild(pt)),pt}}),gt.prototype=new Error,g.extend(gt.prototype,{constructor:gt});var mt,yt=function(t){var e="_"+t,r="_flag"+t.charAt(0).toUpperCase()+t.slice(1);Object.defineProperty(this,t,{enumerable:!0,get:function(){return this[e]},set:function(t){this[e]=t,this[r]=!0}})};function _t(){this.map={}}function vt(t,e,r){this.renderer={},this._renderer.type="stop",this.offset="number"==typeof t?t:vt.Index<=0?0:1,this.opacity="number"==typeof r?r:1,this.color="string"==typeof e?e:vt.Index<=0?"#fff":"#000",vt.Index=(vt.Index+1)%2}function xt(t){this.renderer={},this._renderer.type="gradient",this.id=k.Identifier+k.uniqueId(),this.classList=[],this._renderer.flagStops=xt.FlagStops.bind(this),this._renderer.bindStops=xt.BindStops.bind(this),this._renderer.unbindStops=xt.UnbindStops.bind(this),this.spread="pad",t&&(this.stops=t)}function bt(t,e,r,n,i){xt.call(this,i),this._renderer.type="linear-gradient";var s=bt.FlagEndPoints.bind(this);this.left=(new x).bind(m.Types.change,s),this.right=(new x).bind(m.Types.change,s),"number"==typeof t&&(this.left.x=t),"number"==typeof e&&(this.left.y=e),"number"==typeof r&&(this.right.x=r),"number"==typeof n&&(this.right.y=n)}function wt(t,e,r,n,i,s){xt.call(this,n),this._renderer.type="radial-gradient",this.center=(new x).bind(m.Types.change,function(){this._flagCenter=!0}.bind(this)),this.radius="number"==typeof r?r:20,this.focal=(new x).bind(m.Types.change,function(){this._flagFocal=!0}.bind(this)),"number"==typeof t&&(this.center.x=t),"number"==typeof e&&(this.center.y=e),this.focal.copy(this.center),"number"==typeof i&&(this.focal.x=i),"number"==typeof s&&(this.focal.y=s)}g.extend(_t.prototype,{constructor:_t,add:function(t,e){return this.map[t]=e,this},remove:function(t){return delete this.map[t],this},get:function(t){return this.map[t]},contains:function(t){return t in this.map}}),g.extend(vt,{Index:0,Properties:["offset","opacity","color"],MakeObservable:function(t){g.each(vt.Properties,(function(t){var e="_"+t,r="_flag"+t.charAt(0).toUpperCase()+t.slice(1);Object.defineProperty(this,t,{enumerable:!0,get:function(){return this[e]},set:function(t){this[e]=t,this[r]=!0,this.parent&&(this.parent._flagStops=!0)}})}),t),Object.defineProperty(t,"renderer",{enumerable:!1,get:function(){return this._renderer},set:function(t){this._renderer=t}})}}),g.extend(vt.prototype,m,{constructor:vt,clone:function(){var t=new vt;return g.each(vt.Properties,(function(e){t[e]=this[e]}),this),t},toObject:function(){var t={};return g.each(vt.Properties,(function(e){t[e]=this[e]}),this),t},flagReset:function(){return this._flagOffset=this._flagColor=this._flagOpacity=!1,this}}),vt.MakeObservable(vt.prototype),g.extend(xt,{Stop:vt,Properties:["spread"],MakeObservable:function(t){g.each(xt.Properties,yt,t),Object.defineProperty(t,"stops",{enumerable:!0,get:function(){return this._stops},set:function(t){var e=this._renderer.bindStops,r=this._renderer.unbindStops;this._stops&&this._stops.unbind(m.Types.insert,e).unbind(m.Types.remove,r),this._stops=new X((t||[]).slice(0)),this._stops.bind(m.Types.insert,e).bind(m.Types.remove,r),e(this._stops)}}),Object.defineProperty(t,"renderer",{enumerable:!1,get:function(){return this._renderer},set:function(t){this._renderer=t}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return this._id},set:function(t){this._id=t}})},FlagStops:function(){this._flagStops=!0},BindStops:function(t){for(var e=t.length;e--;)t[e].bind(m.Types.change,this._renderer.flagStops),t[e].parent=this;this._renderer.flagStops()},UnbindStops:function(t){for(var e=t.length;e--;)t[e].unbind(m.Types.change,this._renderer.flagStops),delete t[e].parent;this._renderer.flagStops()}}),g.extend(xt.prototype,m,{constructor:xt,_flagId:!1,_flagStops:!1,_flagSpread:!1,_id:"",clone:function(t){var e=new xt(this.stops.map((function(t){return t.clone()})));return g.each(xt.Properties,(function(t){e[t]=this[t]}),this),t&&t.add(e),e},toObject:function(){var t={stops:this.stops.map((function(t){return t.toObject()}))};return g.each(xt.Properties,(function(e){t[e]=this[e]}),this),t},_update:function(){return(this._flagSpread||this._flagStops)&&this.trigger(m.Types.change),this},flagReset:function(){return this._flagSpread=this._flagStops=!1,this}}),xt.MakeObservable(xt.prototype),g.extend(bt,{Stop:vt,MakeObservable:function(t){xt.MakeObservable(t)},FlagEndPoints:function(){this._flagEndPoints=!0}}),g.extend(bt.prototype,xt.prototype,{constructor:bt,_flagEndPoints:!1,clone:function(t){var e=this.stops.map((function(t){return t.clone()})),r=new bt(this.left._x,this.left._y,this.right._x,this.right._y,e);return g.each(xt.Properties,(function(t){r[t]=this[t]}),this),t&&t.add(r),r},toObject:function(){var t=xt.prototype.toObject.call(this);return t.left=this.left.toObject(),t.right=this.right.toObject(),t},_update:function(){return(this._flagEndPoints||this._flagSpread||this._flagStops)&&this.trigger(m.Types.change),this},flagReset:function(){return this._flagEndPoints=!1,xt.prototype.flagReset.call(this),this}}),bt.MakeObservable(bt.prototype),g.extend(wt,{Stop:vt,Properties:["radius"],MakeObservable:function(t){xt.MakeObservable(t),g.each(wt.Properties,yt,t)}}),g.extend(wt.prototype,xt.prototype,{constructor:wt,_flagRadius:!1,_flagCenter:!1,_flagFocal:!1,clone:function(t){var e=this.stops.map((function(t){return t.clone()})),r=new wt(this.center._x,this.center._y,this._radius,e,this.focal._x,this.focal._y);return g.each(xt.Properties.concat(wt.Properties),(function(t){r[t]=this[t]}),this),t&&t.add(r),r},toObject:function(){var t=xt.prototype.toObject.call(this);return g.each(wt.Properties,(function(e){t[e]=this[e]}),this),t.center=this.center.toObject(),t.focal=this.focal.toObject(),t},_update:function(){return(this._flagRadius||this._flatCenter||this._flagFocal||this._flagSpread||this._flagStops)&&this.trigger(m.Types.change),this},flagReset:function(){return this._flagRadius=this._flagCenter=this._flagFocal=!1,xt.prototype.flagReset.call(this),this}}),wt.MakeObservable(wt.prototype);var Mt={video:/\.(mp4|webm|ogg)$/i,image:/\.(jpe?g|png|gif|tiff|webp)$/i,effect:/texture|gradient/i};function Et(t,e){if(this.renderer={},this._renderer.type="texture",this._renderer.flagOffset=Et.FlagOffset.bind(this),this._renderer.flagScale=Et.FlagScale.bind(this),this.id=k.Identifier+k.uniqueId(),this.classList=[],this.loaded=!1,this.repeat="no-repeat",this.offset=new x,"function"==typeof e){var r=function(){this.unbind(m.Types.load,r),"function"==typeof e&&e()}.bind(this);this.bind(m.Types.load,r)}if("string"==typeof t)this.src=t;else if("object"==typeof t){var n=Object.prototype.toString.call(t);"[object HTMLImageElement]"!==n&&"[object HTMLCanvasElement]"!==n&&"[object HTMLVideoElement]"!==n&&"[object Image]"!==n||(this.image=t)}this._update()}s.document&&(mt=document.createElement("a")),g.extend(Et,{Properties:["id","src","loaded","repeat"],RegularExpressions:Mt,ImageRegistry:new _t,getAbsoluteURL:function(t){return mt?(mt.href=t,mt.href):t},loadHeadlessBuffer:function(t,e){t.image.onload=e,t.image.src=t.src},getTag:function(t){return t&&t.nodeName&&t.nodeName.toLowerCase()||"img"},getImage:function(t){var e,r=Et.getAbsoluteURL(t);return Et.ImageRegistry.contains(r)?Et.ImageRegistry.get(r):(ft.Image?(e=new ft.Image,ct.Utils.shim(e,"img")):s.document?e=Mt.video.test(r)?document.createElement("video"):document.createElement("img"):console.warn("Two.js: no prototypical image defined for Two.Texture"),e.crossOrigin="anonymous",e)},Register:{canvas:function(t,e){t._src="#"+t.id,Et.ImageRegistry.add(t.src,t.image),"function"==typeof e&&e()},img:function(t,e){var r=t.image,n=function(t){!ft.isHeadless&&r.removeEventListener&&"function"==typeof r.removeEventListener&&(r.removeEventListener("load",n,!1),r.removeEventListener("error",i,!1)),"function"==typeof e&&e()},i=function(e){throw ft.isHeadless||"function"!=typeof r.removeEventListener||(r.removeEventListener("load",n,!1),r.removeEventListener("error",i,!1)),new gt("unable to load "+t.src)};"number"==typeof r.width&&r.width>0&&"number"==typeof r.height&&r.height>0?n():ft.isHeadless||"function"!=typeof r.addEventListener||(r.addEventListener("load",n,!1),r.addEventListener("error",i,!1)),t._src=Et.getAbsoluteURL(t._src),!ft.isHeadless&&r&&r.getAttribute("two-src")||(ft.isHeadless||r.setAttribute("two-src",t.src),Et.ImageRegistry.add(t.src,r),ft.isHeadless?Et.loadHeadlessBuffer(t,n):t.image.src=t.src)},video:function(t,e){if(ft.isHeadless)throw new gt("video textures are not implemented in headless environments.");var r=function(i){t.image.removeEventListener("canplaythrough",r,!1),t.image.removeEventListener("error",n,!1),t.image.width=t.image.videoWidth,t.image.height=t.image.videoHeight,"function"==typeof e&&e()},n=function(e){throw t.image.removeEventListener("canplaythrough",r,!1),t.image.removeEventListener("error",n,!1),new gt("unable to load "+t.src)};t._src=Et.getAbsoluteURL(t._src),t.image.getAttribute("two-src")||(t.image.setAttribute("two-src",t.src),Et.ImageRegistry.add(t.src,t.image)),t.image.readyState>=4?r():(t.image.addEventListener("canplaythrough",r,!1),t.image.addEventListener("error",n,!1),t.image.src=t.src,t.image.load())}},load:function(t,e){var r=t.image,n=Et.getTag(r);t._flagImage&&(/canvas/i.test(n)?Et.Register.canvas(t,e):(t._src=!ft.isHeadless&&r.getAttribute("two-src")||r.src,Et.Register[n](t,e))),t._flagSrc&&(r||(r=Et.getImage(t.src),t.image=r),n=Et.getTag(r),Et.Register[n](t,e))},FlagOffset:function(){this._flagOffset=!0},FlagScale:function(){this._flagScale=!0},MakeObservable:function(t){g.each(Et.Properties,yt,t),Object.defineProperty(t,"image",{enumerable:!0,get:function(){return this._image},set:function(t){var e;switch(Et.getTag(t)){case"canvas":e="#"+t.id;break;default:e=t.src}Et.ImageRegistry.contains(e)?this._image=Et.ImageRegistry.get(t.src):this._image=t,this._flagImage=!0}}),Object.defineProperty(t,"offset",{enumerable:!0,get:function(){return this._offset},set:function(t){this._offset&&this._offset.unbind(m.Types.change,this._renderer.flagOffset),this._offset=t,this._offset.bind(m.Types.change,this._renderer.flagOffset),this._flagOffset=!0}}),Object.defineProperty(t,"scale",{enumerable:!0,get:function(){return this._scale},set:function(t){this._scale instanceof x&&this._scale.unbind(m.Types.change,this._renderer.flagScale),this._scale=t,this._scale instanceof x&&this._scale.bind(m.Types.change,this._renderer.flagScale),this._flagScale=!0}}),Object.defineProperty(t,"renderer",{enumerable:!1,get:function(){return this._renderer},set:function(t){this._renderer=t}})}}),g.extend(Et.prototype,m,Y.prototype,{constructor:Et,_flagId:!1,_flagSrc:!1,_flagImage:!1,_flagVideo:!1,_flagLoaded:!1,_flagRepeat:!1,_flagOffset:!1,_flagScale:!1,_id:"",_src:"",_image:null,_loaded:!1,_repeat:"no-repeat",_scale:1,_offset:null,clone:function(){var t=new Et(this.src);return t.repeat=this.repeat,t.offset.copy(this.origin),t.scale=this.scale,t},toObject:function(){return{src:this.src,repeat:this.repeat,origin:this.origin.toObject(),scale:"number"==typeof this.scale?this.scale:this.scale.toObject()}},_update:function(){return(this._flagSrc||this._flagImage)&&(this.trigger(m.Types.change),(this._flagSrc||this._flagImage)&&(this.loaded=!1,Et.load(this,function(){this.loaded=!0,this.trigger(m.Types.change).trigger(m.Types.load)}.bind(this)))),this._image&&this._image.readyState>=4&&(this._flagVideo=!0),this},flagReset:function(){return this._flagSrc=this._flagImage=this._flagLoaded=this._flagVideo=this._flagScale=this._flagOffset=!1,this}}),Et.MakeObservable(Et.prototype);var St=Math.min,Nt=Math.max,kt=Math.ceil,Ft=Math.floor;function Ot(t,e,r,n){Y.call(this),this._renderer.type="path",this._renderer.flagVertices=Ot.FlagVertices.bind(this),this._renderer.bindVertices=Ot.BindVertices.bind(this),this._renderer.unbindVertices=Ot.UnbindVertices.bind(this),this._renderer.flagFill=Ot.FlagFill.bind(this),this._renderer.flagStroke=Ot.FlagStroke.bind(this),this._renderer.vertices=[],this._renderer.collection=[],this._closed=!!e,this._curved=!!r,this.beginning=0,this.ending=1,this.fill="#fff",this.stroke="#000",this.linewidth=1,this.opacity=1,this.className="",this.visible=!0,this.cap="butt",this.join="miter",this.miter=4,this.vertices=t,this.automatic=!n,this.dashes=[],this.dashes.offset=0}function At(t,e){if(0===e||1===e)return!0;for(var r=t._length*e,n=0,i=0;i<t._lengths.length;i++){var s=t._lengths[i];if(n>=r)return r-n>=0;n+=s}return!1}function Tt(t,e){var r=t._length;if(e<=0)return 0;if(e>=r)return t._lengths.length-1;for(var n=0,i=0;n<t._lengths.length;n++){if(i+t._lengths[n]>=e)return e-=i,Math.max(n-1,0)+e/t._lengths[n];i+=t._lengths[n]}return-1}function Ct(t,e,r){var n,i,s,a,o,h,l,c,u=e.controls&&e.controls.right,f=t.controls&&t.controls.left;return n=e.x,o=e.y,i=(u||e).x,h=(u||e).y,s=(f||t).x,l=(f||t).y,a=t.x,c=t.y,u&&e._relative&&(i+=e.x,h+=e.y),f&&t._relative&&(s+=t.x,l+=t.y),C(n,o,i,h,s,l,a,c,r)}function Pt(t,e,r){var n,i,s,a,o,h,l,c,u=e.controls&&e.controls.right,f=t.controls&&t.controls.left;return n=e.x,o=e.y,i=(u||e).x,h=(u||e).y,s=(f||t).x,l=(f||t).y,a=t.x,c=t.y,u&&e._relative&&(i+=e.x,h+=e.y),f&&t._relative&&(s+=t.x,l+=t.y),T(n,o,i,h,s,l,a,c,r)}function It(t,e,r,n){Ot.call(this,[new E,new E,new E,new E],!0,!1,!0),this.width=r,this.height=n,this.origin=new x,this.translation.set(t,e),this._update()}function Rt(t,e,r,n,i,s){Ot.call(this,[new E,new E,new E,new E],!0),this.noStroke(),this.noFill(),t instanceof Et?this.texture=t:"string"==typeof t&&(this.texture=new Et(t)),this.origin=new x,this._update(),this.translation.set(e||0,r||0),"number"==typeof n&&(this.columns=n),"number"==typeof i&&(this.rows=i),"number"==typeof s&&(this.frameRate=s),this.index=0}g.extend(Ot,{Properties:["fill","stroke","linewidth","opacity","visible","cap","join","miter","closed","curved","automatic","beginning","ending"],Utils:{getCurveLength:Ct},FlagVertices:function(){this._flagVertices=!0,this._flagLength=!0,this.parent&&(this.parent._flagLength=!0)},BindVertices:function(t){for(var e=t.length;e--;)t[e].bind(m.Types.change,this._renderer.flagVertices);this._renderer.flagVertices()},UnbindVertices:function(t){for(var e=t.length;e--;)t[e].unbind(m.Types.change,this._renderer.flagVertices);this._renderer.flagVertices()},FlagFill:function(){this._flagFill=!0},FlagStroke:function(){this._flagStroke=!0},MakeObservable:function(t){Y.MakeObservable(t),g.each(Ot.Properties.slice(2,8),yt,t),Object.defineProperty(t,"fill",{enumerable:!0,get:function(){return this._fill},set:function(t){(this._fill instanceof xt||this._fill instanceof bt||this._fill instanceof wt||this._fill instanceof Et)&&this._fill.unbind(m.Types.change,this._renderer.flagFill),this._fill=t,this._flagFill=!0,(this._fill instanceof xt||this._fill instanceof bt||this._fill instanceof wt||this._fill instanceof Et)&&this._fill.bind(m.Types.change,this._renderer.flagFill)}}),Object.defineProperty(t,"stroke",{enumerable:!0,get:function(){return this._stroke},set:function(t){(this._stroke instanceof xt||this._stroke instanceof bt||this._stroke instanceof wt||this._stroke instanceof Et)&&this._stroke.unbind(m.Types.change,this._renderer.flagStroke),this._stroke=t,this._flagStroke=!0,(this._stroke instanceof xt||this._stroke instanceof bt||this._stroke instanceof wt||this._stroke instanceof Et)&&this._stroke.bind(m.Types.change,this._renderer.flagStroke)}}),Object.defineProperty(t,"length",{get:function(){return this._flagLength&&this._updateLength(),this._length}}),Object.defineProperty(t,"closed",{enumerable:!0,get:function(){return this._closed},set:function(t){this._closed=!!t,this._flagVertices=!0}}),Object.defineProperty(t,"curved",{enumerable:!0,get:function(){return this._curved},set:function(t){this._curved=!!t,this._flagVertices=!0}}),Object.defineProperty(t,"automatic",{enumerable:!0,get:function(){return this._automatic},set:function(t){if(t!==this._automatic){this._automatic=!!t;var e=this._automatic?"ignore":"listen";g.each(this.vertices,(function(t){t[e]()}))}}}),Object.defineProperty(t,"beginning",{enumerable:!0,get:function(){return this._beginning},set:function(t){this._beginning=t,this._flagVertices=!0}}),Object.defineProperty(t,"ending",{enumerable:!0,get:function(){return this._ending},set:function(t){this._ending=t,this._flagVertices=!0}}),Object.defineProperty(t,"vertices",{enumerable:!0,get:function(){return this._collection},set:function(t){var e=this._renderer.bindVertices,r=this._renderer.unbindVertices;this._collection&&this._collection.unbind(m.Types.insert,e).unbind(m.Types.remove,r),this._collection=t instanceof X?t:new X(t||[]),this._collection.bind(m.Types.insert,e).bind(m.Types.remove,r),e(this._collection)}}),Object.defineProperty(t,"mask",{enumerable:!0,get:function(){return this._mask},set:function(t){this._mask=t,this._flagMask=!0,t.clip||(t.clip=!0)}}),Object.defineProperty(t,"clip",{enumerable:!0,get:function(){return this._clip},set:function(t){this._clip=t,this._flagClip=!0}}),Object.defineProperty(t,"dashes",{enumerable:!0,get:function(){return this._dashes},set:function(t){"number"!=typeof t.offset&&(t.offset=this._dashes.offset||0),this._dashes=t}})}}),g.extend(Ot.prototype,Y.prototype,{constructor:Ot,_flagVertices:!0,_flagLength:!0,_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagVisible:!0,_flagCap:!0,_flagJoin:!0,_flagMiter:!0,_flagMask:!1,_flagClip:!1,_length:0,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_mask:null,_clip:!1,_dashes:[],clone:function(t){for(var e=new Ot,r=0;r<this.vertices.length;r++)e.vertices.push(this.vertices[r].clone());for(var n=0;n<Ot.Properties.length;n++){var i=Ot.Properties[n];e[i]=this[i]}return e.className=this.className,e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()},toObject:function(){var t={vertices:this.vertices.map((function(t){return t.toObject()}))};return g.each(Ot.Properties,(function(e){t[e]=this[e]}),this),t.className=this.className,t.translation=this.translation.toObject(),t.rotation=this.rotation,t.scale=this.scale instanceof x?this.scale.toObject():this.scale,t.skewX=this.skewX,t.skewY=this.skewY,this.matrix.manual&&(t.matrix=this.matrix.toObject()),t},noFill:function(){return this.fill="transparent",this},noStroke:function(){return this.stroke=void 0,this},corner:function(){for(var t=this.getBoundingClientRect(!0),e=t.width/2,r=t.height/2,n=t.left+t.width/2,i=t.top+t.height/2,s=0;s<this.vertices.length;s++){var a=this.vertices[s];a.x-=n,a.y-=i,a.x+=e,a.y+=r}return this},center:function(){for(var t=this.getBoundingClientRect(!0),e=t.left+t.width/2-this.translation.x,r=t.top+t.height/2-this.translation.y,n=0;n<this.vertices.length;n++){var i=this.vertices[n];i.x-=e,i.y-=r}return this},remove:function(){return this.parent?(this.parent.remove(this),this):this},getBoundingClientRect:function(t){var e,r,n,i,s,a,o,l,c,u,f,d,p,g,m=1/0,y=-1/0,_=1/0,v=-1/0;if(this._update(!0),e=t?this._matrix:h(this),r=(this.linewidth||0)/2,(n=this._renderer.vertices.length)<=0)return{width:0,height:0};for(i=0;i<n;i++)if(a=this._renderer.vertices[i],(s=this._renderer.vertices[(i+n-1)%n]).controls&&a.controls){o=s.controls.right.x,l=s.controls.right.y,s.relative&&(o+=s.x,l+=s.y),c=a.controls.left.x,u=a.controls.left.y,a.relative&&(c+=a.x,u+=a.y);var x=P(s.x,s.y,o,l,c,u,a.x,a.y);_=St(x.min.y-r,_),m=St(x.min.x-r,m),y=Nt(x.max.x+r,y),v=Nt(x.max.y+r,v)}else i<=1&&(_=St(s.y-r,_),m=St(s.x-r,m),y=Nt(s.x+r,y),v=Nt(s.y+r,v)),_=St(a.y-r,_),m=St(a.x-r,m),y=Nt(a.x+r,y),v=Nt(a.y+r,v);return f=e.multiply(m,_,1),d=e.multiply(m,v,1),p=e.multiply(y,_,1),g=e.multiply(y,v,1),{top:_=St(f.y,d.y,p.y,g.y),left:m=St(f.x,d.x,p.x,g.x),right:y=Nt(f.x,d.x,p.x,g.x),bottom:v=Nt(f.y,d.y,p.y,g.y),width:y-m,height:v-_}},getPointAt:function(t,r){for(var n,i,s,a,o,h,u,f,d,p,m,y,_,v,x,b=this.length*Math.min(Math.max(t,0),1),w=this.vertices.length,M=w-1,S=null,N=null,k=0,F=this._lengths.length,O=0;k<F;k++){if(O+this._lengths[k]>=b){this._closed?(n=c(k,w),i=c(k-1,w),0===k&&(n=i,i=k)):(n=k,i=Math.min(Math.max(k-1,0),M)),S=this.vertices[n],N=this.vertices[i],b-=O,t=0!==this._lengths[k]?b/this._lengths[k]:0;break}O+=this._lengths[k]}if(null===S||null===N)return null;if(!S)return N;if(!N)return S;x=N.controls&&N.controls.right,v=S.controls&&S.controls.left,o=N.x,p=N.y,h=(x||N).x,m=(x||N).y,u=(v||S).x,y=(v||S).y,f=S.x,_=S.y,x&&N.relative&&(h+=N.x,m+=N.y),v&&S.relative&&(u+=S.x,y+=S.y),a=A(t,o,h,u,f),d=A(t,p,m,y,_);var T=l(o,h,t),C=l(p,m,t),P=l(h,u,t),I=l(m,y,t),R=l(u,f,t),z=l(y,_,t),L=l(T,P,t),j=l(C,I,t),D=l(P,R,t),B=l(I,z,t);return g.isObject(r)?(r.x=a,r.y=d,g.isObject(r.controls)||E.AppendCurveProperties(r),r.controls.left.x=L,r.controls.left.y=j,r.controls.right.x=D,r.controls.right.y=B,("boolean"===(r.relative,!1)||r.relative)&&(r.controls.left.x-=a,r.controls.left.y-=d,r.controls.right.x-=a,r.controls.right.y-=d),r.t=t,r):((s=new E(a,d,L-a,j-d,D-a,B-d,this._curved?e.curve:e.line)).t=t,s)},plot:function(){if(this.curved)return R(this._collection,this.closed),this;for(var t=0;t<this._collection.length;t++)this._collection[t].command=0===t?e.move:e.line;return this},subdivide:function(t){this._update();var r=this.vertices.length-1,n=this.vertices[r],i=this._closed||this.vertices[r]._command===e.close,s=[];return g.each(this.vertices,(function(a,o){if(o<=0&&!i)n=a;else{if(a.command===e.move)return s.push(new E(n.x,n.y)),o>0&&(s[s.length-1].command=e.line),void(n=a);var h=Pt(a,n,t);s=s.concat(h),g.each(h,(function(t,r){r<=0&&n.command===e.move?t.command=e.move:t.command=e.line})),o>=r&&(this._closed&&this._automatic?(h=Pt(a,n=a,t),s=s.concat(h),g.each(h,(function(t,r){r<=0&&n.command===e.move?t.command=e.move:t.command=e.line}))):i&&s.push(new E(a.x,a.y)),s[s.length-1].command=i?e.close:e.line),n=a}}),this),this._automatic=!1,this._curved=!1,this.vertices=s,this},_updateLength:function(t,r){r||this._update();var n=this.vertices.length-1,i=this.vertices[n],s=0;return void 0===this._lengths&&(this._lengths=[]),g.each(this.vertices,(function(r,n){if(n<=0||r.command===e.move)return i=r,void(this._lengths[n]=0);this._lengths[n]=Ct(r,i,t),s+=this._lengths[n],i=r}),this),this._length=s,this._flagLength=!1,this},_update:function(){if(this._flagVertices){this._automatic&&this.plot(),this._flagLength&&this._updateLength(void 0,!0);var t,r,n,i,s,a=this._collection.length,o=this._closed,h=Math.min(this._beginning,this._ending),l=Math.max(this._beginning,this._ending),c=Tt(this,h*this._length),u=Tt(this,l*this._length),f=kt(c),d=Ft(u);this._renderer.vertices.length=0;for(var p=0;p<a;p++)this._renderer.collection.length<=p&&this._renderer.collection.push(new E),p>d&&!r?((s=this._renderer.collection[p]).copy(this._collection[p]),this.getPointAt(l,s),s.command=this._renderer.collection[p].command,this._renderer.vertices.push(s),r=s,(n=this._collection[p-1])&&n.controls&&(s.controls.right.clear(),this._renderer.collection[p-1].controls.right.clear().lerp(n.controls.right,s.t))):p>=f&&p<=d&&(s=this._renderer.collection[p].copy(this._collection[p]),this._renderer.vertices.push(s),p===d&&At(this,l)?(r=s,!o&&r.controls&&r.controls.right.clear()):p===f&&At(this,h)&&((t=s).command=e.move,!o&&t.controls&&t.controls.left.clear()));f>0&&!t&&(p=f-1,(s=this._renderer.collection[p]).copy(this._collection[p]),this.getPointAt(h,s),s.command=e.move,this._renderer.vertices.unshift(s),t=s,(i=this._collection[p+1])&&i.controls&&(s.controls.left.clear(),this._renderer.collection[p+1].controls.left.copy(i.controls.left).lerp(x.zero,s.t)))}return Y.prototype._update.apply(this,arguments),this},flagReset:function(){return this._flagVertices=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagCap=this._flagJoin=this._flagMiter=this._flagClip=!1,Y.prototype.flagReset.call(this),this}}),Ot.MakeObservable(Ot.prototype),g.extend(It,{Properties:["width","height"],MakeObservable:function(t){Ot.MakeObservable(t),g.each(It.Properties,yt,t),Object.defineProperty(t,"origin",{enumerable:!0,get:function(){return this._origin},set:function(t){this._origin&&this._origin.unbind(m.Types.change,this._renderer.flagVertices),this._origin=t,this._origin.bind(m.Types.change,this._renderer.flagVertices),this._renderer.flagVertices()}})}}),g.extend(It.prototype,Ot.prototype,{constructor:It,_flagWidth:0,_flagHeight:0,_width:0,_height:0,_origin:null,_update:function(){if(this._flagVertices||this._flagWidth||this._flagHeight){var t=this._width/2,r=this._height/2;this._closed||4!==this.vertices.length||this.vertices.push(new E),this.vertices[0].set(-t,-r).add(this._origin).command=e.move,this.vertices[1].set(t,-r).add(this._origin).command=e.line,this.vertices[2].set(t,r).add(this._origin).command=e.line,this.vertices[3].set(-t,r).add(this._origin).command=e.line,this.vertices[4]&&(this.vertices[4].set(-t,-r).add(this._origin).command=e.line)}return Ot.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=!1,Ot.prototype.flagReset.call(this),this},clone:function(t){var e=new It(0,0,this.width,this.height);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&e.matrix.copy(this.matrix),g.each(Ot.Properties,(function(t){e[t]=this[t]}),this),t&&t.add(e),e},toObject:function(){var t=Ot.prototype.toObject.call(this);return t.width=this.width,t.height=this.height,t.origin=this.origin.toObject(),t}}),It.MakeObservable(It.prototype),g.extend(Rt,{Properties:["texture","columns","rows","frameRate","index"],MakeObservable:function(t){It.MakeObservable(t),g.each(Rt.Properties,yt,t)}}),g.extend(Rt.prototype,It.prototype,{constructor:Rt,_flagTexture:!1,_flagColumns:!1,_flagRows:!1,_flagFrameRate:!1,flagIndex:!1,_amount:1,_duration:0,_startTime:0,_playing:!1,_firstFrame:0,_lastFrame:0,_loop:!0,_texture:null,_columns:1,_rows:1,_frameRate:0,_index:0,_origin:null,play:function(t,e,r){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=g.performance.now(),"number"==typeof t&&(this._firstFrame=t),"number"==typeof e&&(this._lastFrame=e),"function"==typeof r?this._onLastFrame=r:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this},pause:function(){return this._playing=!1,this},stop:function(){return this._playing=!1,this._index=0,this},clone:function(t){var e=new Rt(this.texture,this.translation.x,this.translation.y,this.columns,this.rows,this.frameRate);return this.playing&&(e.play(this._firstFrame,this._lastFrame),e._loop=this._loop),t&&t.add(e),e},toObject:function(){var t=It.prototype.toObject.call(this);return t.texture=this.texture.toObject(),t.columns=this.columns,t.rows=this.rows,t.frameRate=this.frameRate,t.index=this.index,t._firstFrame=this._firstFrame,t._lastFrame=this._lastFrame,t._loop=this._loop,t},_update:function(){var t,e,r,n,i,s,a,o,h,c=this._texture,u=this._columns,f=this._rows;if((this._flagColumns||this._flagRows)&&(this._amount=this._columns*this._rows),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._flagTexture&&(this.fill=this._texture),this._texture.loaded){t=(a=c.image.width)/u,e=(o=c.image.height)/f,n=this._amount,this.width!==t&&(this.width=t),this.height!==e&&(this.height=e),this._playing&&this._frameRate>0&&(g.isNaN(this._lastFrame)&&(this._lastFrame=n-1),r=g.performance.now()-this._startTime,i=1e3*((h=this._lastFrame+1)-this._firstFrame)/this._frameRate,this._loop?r%=i:r=Math.min(r,i),s=l(this._firstFrame,h,r/i),(s=Math.floor(s))!==this._index&&(this._index=s,s>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()));var d=-t*(this._index%u)+(a-t)/2,p=-e*Math.floor(this._index/u)+(o-e)/2;d!==c.offset.x&&(c.offset.x=d),p!==c.offset.y&&(c.offset.y=p)}return It.prototype._update.call(this),this},flagReset:function(){return this._flagTexture=this._flagColumns=this._flagRows=this._flagFrameRate=!1,It.prototype.flagReset.call(this),this}}),Rt.MakeObservable(Rt.prototype);var zt=2*Math.PI,Lt=Math.PI/2,jt=Math.cos,Dt=Math.sin;function Bt(t,e,r,n){for(var i=n?Math.max(n,2):4,s=[],a=0;a<i;a++)s.push(new E(0,0,0,0,0,0));Ot.call(this,s,!0,!0,!0),"number"==typeof r&&(this.radius=r),this._update(),"number"==typeof t&&(this.translation.x=t),"number"==typeof e&&(this.translation.y=e)}g.extend(Bt,{Properties:["radius"],MakeObservable:function(t){Ot.MakeObservable(t),g.each(Bt.Properties,yt,t)}}),g.extend(Bt.prototype,Ot.prototype,{constructor:Bt,_flagRadius:!1,_radius:0,_update:function(){if(this._flagVertices||this._flagRadius){var t=this.vertices.length;!this._closed&&t>2&&(t-=1);for(var r=4/3*Math.tan(Math.PI/(2*t)),n=this._radius,i=n*r,s=0;s<this.vertices.length;s++){var a=s/t*zt,o=n*jt(a),h=n*Dt(a),l=i*jt(a-Lt),c=i*Dt(a-Lt),u=i*jt(a+Lt),f=i*Dt(a+Lt),d=this.vertices[s];d.command=0===s?e.move:e.curve,d.set(o,h),d.controls.left.set(l,c),d.controls.right.set(u,f)}}return Ot.prototype._update.call(this),this},flagReset:function(){return this._flagRadius=!1,Ot.prototype.flagReset.call(this),this},clone:function(t){var e=new Bt(0,0,this.radius,this.vertices.length);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&e.matrix.copy(this.matrix),g.each(Ot.Properties,(function(t){e[t]=this[t]}),this),t&&t.add(e),e},toObject:function(){var t=Ot.prototype.toObject.call(this);return g.each(Bt.Properties,(function(e){t[e]=this[e]}),this),t}}),Bt.MakeObservable(Bt.prototype);var Gt=2*Math.PI,Vt=Math.PI/2,qt=Math.cos,Ut=Math.sin;function Ht(t,e,r,n,i){"number"!=typeof n&&"number"==typeof r&&(n=r);for(var s=i?Math.max(i,2):4,a=[],o=0;o<s;o++)a.push(new E);Ot.call(this,a,!0,!0,!0),"number"==typeof r&&(this.width=2*r),"number"==typeof n&&(this.height=2*n),this._update(),this.translation.set(t,e)}function Yt(t,r,n,i){Ot.call(this,[new E(t,r),new E(n,i)]),this.vertices[0].command=e.move,this.vertices[1].command=e.line,this.automatic=!1}function Xt(t,r,n,i,s){void 0===s&&"number"==typeof n&&"number"==typeof i&&(s=Math.floor(Math.min(n,i)/12));for(var a=[],o=0;o<10;o++)a.push(new E(0,0,0,0,0,0,0===o?e.move:e.curve));Ot.call(this,a),this.closed=!0,this.automatic=!1,this._renderer.flagRadius=Xt.FlagRadius.bind(this),"number"==typeof n&&(this.width=n),"number"==typeof i&&(this.height=i),"number"==typeof s&&(this.radius=s),this._update(),this.translation.set(t,r)}g.extend(Ht,{Properties:["width","height"],MakeObservable:function(t){Ot.MakeObservable(t),g.each(Ht.Properties,yt,t)}}),g.extend(Ht.prototype,Ot.prototype,{_flagWidth:!1,_flagHeight:!1,_width:0,_height:0,constructor:Ht,_update:function(){if(this._flagVertices||this._flagWidth||this._flagHeight){var t=this.vertices.length;!this._closed&&t>2&&(t-=1);for(var r=4/3*Math.tan(Math.PI/(2*this.vertices.length)),n=this._width/2,i=this._height/2,s=0;s<this.vertices.length;s++){var a=s/t*Gt,o=n*qt(a),h=i*Ut(a),l=n*r*qt(a-Vt),c=i*r*Ut(a-Vt),u=n*r*qt(a+Vt),f=i*r*Ut(a+Vt),d=this.vertices[s];d.command=0===s?e.move:e.curve,d.set(o,h),d.controls.left.set(l,c),d.controls.right.set(u,f)}}return Ot.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=!1,Ot.prototype.flagReset.call(this),this},clone:function(t){var e=new Ht(0,0,this.width/2,this.height/2,this.vertices.length);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&e.matrix.copy(this.matrix),g.each(Ot.Properties,(function(t){e[t]=this[t]}),this),t&&t.add(e),e},toObject:function(){var t=Ot.prototype.toObject.call(this);return g.each(Ht.Properties,(function(e){t[e]=this[e]}),this),t}}),Ht.MakeObservable(Ht.prototype),g.extend(Yt.prototype,Ot.prototype,{constructor:Yt}),Ot.MakeObservable(Yt.prototype),g.extend(Xt,{Properties:["width","height"],FlagRadius:function(){this._flagRadius=!0},MakeObservable:function(t){Ot.MakeObservable(t),g.each(Xt.Properties,yt,t),Object.defineProperty(t,"radius",{enumerable:!0,get:function(){return this._radius},set:function(t){this._radius instanceof x&&this._radius.unbind(m.Types.change,this._renderer.flagRadius),this._radius=t,this._radius instanceof x&&this._radius.bind(m.Types.change,this._renderer.flagRadius),this._flagRadius=!0}})}}),g.extend(Xt.prototype,Ot.prototype,{constructor:Xt,_flagWidth:!1,_flagHeight:!1,_flagRadius:!1,_width:0,_height:0,_radius:12,_update:function(){if(this._flagVertices||this._flagWidth||this._flagHeight||this._flagRadius){var t,e,r,n=this._width,i=this._height;this._radius instanceof x?(t=this._radius.x,e=this._radius.y):(t=this._radius,e=this._radius);var s=n/2,a=i/2;(r=this.vertices[0]).x=-(s-t),r.y=-a,(r=this.vertices[1]).x=s-t,r.y=-a,r.controls.left.clear(),r.controls.right.x=t,r.controls.right.y=0,(r=this.vertices[2]).x=s,r.y=-(a-e),r.controls.right.clear(),r.controls.left.clear(),(r=this.vertices[3]).x=s,r.y=a-e,r.controls.left.clear(),r.controls.right.x=0,r.controls.right.y=e,(r=this.vertices[4]).x=s-t,r.y=a,r.controls.right.clear(),r.controls.left.clear(),(r=this.vertices[5]).x=-(s-t),r.y=a,r.controls.left.clear(),r.controls.right.x=-t,r.controls.right.y=0,(r=this.vertices[6]).x=-s,r.y=a-e,r.controls.left.clear(),r.controls.right.clear(),(r=this.vertices[7]).x=-s,r.y=-(a-e),r.controls.left.clear(),r.controls.right.x=0,r.controls.right.y=-e,(r=this.vertices[8]).x=-(s-t),r.y=-a,r.controls.left.clear(),r.controls.right.clear(),(r=this.vertices[9]).copy(this.vertices[8])}return Ot.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=this._flagRadius=!1,Ot.prototype.flagReset.call(this),this},clone:function(t){var e=new Xt(0,0,this.width,this.height,this.radius);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&e.matrix.copy(this.matrix),g.each(Ot.Properties,(function(t){e[t]=this[t]}),this),t&&t.add(e),e},toObject:function(){var t=Ot.prototype.toObject.call(this);return g.each(Xt.Properties,(function(e){t[e]=this[e]}),this),t.radius="number"==typeof this.radius?this.radius:this.radius.toObject(),t}}),Xt.MakeObservable(Xt.prototype);var Wt=Math.min,Zt=Math.max;function Jt(t,e,r,n){if(Y.call(this),this._renderer.type="text",this._renderer.flagFill=Jt.FlagFill.bind(this),this._renderer.flagStroke=Jt.FlagStroke.bind(this),this.value=t,"number"==typeof e&&(this.translation.x=e),"number"==typeof r&&(this.translation.y=r),this.dashes=[],this.dashes.offset=0,!g.isObject(n))return this;g.each(Jt.Properties,(function(t){t in n&&(this[t]=n[t])}),this)}g.extend(Jt,{Ratio:.6,Properties:["value","family","size","leading","alignment","linewidth","style","weight","decoration","baseline","opacity","visible","className","fill","stroke"],FlagFill:function(){this._flagFill=!0},FlagStroke:function(){this._flagStroke=!0},MakeObservable:function(t){Y.MakeObservable(t),g.each(Jt.Properties.slice(0,12),yt,t),Object.defineProperty(t,"fill",{enumerable:!0,get:function(){return this._fill},set:function(t){(this._fill instanceof xt||this._fill instanceof bt||this._fill instanceof wt||this._fill instanceof Et)&&this._fill.unbind(m.Types.change,this._renderer.flagFill),this._fill=t,this._flagFill=!0,(this._fill instanceof xt||this._fill instanceof bt||this._fill instanceof wt||this._fill instanceof Et)&&this._fill.bind(m.Types.change,this._renderer.flagFill)}}),Object.defineProperty(t,"stroke",{enumerable:!0,get:function(){return this._stroke},set:function(t){(this._stroke instanceof xt||this._stroke instanceof bt||this._stroke instanceof wt||this._stroke instanceof Et)&&this._stroke.unbind(m.Types.change,this._renderer.flagStroke),this._stroke=t,this._flagStroke=!0,(this._stroke instanceof xt||this._stroke instanceof bt||this._stroke instanceof wt||this._stroke instanceof Et)&&this._stroke.bind(m.Types.change,this._renderer.flagStroke)}}),Object.defineProperty(t,"mask",{enumerable:!0,get:function(){return this._mask},set:function(t){this._mask=t,this._flagMask=!0,t.clip||(t.clip=!0)}}),Object.defineProperty(t,"clip",{enumerable:!0,get:function(){return this._clip},set:function(t){this._clip=t,this._flagClip=!0}}),Object.defineProperty(t,"dashes",{enumerable:!0,get:function(){return this._dashes},set:function(t){"number"!=typeof t.offset&&(t.offset=this._dashes.offset||0),this._dashes=t}})}}),g.extend(Jt.prototype,Y.prototype,{constructor:Jt,_flagValue:!0,_flagFamily:!0,_flagSize:!0,_flagLeading:!0,_flagAlignment:!0,_flagBaseline:!0,_flagStyle:!0,_flagWeight:!0,_flagDecoration:!0,_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagClassName:!0,_flagVisible:!0,_flagMask:!1,_flagClip:!1,_value:"",_family:"sans-serif",_size:13,_leading:17,_alignment:"center",_baseline:"middle",_style:"normal",_weight:500,_decoration:"none",_fill:"#000",_stroke:"transparent",_linewidth:1,_opacity:1,_className:"",_visible:!0,_mask:null,_clip:!1,_dashes:[],remove:function(){return this.parent?(this.parent.remove(this),this):this},clone:function(t){var e=new Jt(this.value);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,g.each(Jt.Properties,(function(t){e[t]=this[t]}),this),this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()},toObject:function(){var t={translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale};return this.matrix.manual&&(t.matrix=this.matrix.toObject()),g.each(Jt.Properties,(function(e){t[e]=this[e]}),this),t},noFill:function(){return this.fill="transparent",this},noStroke:function(){return this.stroke=void 0,this.linewidth=void 0,this},getBoundingClientRect:function(t){var e,r,n,i,s,a,o,l,c;this._update(!0),e=t?this._matrix:h(this);var u=this.leading,f=this.value.length*this.size*Jt.Ratio,d=(this._linewidth||0)/2;switch(this.alignment){case"left":a=-d,o=f+d;break;case"right":a=-(f+d),o=d;break;default:a=-(f/2+d),o=f/2+d}switch(this.baseline){case"top":l=-d,c=u+d;break;case"bottom":l=-(u+d),c=d;break;default:l=-(u/2+d),c=u/2+d}return r=e.multiply(a,l,1),n=e.multiply(a,c,1),i=e.multiply(o,l,1),s=e.multiply(o,c,1),{top:l=Wt(r.y,n.y,i.y,s.y),left:a=Wt(r.x,n.x,i.x,s.x),right:o=Zt(r.x,n.x,i.x,s.x),bottom:c=Zt(r.y,n.y,i.y,s.y),width:o-a,height:c-l}},flagReset:function(){return this._flagValue=this._flagFamily=this._flagSize=this._flagLeading=this._flagAlignment=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagClip=this._flagDecoration=this._flagClassName=this._flagBaseline=this._flagWeight=this._flagStyle=!1,Y.prototype.flagReset.call(this),this}}),Jt.MakeObservable(Jt.prototype);var $t=/[+-]?(?:\d*\.\d+|\d+)(?:[eE][+-]\d+)?/g,Kt={start:"left",middle:"center",end:"right"},Qt=function(t){return t.replace(/svg:/gi,"").toLowerCase()},te=function(t,e){if(e.x+=t.translateX,e.y+=t.translateY,e.x*=t.scaleX,e.y*=t.scaleY,0!==t.rotation){var r=e.length();e.x=r*Math.cos(t.rotation),e.y=r*Math.sin(t.rotation)}},ee=function(t,e){var r,n,i,s;e||(e={}),r=t.split(";");for(var a=0;a<r.length;a++)i=(n=r[a].split(":"))[0],s=n[1],void 0!==i&&void 0!==s&&(e[i]=s.replace(/\s/,""));return e},re=function(t){for(var e={},r=ne(t),n=Math.max(r.length,t.style.length),i=0;i<n;i++){var s=t.style[i],a=r[i];s&&(e[s]=t.style[s]),a&&(e[a]=t.getAttribute(a))}return e},ne=function(t){for(var e=t.getAttributeNames(),r=["id","class","transform","xmlns","viewBox"],n=0;n<r.length;n++){var i=r[n],s=Array.prototype.indexOf.call(e,i);s>=0&&e.splice(s,1)}return e},ie=function(t,e){var r=e.split(/\s/),n=parseFloat(r[0]),i=parseFloat(r[1]),s=parseFloat(r[2]),a=parseFloat(r[3]),o=Math.min(this.width/s,this.height/a);return t.translation.x-=n*o,t.translation.y-=i*o,t.scale=o,t},se=function(t,e,r){var n,i,o,h,l,c,u,f,d,p,m,y={},_={},v={};if(s.getComputedStyle){var b=s.getComputedStyle(t);for(n=b.length;n--;)void 0!==(h=b[o=b[n]])&&(y[o]=h)}for(n=0;n<t.attributes.length;n++)l=t.attributes[n],/style/i.test(l.nodeName)?ee(l.value,v):_[l.nodeName]=l.value;for(o in void 0!==y.opacity&&(y["stroke-opacity"]=y.opacity,y["fill-opacity"]=y.opacity,delete y.opacity),r&&g.defaults(y,r),g.extend(y,v,_),y.visible=!(void 0===y.display&&/none/i.test(y.display))||void 0===y.visibility&&/hidden/i.test(y.visibility),y)switch(h=y[o],o){case"gradientTransform":if(/none/i.test(h))break;if(null===(i=t.gradientTransform&&t.gradientTransform.baseVal&&t.gradientTransform.baseVal.length>0?t.gradientTransform.baseVal[0].matrix:t.getCTM?t.getCTM():null))break;switch(c=a(i),e._renderer.type){case"linear-gradient":te(c,e.left),te(c,e.right);break;case"radial-gradient":e.center.x+=c.translateX,e.center.y+=c.translateY,e.focal.x+=c.translateX,e.focal.y+=c.translateY,e.radius*=Math.max(c.scaleX,c.scaleY)}break;case"transform":if(/none/i.test(h))break;if(null===(i=t.transform&&t.transform.baseVal&&t.transform.baseVal.length>0?t.transform.baseVal[0].matrix:t.getCTM?t.getCTM():null))break;k.AutoCalculateImportedMatrices?(c=a(i),e.translation.set(c.translateX,c.translateY),e.rotation=Math.PI*(c.rotation/180),e.scale=new x(c.scaleX,c.scaleY),u=parseFloat((y.x+"").replace("px")),f=parseFloat((y.y+"").replace("px")),u&&(e.translation.x=u),f&&(e.translation.y=f)):(i=t.getCTM(),e._matrix.manual=!0,e._matrix.set(i.a,i.b,i.c,i.d,i.e,i.f));break;case"viewBox":ie.call(this,e,h);break;case"visible":if(e instanceof $){e._visible=h;break}e.visible=h;break;case"stroke-linecap":if(e instanceof $){e._cap=h;break}e.cap=h;break;case"stroke-linejoin":if(e instanceof $){e._join=h;break}e.join=h;break;case"stroke-miterlimit":if(e instanceof $){e._miter=h;break}e.miter=h;break;case"stroke-width":if(e instanceof $){e._linewidth=parseFloat(h);break}e.linewidth=parseFloat(h);break;case"opacity":case"stroke-opacity":case"fill-opacity":if(e instanceof $){e._opacity=parseFloat(h);break}e.opacity=parseFloat(h);break;case"clip-path":if(/url\(#.*\)/i.test(h)&&(d=h.replace(/url\(#(.*)\)/i,"$1"),he.defs.current&&he.defs.current.contains(d)&&(p=he.defs.current.get(d))&&p.childNodes.length>0))switch(p=p.childNodes[0],m=Qt(p.nodeName),e.mask=he[m].call(this,p,{}),e._renderer.type){case"text":case"path":e.position.add(e.mask.position),e.mask.position.clear()}break;case"fill":case"stroke":e instanceof $&&(o="_"+o),/url\(#.*\)/i.test(h)?(d=h.replace(/url\(#(.*)\)/i,"$1"),he.defs.current&&he.defs.current.contains(d)?(p=he.defs.current.get(d),m=Qt(p.nodeName),p=he[m].call(this,p,{})):p=oe(this).getById(d),e[o]=p):e[o]=/none/i.test(h)?"transparent":h;break;case"id":e.id=h,t.id=h+"-"+k.Identifier+"applied";break;case"class":case"className":e.classList=h.split(" ");break;case"x":case"y":if(e instanceof xt||e instanceof bt||e instanceof wt)break;if(h.match("[a-z%]$")&&!h.endsWith("px")){var w=new gt("only pixel values are supported with the "+o+" attribute.");console.warn(w.name,w.message)}e.translation[o]=parseFloat(h);break;case"font-family":e instanceof Jt&&(e.family=h);break;case"font-size":e instanceof Jt&&(e.size=h);break;case"font-weight":e instanceof Jt&&(e.weight=h);break;case"font-style":e instanceof Jt&&(e.style=h);break;case"text-decoration":e instanceof Jt&&(e.decoration=h);break;case"line-height":e instanceof Jt&&(e.leading=h)}return y},ae=function(t,e){for(var r=0,n=t.childNodes.length;r<n;r++){var i=t.childNodes[r];i.id&&"#text"!==Qt(t.nodeName)&&e.add(i.id,i)}},oe=function(t){for(;t.parent;)t=t.parent;return t.scene},he={svg:function(t){for(var e=he.defs.current=new _t,r=t.getElementsByTagName("defs"),n=0;n<r.length;n++)ae(r[n],e);var i=he.g.call(this,t);return i.defs=e,delete he.defs.current,i},defs:function(t){return null},use:function(t,e){var r,n=t.getAttribute("href")||t.getAttribute("xlink:href");if(!n)return r=new gt("encountered <use /> with no href."),console.warn(r.name,r.message),null;var i=n.slice(1);if(!he.defs.current.contains(i))return r=new gt("unable to find element for reference "+n+"."),console.warn(r.name,r.message),null;for(var s=he.defs.current.get(i).cloneNode(!0),a=["x","y","width","height","href","xlink:href"],o=0;o<t.attributes.length;o++){var h=t.attributes[o],l=a.includes(h.nodeName),c=!s.hasAttribute(h.nodeName);(l||c)&&s.setAttribute(h.nodeName,h.value)}var u=Qt(s.nodeName);return he[u].call(this,s,e)},g:function(t,e){var r,n=new $;se.call(this,t,n,e),this.add(n),r=re.call(this,t);for(var i=0,s=t.childNodes.length;i<s;i++){var a=t.childNodes[i],o=a.nodeName;if(!o)return;var h=Qt(o);if(h in he){var l=he[h].call(n,a,r);l&&!l.parent&&n.add(l)}}return n},polygon:function(t,e){var r=t.getAttribute("points"),n=[];r.replace(/(-?[\d.eE-]+)[,|\s](-?[\d.eE-]+)/g,(function(t,e,r){n.push(new E(parseFloat(e),parseFloat(r)))}));var i=new Ot(n,!0).noStroke();return i.fill="black",se.call(this,t,i,e),i},polyline:function(t,e){var r=he.polygon.call(this,t,e);return r.closed=!1,r},path:function(t,r){var n=t.getAttribute("d"),i=[],s=!1,a=!1;if(n){var o,h,l=new E,c=n.match(/[a-df-z][^a-df-z]*/gi),u=c.length-1;g.each(c.slice(0),(function(t,e){var r,n,i,s,a,o=t.slice(1).trim().match($t),h=t[0],l=h.toLowerCase(),u=[];switch(0===e&&(c=[]),l){case"h":case"v":o.length>1&&(r=1);break;case"m":case"l":case"t":o.length>2&&(r=2);break;case"s":case"q":o.length>4&&(r=4);break;case"c":o.length>6&&(r=6);break;case"a":o.length>7&&(r=7)}if(r){for(n=0,i=o.length,a=0;n<i;n+=r){if(s=h,a>0)switch(h){case"m":s="l";break;case"M":s="L"}u.push(s+o.slice(n,n+r).join(" ")),a++}c=Array.prototype.concat.apply(c,u)}else c.push(t)})),g.each(c,(function(t,r){var n,c,f,d,p,m,y,_,v,b,w=t[0],M=w.toLowerCase();switch(h=t.slice(1).trim().match($t),a=w===M,M){case"z":if(r>=u)s=!0;else{n=new E(l.x,l.y,void 0,void 0,void 0,void 0,e.close);for(var S=i.length-1;S>=0;S--){var N=i[S];if(/m/i.test(N.command)){l=N;break}}}break;case"m":case"l":o=void 0,n=new E(parseFloat(h[0]),parseFloat(h[1]),void 0,void 0,void 0,void 0,/m/i.test(M)?e.move:e.line),a&&n.addSelf(l),l=n;break;case"h":case"v":var k=/h/i.test(M)?"x":"y",F=/x/i.test(k)?"y":"x";(n=new E(void 0,void 0,void 0,void 0,void 0,void 0,e.line))[k]=parseFloat(h[0]),n[F]=l[F],a&&(n[k]+=l[k]),l=n;break;case"c":case"s":c=l.x,f=l.y,o||(o=new x),/c/i.test(M)?(d=parseFloat(h[0]),p=parseFloat(h[1]),m=parseFloat(h[2]),y=parseFloat(h[3]),_=parseFloat(h[4]),v=parseFloat(h[5])):(d=(b=L(l,o,a)).x,p=b.y,m=parseFloat(h[0]),y=parseFloat(h[1]),_=parseFloat(h[2]),v=parseFloat(h[3])),a&&(d+=c,p+=f,m+=c,y+=f,_+=c,v+=f),g.isObject(l.controls)||E.AppendCurveProperties(l),l.controls.right.set(d-l.x,p-l.y),n=new E(_,v,m-_,y-v,void 0,void 0,e.curve),l=n,o=n.controls.left;break;case"t":case"q":c=l.x,f=l.y,o||(o=new x),/q/i.test(M)?(d=parseFloat(h[0]),p=parseFloat(h[1]),m=parseFloat(h[0]),y=parseFloat(h[1]),_=parseFloat(h[2]),v=parseFloat(h[3])):(d=(b=L(l,o,a)).x,p=b.y,m=b.x,y=b.y,_=parseFloat(h[0]),v=parseFloat(h[1])),a&&(d+=c,p+=f,m+=c,y+=f,_+=c,v+=f),g.isObject(l.controls)||E.AppendCurveProperties(l),l.controls.right.set(.33*(d-l.x),.33*(p-l.y)),n=new E(_,v,m-_,y-v,void 0,void 0,e.curve),l=n,o=n.controls.left;break;case"a":c=l.x,f=l.y;var O=parseFloat(h[0]),A=parseFloat(h[1]),T=parseFloat(h[2]),C=parseFloat(h[3]),P=parseFloat(h[4]);_=parseFloat(h[5]),v=parseFloat(h[6]),a&&(_+=c,v+=f);var I=new E(_,v);I.command=e.arc,I.rx=O,I.ry=A,I.xAxisRotation=T,I.largeArcFlag=C,I.sweepFlag=P,n=I,l=I,o=void 0}n&&(Array.isArray(n)?i=i.concat(n):i.push(n))}))}(n=new Ot(i,s,void 0,!0).noStroke()).fill="black";var f=n.getBoundingClientRect(!0);return f.centroid={x:f.left+f.width/2,y:f.top+f.height/2},g.each(n.vertices,(function(t){t.subSelf(f.centroid)})),se.call(this,t,n,r),n.translation.addSelf(f.centroid),n},circle:function(t,e){var r=parseFloat(t.getAttribute("cx")),n=parseFloat(t.getAttribute("cy")),i=new Bt(0,0,parseFloat(t.getAttribute("r"))).noStroke();return i.fill="black",se.call(this,t,i,e),i.translation.x=r,i.translation.y=n,i},ellipse:function(t,e){var r=parseFloat(t.getAttribute("cx")),n=parseFloat(t.getAttribute("cy")),i=new Ht(0,0,parseFloat(t.getAttribute("rx")),parseFloat(t.getAttribute("ry"))).noStroke();return i.fill="black",se.call(this,t,i,e),i.translation.x=r,i.translation.y=n,i},rect:function(t,e){var r=parseFloat(t.getAttribute("rx")),n=parseFloat(t.getAttribute("ry"));if(!g.isNaN(r)||!g.isNaN(n))return he["rounded-rect"](t);var i=parseFloat(t.getAttribute("width")),s=parseFloat(t.getAttribute("height")),a=i/2,o=s/2,h=new It(0,0,i,s).noStroke();return h.fill="black",se.call(this,t,h,e),h.translation.x+=a,h.translation.y+=o,h},"rounded-rect":function(t,e){var r=parseFloat(t.getAttribute("rx"))||0,n=parseFloat(t.getAttribute("ry"))||0,i=parseFloat(t.getAttribute("width")),s=parseFloat(t.getAttribute("height")),a=i/2,o=s/2,h=new Xt(0,0,i,s,new x(r,n)).noStroke();return h.fill="black",se.call(this,t,h,e),h.translation.x+=a,h.translation.y+=o,h},line:function(t,e){var r=new Yt(parseFloat(t.getAttribute("x1")),parseFloat(t.getAttribute("y1")),parseFloat(t.getAttribute("x2")),parseFloat(t.getAttribute("y2"))).noFill();return se.call(this,t,r,e),r},lineargradient:function(t,e){for(var r=parseFloat(t.getAttribute("x1")),n=parseFloat(t.getAttribute("y1")),i=parseFloat(t.getAttribute("x2")),s=parseFloat(t.getAttribute("y2")),a=(i+r)/2,o=(s+n)/2,h=[],l=0;l<t.children.length;l++){var c=t.children[l],u=c.getAttribute("offset");/%/gi.test(u)&&(u=parseFloat(u.replace(/%/gi,""))/100),u=parseFloat(u);var f,d=c.getAttribute("stop-color"),p=c.getAttribute("stop-opacity"),g=c.getAttribute("style");null===d&&(d=(f=!!g&&g.match(/stop-color:\s?([#a-fA-F0-9]*)/))&&f.length>1?f[1]:void 0),p=null===p?(f=!!g&&g.match(/stop-opacity:\s?([0-9.-]*)/))&&f.length>1?parseFloat(f[1]):1:parseFloat(p),h.push(new vt(u,d,p))}var m=new bt(r-a,n-o,i-a,s-o,h);return se.call(this,t,m,e),m},radialgradient:function(t,e){var r=parseFloat(t.getAttribute("cx"))||0,n=parseFloat(t.getAttribute("cy"))||0,i=parseFloat(t.getAttribute("r")),s=parseFloat(t.getAttribute("fx")),a=parseFloat(t.getAttribute("fy"));g.isNaN(s)&&(s=r),g.isNaN(a)&&(a=n);for(var o=Math.abs(r+s)/2,h=Math.abs(n+a)/2,l=[],c=0;c<t.children.length;c++){var u=t.children[c],f=u.getAttribute("offset");/%/gi.test(f)&&(f=parseFloat(f.replace(/%/gi,""))/100),f=parseFloat(f);var d,p=u.getAttribute("stop-color"),m=u.getAttribute("stop-opacity"),y=u.getAttribute("style");null===p&&(p=(d=!!y&&y.match(/stop-color:\s?([#a-fA-F0-9]*)/))&&d.length>1?d[1]:void 0),m=null===m?(d=!!y&&y.match(/stop-opacity:\s?([0-9.-]*)/))&&d.length>1?parseFloat(d[1]):1:parseFloat(m),l.push(new vt(f,p,m))}var _=new wt(r-o,n-h,i,l,s-o,a-h);return se.call(this,t,_,e),_},text:function(t,e){var r,n=(r=t.getAttribute("text-anchor"),Kt[r]||"left"),i=function(t){var e=t.getAttribute("dominant-baseline"),r=t.getAttribute("alignment-baseline");return e||r}(t)||"baseline",s=new Jt(t.textContent);return se.call(this,t,s,e),s.alignment=n,s.baseline=i,s},clippath:function(t,e){return he.defs.current&&!he.defs.current.contains(t.id)&&he.defs.current.add(t.id,t),null},image:function(t,e){var r=t.getAttribute("href")||t.getAttribute("xlink:href");if(!r){var n=new gt("encountered <image /> with no href.");return console.warn(n.name,n.message),null}var i=parseFloat(t.getAttribute("x"))||0,s=parseFloat(t.getAttribute("y"))||0,a=parseFloat(t.getAttribute("width")),o=parseFloat(t.getAttribute("height")),h=new Rt(r,i,s);return g.isNaN(a)||(h.width=a),g.isNaN(o)||(h.height=o),se.call(this,t,h,e),h}};function le(t,e){var r=new XMLHttpRequest;return r.open("GET",t),r.onreadystatechange=function(){4===r.readyState&&200===r.status&&e(r.responseText)},r.send(),r}function ce(t,e,r,n){Ot.call(this,[new E,new E,new E,new E],!0),this._renderer.flagTextures=ce.FlagTextures.bind(this),this._renderer.bindTextures=ce.BindTextures.bind(this),this._renderer.unbindTextures=ce.UnbindTextures.bind(this),this.noStroke(),this.noFill(),Array.isArray(t)?this.textures=t.map(ce.GenerateTexture.bind(this)):this.textures=[ce.GenerateTexture(t)],this.origin=new x,this._update(),this.translation.set(e||0,r||0),this.frameRate="number"==typeof n?n:ce.DefaultFrameRate,this.index=0}g.extend(ce,{Properties:["frameRate","index"],DefaultFrameRate:30,FlagTextures:function(){this._flagTextures=!0},BindTextures:function(t){for(var e=t.length;e--;)t[e].bind(m.Types.change,this._renderer.flagTextures);this._renderer.flagTextures()},UnbindTextures:function(t){for(var e=t.length;e--;)t[e].unbind(m.Types.change,this._renderer.flagTextures);this._renderer.flagTextures()},MakeObservable:function(t){It.MakeObservable(t),g.each(ce.Properties,yt,t),Object.defineProperty(t,"textures",{enumerable:!0,get:function(){return this._textures},set:function(t){var e=this._renderer.bindTextures,r=this._renderer.unbindTextures;this._textures&&this._textures.unbind(m.Types.insert,e).unbind(m.Types.remove,r),this._textures=new X((t||[]).slice(0)),this._textures.bind(m.Types.insert,e).bind(m.Types.remove,r),e(this._textures)}})},GenerateTexture:function(t){return t instanceof Et?t:"string"==typeof t?new Et(t):void 0}}),g.extend(ce.prototype,It.prototype,{constructor:ce,_flagTextures:!1,_flagFrameRate:!1,_flagIndex:!1,_amount:1,_duration:0,_index:0,_startTime:0,_playing:!1,_firstFrame:0,_lastFrame:0,_loop:!0,_textures:null,_frameRate:0,_origin:null,play:function(t,e,r){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=g.performance.now(),"number"==typeof t&&(this._firstFrame=t),"number"==typeof e&&(this._lastFrame=e),"function"==typeof r?this._onLastFrame=r:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this},pause:function(){return this._playing=!1,this},stop:function(){return this._playing=!1,this._index=this._firstFrame,this},clone:function(t){var e=new ce(this.textures,this.translation.x,this.translation.y,this.frameRate);return e._loop=this._loop,this._playing&&e.play(),t&&t.add(e),e},toObject:function(){var t=It.prototype.toObject.call(this);return t.textures=this.textures.map((function(t){return t.toObject()})),t.frameRate=this.frameRate,t.index=this.index,t._firstFrame=this._firstFrame,t._lastFrame=this._lastFrame,t._loop=this._loop,t},_update:function(){var t,e,r,n,i,s,a,o,h=this._textures;return this._flagTextures&&(this._amount=h.length),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._playing&&this._frameRate>0?(n=this._amount,g.isNaN(this._lastFrame)&&(this._lastFrame=n-1),r=g.performance.now()-this._startTime,i=1e3*((o=this._lastFrame+1)-this._firstFrame)/this._frameRate,this._loop?r%=i:r=Math.min(r,i),a=l(this._firstFrame,o,r/i),(a=Math.floor(a))!==this._index&&(this._index=a,(s=h[this._index]).loaded&&(t=s.image.width,e=s.image.height,this.width!==t&&(this.width=t),this.height!==e&&(this.height=e),this.fill=s,a>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()))):!this._flagIndex&&this.fill instanceof Et||((s=h[this._index]).loaded&&(t=s.image.width,e=s.image.height,this.width!==t&&(this.width=t),this.height!==e&&(this.height=e)),this.fill=s),It.prototype._update.call(this),this},flagReset:function(){return this._flagTextures=this._flagFrameRate=!1,It.prototype.flagReset.call(this),this}}),ce.MakeObservable(ce.prototype);var ue=2*Math.PI,fe=Math.PI/2;function de(t,e,r,n,i,s,a){for(var o=a||3*k.Resolution,h=[],l=0;l<o;l++)h.push(new E);Ot.call(this,h,!0,!1,!0),"number"==typeof r&&(this.innerRadius=r),"number"==typeof n&&(this.outerRadius=n),"number"==typeof i&&(this.startAngle=i),"number"==typeof s&&(this.endAngle=s),this._update(),"number"==typeof t&&(this.translation.x=t),"number"==typeof e&&(this.translation.y=e)}g.extend(de,{Properties:["startAngle","endAngle","innerRadius","outerRadius"],MakeObservable:function(t){Ot.MakeObservable(t),g.each(de.Properties,yt,t)}}),g.extend(de.prototype,Ot.prototype,{constructor:de,_flagStartAngle:!1,_flagEndAngle:!1,_flagInnerRadius:!1,_flagOuterRadius:!1,_startAngle:0,_endAngle:ue,_innerRadius:0,_outerRadius:0,_update:function(){if(this._flagVertices||this._flagStartAngle||this._flagEndAngle||this._flagInnerRadius||this._flagOuterRadius){var t,r=this._startAngle,n=this._endAngle,i=this._innerRadius,s=this._outerRadius,a=c(r,ue)===c(n,ue),o=i>0,h=this.vertices,l=o?h.length/2:h.length,u=0;a?l--:o||(l-=2);for(var f=0,d=l-1;f<l;f++){var p=f/d,g=h[u],m=p*(n-r)+r,y=(n-r)/l,_=s*Math.cos(m),v=s*Math.sin(m);switch(f){case 0:t=e.move;break;default:t=e.curve}if(g.command=t,g.x=_,g.y=v,g.controls.left.clear(),g.controls.right.clear(),g.command===e.curve){var x=s*y/Math.PI;g.controls.left.x=x*Math.cos(m-fe),g.controls.left.y=x*Math.sin(m-fe),g.controls.right.x=x*Math.cos(m+fe),g.controls.right.y=x*Math.sin(m+fe),1===f&&g.controls.left.multiplyScalar(2),f===d&&g.controls.right.multiplyScalar(2)}u++}if(o){for(a?(h[u].command=e.close,u++):d=--l-1,f=0;f<l;f++)p=f/d,g=h[u],m=(1-p)*(n-r)+r,y=(n-r)/l,_=i*Math.cos(m),v=i*Math.sin(m),t=e.curve,f<=0&&(t=a?e.move:e.line),g.command=t,g.x=_,g.y=v,g.controls.left.clear(),g.controls.right.clear(),g.command===e.curve&&(x=i*y/Math.PI,g.controls.left.x=x*Math.cos(m+fe),g.controls.left.y=x*Math.sin(m+fe),g.controls.right.x=x*Math.cos(m-fe),g.controls.right.y=x*Math.sin(m-fe),1===f&&g.controls.left.multiplyScalar(2),f===d&&g.controls.right.multiplyScalar(2)),u++;h[u].copy(h[0]),h[u].command=e.line}else a||(h[u].command=e.line,h[u].x=0,h[u].y=0,h[++u].copy(h[0]),h[u].command=e.line)}return Ot.prototype._update.call(this),this},flagReset:function(){return Ot.prototype.flagReset.call(this),this._flagStartAngle=this._flagEndAngle=this._flagInnerRadius=this._flagOuterRadius=!1,this},clone:function(t){var e=new de(0,0,this.innerRadius,this.outerRadius,this.startAngle,this.endAngle,this.vertices.length);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&e.matrix.copy(this.matrix),g.each(Ot.Properties,(function(t){e[t]=this[t]}),this),t&&t.add(e),e},toObject:function(){var t=Ot.prototype.toObject.call(this);return g.each(de.Properties,(function(e){t[e]=this[e]}),this),t}}),de.MakeObservable(de.prototype);var pe=2*Math.PI,ge=Math.cos,me=Math.sin;function ye(t,e,r,n){n=Math.max(n||0,3),Ot.call(this),this.closed=!0,this.automatic=!1,"number"==typeof r&&(this.width=2*r),"number"==typeof r&&(this.height=2*r),"number"==typeof n&&(this.sides=n),this._update(),"number"==typeof t&&(this.translation.x=t),"number"==typeof e&&(this.translation.y=e)}g.extend(ye,{Properties:["width","height","sides"],MakeObservable:function(t){Ot.MakeObservable(t),g.each(ye.Properties,yt,t)}}),g.extend(ye.prototype,Ot.prototype,{constructor:ye,_flagWidth:!1,_flagHeight:!1,_flagSides:!1,_width:0,_height:0,_sides:0,_update:function(){if(this._flagVertices||this._flagWidth||this._flagHeight||this._flagSides){var t=this._sides,r=t+1,n=this.vertices.length;n>t&&(this.vertices.splice(t-1,n-t),n=t);for(var i=0;i<r;i++){var s=pe*((i+.5)/t)+Math.PI/2,a=this._width*ge(s)/2,o=this._height*me(s)/2;i>=n?this.vertices.push(new E(a,o)):this.vertices[i].set(a,o),this.vertices[i].command=0===i?e.move:e.line}}return Ot.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=this._flagSides=!1,Ot.prototype.flagReset.call(this),this},clone:function(t){var e=new ye(0,0,this.radius,this.sides);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&e.matrix.copy(this.matrix),g.each(Ot.Properties,(function(t){e[t]=this[t]}),this),t&&t.add(e),e},toObject:function(){var t=Ot.prototype.toObject.call(this);return g.each(ye.Properties,(function(e){t[e]=this[e]}),this),t}}),ye.MakeObservable(ye.prototype);var _e=2*Math.PI,ve=Math.cos,xe=Math.sin;function be(t,e,r,n,i){arguments.length<=3&&(r=(n=r)/2),("number"!=typeof i||i<=0)&&(i=5),Ot.call(this),this.closed=!0,this.automatic=!1,"number"==typeof r&&(this.innerRadius=r),"number"==typeof n&&(this.outerRadius=n),"number"==typeof i&&(this.sides=i),this._update(),"number"==typeof t&&(this.translation.x=t),"number"==typeof e&&(this.translation.y=e)}g.extend(be,{Properties:["innerRadius","outerRadius","sides"],MakeObservable:function(t){Ot.MakeObservable(t),g.each(be.Properties,yt,t)}}),g.extend(be.prototype,Ot.prototype,{constructor:be,_flagInnerRadius:!1,_flagOuterRadius:!1,_flagSides:!1,_innerRadius:0,_outerRadius:0,_sides:0,_update:function(){if(this._flagVertices||this._flagInnerRadius||this._flagOuterRadius||this._flagSides){var t=2*this._sides,r=t+1,n=this.vertices.length;n>t&&(this.vertices.splice(t-1,n-t),n=t);for(var i=0;i<r;i++){var s=_e*((i+.5)/t),a=(i%2?this._outerRadius:this._innerRadius)/2,o=a*ve(s),h=a*xe(s);i>=n?this.vertices.push(new E(o,h)):this.vertices[i].set(o,h),this.vertices[i].command=0===i?e.move:e.line}}return Ot.prototype._update.call(this),this},flagReset:function(){return this._flagInnerRadius=this._flagOuterRadius=this._flagSides=!1,Ot.prototype.flagReset.call(this),this},clone:function(t){var e=new be(0,0,this.innerRadius,this.outerRadius,this.sides);return e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&e.matrix.copy(this.matrix),g.each(Ot.Properties,(function(t){e[t]=this[t]}),this),t&&t.add(e),e},toObject:function(){var t=Ot.prototype.toObject.call(this);return g.each(be.Properties,(function(e){t[e]=this[e]}),this),t}}),be.MakeObservable(be.prototype);var we={version:1.1,ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",alignments:{left:"start",center:"middle",right:"end"},createElement:function(t,e){var r=t,n=document.createElementNS(we.ns,r);return"svg"===r&&(e=g.defaults(e||{},{version:we.version})),e&&Object.keys(e).length>0&&we.setAttributes(n,e),n},setAttributes:function(t,e){for(var r=Object.keys(e),n=0;n<r.length;n++)/href/.test(r[n])?t.setAttributeNS(we.xlink,r[n],e[r[n]]):t.setAttribute(r[n],e[r[n]]);return this},removeAttributes:function(t,e){for(var r in e)t.removeAttribute(r);return this},toString:function(t,r){for(var n,i=t.length,s=i-1,a="",o=0;o<i;o++){var h,l,u,d,p,g,m,y,_,v,b,w,M,E,S=t[o],N=r?c(o-1,i):Math.max(o-1,0),k=r?c(o+1,i):Math.min(o+1,s),F=t[N],O=t[k],A=f(S.x),T=f(S.y);switch(S.command){case e.close:h=e.close;break;case e.arc:v=S.rx,b=S.ry,w=S.xAxisRotation,M=S.largeArcFlag,E=S.sweepFlag,h=e.arc+" "+v+" "+b+" "+w+" "+M+" "+E+" "+A+" "+T;break;case e.curve:g=F.controls&&F.controls.right||x.zero,m=S.controls&&S.controls.left||x.zero,F.relative?(l=f(g.x+F.x),u=f(g.y+F.y)):(l=f(g.x),u=f(g.y)),S.relative?(d=f(m.x+S.x),p=f(m.y+S.y)):(d=f(m.x),p=f(m.y)),h=(0===o?e.move:e.curve)+" "+l+" "+u+" "+d+" "+p+" "+A+" "+T;break;case e.move:n=S,h=e.move+" "+A+" "+T;break;default:h=S.command+" "+A+" "+T}o>=s&&r&&(S.command===e.curve&&(O=n,y=S.controls&&S.controls.right||S,_=O.controls&&O.controls.left||O,S.relative?(l=f(y.x+S.x),u=f(y.y+S.y)):(l=f(y.x),u=f(y.y)),O.relative?(d=f(_.x+O.x),p=f(_.y+O.y)):(d=f(_.x),p=f(_.y)),h+=" C "+l+" "+u+" "+d+" "+p+" "+(A=f(O.x))+" "+(T=f(O.y))),S.command!==e.close&&(h+=" Z")),a+=h+" "}return a},getClip:function(t,e){var r=t._renderer.clip;return r||(r=t._renderer.clip=we.createElement("clipPath",{"clip-rule":"nonzero"}),e.defs.appendChild(r)),r},group:{appendChild:function(t){var e=t._renderer.elem;if(e){var r=e.nodeName;!r||/(radial|linear)gradient/i.test(r)||t._clip||this.elem.appendChild(e)}},removeChild:function(t){var e=t._renderer.elem;e&&e.parentNode==this.elem&&e.nodeName&&(t._clip||this.elem.removeChild(e))},orderChild:function(t){this.elem.appendChild(t._renderer.elem)},renderChild:function(t){we[t._renderer.type].render.call(t,this)},render:function(t){if(!this._visible&&!this._flagVisible||0===this._opacity&&!this._flagOpacity)return this;this._update(),this._renderer.elem||(this._renderer.elem=we.createElement("g",{id:this.id}),t.appendChild(this._renderer.elem));var e=this._matrix.manual||this._flagMatrix,r={domElement:t,elem:this._renderer.elem};e&&this._renderer.elem.setAttribute("transform","matrix("+this._matrix.toString()+")");for(var n=0;n<this.children.length;n++){var i=this.children[n];we[i._renderer.type].render.call(i,t)}return this._flagId&&this._renderer.elem.setAttribute("id",this._id),this._flagOpacity&&this._renderer.elem.setAttribute("opacity",this._opacity),this._flagVisible&&this._renderer.elem.setAttribute("display",this._visible?"inline":"none"),this._flagClassName&&this._renderer.elem.setAttribute("class",this.classList.join(" ")),this._flagAdditions&&this.additions.forEach(we.group.appendChild,r),this._flagSubtractions&&this.subtractions.forEach(we.group.removeChild,r),this._flagOrder&&this.children.forEach(we.group.orderChild,r),this._flagMask&&(this._mask?(we[this._mask._renderer.type].render.call(this._mask,t),this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")")):this._renderer.elem.removeAttribute("clip-path")),this.flagReset()}},path:{render:function(t){if(0===this._opacity&&!this._flagOpacity)return this;this._update();var e={};if((this._matrix.manual||this._flagMatrix)&&(e.transform="matrix("+this._matrix.toString()+")"),this._flagId&&(e.id=this._id),this._flagVertices){var r=we.toString(this._renderer.vertices,this._closed);e.d=r}if(this._fill&&this._fill._renderer&&(this._fill._update(),we[this._fill._renderer.type].render.call(this._fill,t,!0)),this._flagFill&&(e.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill),this._stroke&&this._stroke._renderer&&(this._stroke._update(),we[this._stroke._renderer.type].render.call(this._stroke,t,!0)),this._flagStroke&&(e.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke),this._flagLinewidth&&(e["stroke-width"]=this._linewidth),this._flagOpacity&&(e["stroke-opacity"]=this._opacity,e["fill-opacity"]=this._opacity),this._flagClassName&&(e.class=this.classList.join(" ")),this._flagVisible&&(e.visibility=this._visible?"visible":"hidden"),this._flagCap&&(e["stroke-linecap"]=this._cap),this._flagJoin&&(e["stroke-linejoin"]=this._join),this._flagMiter&&(e["stroke-miterlimit"]=this._miter),this.dashes&&this.dashes.length>0&&(e["stroke-dasharray"]=this.dashes.join(" "),e["stroke-dashoffset"]=this.dashes.offset||0),this._renderer.elem?we.setAttributes(this._renderer.elem,e):(e.id=this._id,this._renderer.elem=we.createElement("path",e),t.appendChild(this._renderer.elem)),this._flagClip){var n=we.getClip(this,t),i=this._renderer.elem;this._clip?(i.removeAttribute("id"),n.setAttribute("id",this.id),n.appendChild(i)):(n.removeAttribute("id"),i.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(i))}return this._flagMask&&(this._mask?(we[this._mask._renderer.type].render.call(this._mask,t),this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")")):this._renderer.elem.removeAttribute("clip-path")),this.flagReset()}},text:{render:function(t){this._update();var e={};if((this._matrix.manual||this._flagMatrix)&&(e.transform="matrix("+this._matrix.toString()+")"),this._flagId&&(e.id=this._id),this._flagFamily&&(e["font-family"]=this._family),this._flagSize&&(e["font-size"]=this._size),this._flagLeading&&(e["line-height"]=this._leading),this._flagAlignment&&(e["text-anchor"]=we.alignments[this._alignment]||this._alignment),this._flagBaseline&&(e["alignment-baseline"]=e["dominant-baseline"]=this._baseline),this._flagStyle&&(e["font-style"]=this._style),this._flagWeight&&(e["font-weight"]=this._weight),this._flagDecoration&&(e["text-decoration"]=this._decoration),this._fill&&this._fill._renderer&&(this._fill._update(),we[this._fill._renderer.type].render.call(this._fill,t,!0)),this._flagFill&&(e.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill),this._stroke&&this._stroke._renderer&&(this._stroke._update(),we[this._stroke._renderer.type].render.call(this._stroke,t,!0)),this._flagStroke&&(e.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke),this._flagLinewidth&&(e["stroke-width"]=this._linewidth),this._flagOpacity&&(e.opacity=this._opacity),this._flagClassName&&(e.class=this.classList.join(" ")),this._flagVisible&&(e.visibility=this._visible?"visible":"hidden"),this.dashes&&this.dashes.length>0&&(e["stroke-dasharray"]=this.dashes.join(" "),e["stroke-dashoffset"]=this.dashes.offset||0),this._renderer.elem?we.setAttributes(this._renderer.elem,e):(e.id=this._id,this._renderer.elem=we.createElement("text",e),t.defs.appendChild(this._renderer.elem)),this._flagClip){var r=we.getClip(this,t),n=this._renderer.elem;this._clip?(n.removeAttribute("id"),r.setAttribute("id",this.id),r.appendChild(n)):(r.removeAttribute("id"),n.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(n))}return this._flagMask&&(this._mask?(we[this._mask._renderer.type].render.call(this._mask,t),this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")")):this._renderer.elem.removeAttribute("clip-path")),this._flagValue&&(this._renderer.elem.textContent=this._value),this.flagReset()}},"linear-gradient":{render:function(t,e){e||this._update();var r={};if(this._flagId&&(r.id=this._id),this._flagEndPoints&&(r.x1=this.left._x,r.y1=this.left._y,r.x2=this.right._x,r.y2=this.right._y),this._flagSpread&&(r.spreadMethod=this._spread),this._renderer.elem?we.setAttributes(this._renderer.elem,r):(r.id=this._id,r.gradientUnits="userSpaceOnUse",this._renderer.elem=we.createElement("linearGradient",r),t.defs.appendChild(this._renderer.elem)),this._flagStops){var n=this._renderer.elem.childNodes.length!==this.stops.length;if(n)for(;this._renderer.elem.lastChild;)this._renderer.elem.removeChild(this._renderer.elem.lastChild);for(var i=0;i<this.stops.length;i++){var s=this.stops[i],a={};s._flagOffset&&(a.offset=100*s._offset+"%"),s._flagColor&&(a["stop-color"]=s._color),s._flagOpacity&&(a["stop-opacity"]=s._opacity),s._renderer.elem?we.setAttributes(s._renderer.elem,a):s._renderer.elem=we.createElement("stop",a),n&&this._renderer.elem.appendChild(s._renderer.elem),s.flagReset()}}return this.flagReset()}},"radial-gradient":{render:function(t,e){e||this._update();var r={};if(this._flagId&&(r.id=this._id),this._flagCenter&&(r.cx=this.center._x,r.cy=this.center._y),this._flagFocal&&(r.fx=this.focal._x,r.fy=this.focal._y),this._flagRadius&&(r.r=this._radius),this._flagSpread&&(r.spreadMethod=this._spread),this._renderer.elem?we.setAttributes(this._renderer.elem,r):(r.id=this._id,r.gradientUnits="userSpaceOnUse",this._renderer.elem=we.createElement("radialGradient",r),t.defs.appendChild(this._renderer.elem)),this._flagStops){var n=this._renderer.elem.childNodes.length!==this.stops.length;if(n)for(;this._renderer.elem.lastChild;)this._renderer.elem.removeChild(this._renderer.elem.lastChild);for(var i=0;i<this.stops.length;i++){var s=this.stops[i],a={};s._flagOffset&&(a.offset=100*s._offset+"%"),s._flagColor&&(a["stop-color"]=s._color),s._flagOpacity&&(a["stop-opacity"]=s._opacity),s._renderer.elem?we.setAttributes(s._renderer.elem,a):s._renderer.elem=we.createElement("stop",a),n&&this._renderer.elem.appendChild(s._renderer.elem),s.flagReset()}}return this.flagReset()}},texture:{render:function(t,e){e||this._update();var r={},n={x:0,y:0},i=this.image;if(this._flagId&&(r.id=this._id),this._flagLoaded&&this.loaded)switch(i.nodeName.toLowerCase()){case"canvas":n.href=n["xlink:href"]=i.toDataURL("image/png");break;case"img":case"image":n.href=n["xlink:href"]=this.src}if((this._flagOffset||this._flagLoaded||this._flagScale)&&(r.x=this._offset.x,r.y=this._offset.y,i&&(r.x-=i.width/2,r.y-=i.height/2,this._scale instanceof x?(r.x*=this._scale.x,r.y*=this._scale.y):(r.x*=this._scale,r.y*=this._scale)),r.x>0&&(r.x*=-1),r.y>0&&(r.y*=-1)),(this._flagScale||this._flagLoaded||this._flagRepeat)&&(r.width=0,r.height=0,i)){switch(n.width=r.width=i.width,n.height=r.height=i.height,this._repeat){case"no-repeat":r.width+=1,r.height+=1}this._scale instanceof x?(r.width*=this._scale.x,r.height*=this._scale.y):(r.width*=this._scale,r.height*=this._scale)}return(this._flagScale||this._flagLoaded)&&(this._renderer.image?we.setAttributes(this._renderer.image,n):this._renderer.image=we.createElement("image",n)),this._renderer.elem?0!==Object.keys(r).length&&we.setAttributes(this._renderer.elem,r):(r.id=this._id,r.patternUnits="userSpaceOnUse",this._renderer.elem=we.createElement("pattern",r),t.defs.appendChild(this._renderer.elem)),this._renderer.elem&&this._renderer.image&&!this._renderer.appended&&(this._renderer.elem.appendChild(this._renderer.image),this._renderer.appended=!0),this.flagReset()}}};function Me(t){this.domElement=t.domElement||we.createElement("svg"),this.scene=new $,this.scene.parent=this,this.defs=we.createElement("defs"),this.domElement.appendChild(this.defs),this.domElement.defs=this.defs,this.domElement.style.overflow="hidden"}g.extend(Me,{Utils:we}),g.extend(Me.prototype,m,{constructor:Me,setSize:function(t,e){return this.width=t,this.height=e,we.setAttributes(this.domElement,{width:t,height:e}),this.trigger(m.Types.resize,t,e)},render:function(){return we.group.render.call(this.scene,this.domElement),this}});var Ee=H.Multiply,Se=[1,0,0,0,1,0,0,0,1],Ne=new u(9),ke=ct.Utils,Fe={isHidden:/(undefined|none|transparent)/i,canvas:s.document?s.document.createElement("canvas"):{getContext:function(){}},alignments:{left:"start",middle:"center",right:"end"},matrix:new H,group:{removeChild:function(t,e){if(t.children)for(var r=0;r<t.children.length;r++)Fe.group.removeChild(t.children[r],e);else e.deleteTexture(t._renderer.texture),delete t._renderer.texture},render:function(t,e){if(this._visible){this._update();var r,n=this.parent,i=n._matrix&&n._matrix.manual||n._flagMatrix,s=this._matrix.manual||this._flagMatrix;if((i||s)&&(this._renderer.matrix||(this._renderer.matrix=new u(9)),this._matrix.toTransformArray(!0,Ne),Ee(Ne,n._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof x||(this._renderer.scale=new x),this._scale instanceof x?(this._renderer.scale.x=this._scale.x,this._renderer.scale.y=this._scale.y):(this._renderer.scale.x=this._scale,this._renderer.scale.y=this._scale),/renderer/i.test(n._renderer.type)||(this._renderer.scale.x*=n._renderer.scale.x,this._renderer.scale.y*=n._renderer.scale.y),i&&(this._flagMatrix=!0)),this._mask&&(t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,0),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1),Fe[this._mask._renderer.type].render.call(this._mask,t,e,this),t.stencilFunc(t.EQUAL,1,255),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.colorMask(!0,!0,!0,!0)),this._flagOpacity=n._flagOpacity||this._flagOpacity,this._renderer.opacity=this._opacity*(n&&n._renderer?n._renderer.opacity:1),this._flagSubtractions)for(r=0;r<this.subtractions.length;r++)Fe.group.removeChild(this.subtractions[r],t);for(r=0;r<this.children.length;r++){var a=this.children[r];Fe[a._renderer.type].render.call(a,t,e)}return this._mask&&t.disable(t.STENCIL_TEST),this.flagReset()}}},path:{updateCanvas:function(t){var r,n,i,s,a,o,h,l,u,f,d,p,g,m,y,_=t._renderer.vertices,v=this.canvas,b=this.ctx,w=t._renderer.scale,M=t._stroke,E=t._linewidth,S=t._fill,N=t._renderer.opacity||t._opacity,k=t._cap,F=t._join,O=t._miter,A=t._closed,T=t.dashes,C=_.length,P=C-1;v.width=Math.max(Math.ceil(t._renderer.rect.width*w.x),1),v.height=Math.max(Math.ceil(t._renderer.rect.height*w.y),1);var I,R=t._renderer.rect.centroid,z=R.x,L=R.y;b.clearRect(0,0,v.width,v.height),S&&("string"==typeof S?b.fillStyle=S:(Fe[S._renderer.type].render.call(S,b,t),b.fillStyle=S._renderer.effect)),M&&("string"==typeof M?b.strokeStyle=M:(Fe[M._renderer.type].render.call(M,b,t),b.strokeStyle=M._renderer.effect),E&&(b.lineWidth=E),O&&(b.miterLimit=O),F&&(b.lineJoin=F),!A&&k&&(b.lineCap=k)),"number"==typeof N&&(b.globalAlpha=N),T&&T.length>0&&(b.lineDashOffset=T.offset||0,b.setLineDash(T)),b.save(),b.scale(w.x,w.y),b.translate(z,L),b.beginPath();for(var j=0;j<_.length;j++){var D=_[j];switch(g=D.x,m=D.y,D.command){case e.close:b.closePath();break;case e.arc:var B=D.rx,G=D.ry,V=D.xAxisRotation,q=D.largeArcFlag,U=D.sweepFlag,H=(i=_[n=A?c(j-1,C):Math.max(j-1,0)]).x,Y=i.y;ke.renderSvgArcCommand(b,H,Y,B,G,q,U,V,g,m);break;case e.curve:n=A?c(j-1,C):Math.max(j-1,0),r=A?c(j+1,C):Math.min(j+1,P),i=_[n],s=_[r],u=i.controls&&i.controls.right||x.zero,f=D.controls&&D.controls.left||x.zero,i._relative?(h=u.x+i.x,l=u.y+i.y):(h=u.x,l=u.y),D._relative?(a=f.x+D.x,o=f.y+D.y):(a=f.x,o=f.y),b.bezierCurveTo(h,l,a,o,g,m),j>=P&&A&&(s=I,d=D.controls&&D.controls.right||x.zero,p=s.controls&&s.controls.left||x.zero,D._relative?(h=d.x+D.x,l=d.y+D.y):(h=d.x,l=d.y),s._relative?(a=p.x+s.x,o=p.y+s.y):(a=p.x,o=p.y),g=s.x,m=s.y,b.bezierCurveTo(h,l,a,o,g,m));break;case e.line:b.lineTo(g,m);break;case e.move:I=D,b.moveTo(g,m)}}A&&b.closePath(),Fe.isHidden.test(S)||((y=S._renderer&&S._renderer.offset)&&(b.save(),b.translate(-S._renderer.offset.x,-S._renderer.offset.y),b.scale(S._renderer.scale.x,S._renderer.scale.y)),b.fill(),y&&b.restore()),Fe.isHidden.test(M)||((y=M._renderer&&M._renderer.offset)&&(b.save(),b.translate(-M._renderer.offset.x,-M._renderer.offset.y),b.scale(M._renderer.scale.x,M._renderer.scale.y),b.lineWidth=E/M._renderer.scale.x),b.stroke(),y&&b.restore()),b.restore()},getBoundingClientRect:function(t,e,r){var n,i,s=1/0,a=-1/0,o=1/0,h=-1/0;t.forEach((function(t){var e,r,n,i,l,c,u=t.x,f=t.y,d=t.controls;o=Math.min(f,o),s=Math.min(u,s),a=Math.max(u,a),h=Math.max(f,h),t.controls&&(l=d.left,c=d.right,l&&c&&(e=t._relative?l.x+u:l.x,r=t._relative?l.y+f:l.y,n=t._relative?c.x+u:c.x,i=t._relative?c.y+f:c.y,e&&r&&n&&i&&(o=Math.min(r,i,o),s=Math.min(e,n,s),a=Math.max(e,n,a),h=Math.max(r,i,h))))})),"number"==typeof e&&(o-=e,s-=e,a+=e,h+=e),n=a-s,i=h-o,r.top=o,r.left=s,r.right=a,r.bottom=h,r.width=n,r.height=i,r.centroid||(r.centroid={}),r.centroid.x=-s,r.centroid.y=-o},render:function(t,e,r){if(!this._visible||!this._opacity)return this;this._update();var n=r||this.parent,i=n._matrix.manual||n._flagMatrix,s=this._matrix.manual||this._flagMatrix,a=this._renderer.parent!==n,o=this._flagVertices||this._flagFill||this._fill instanceof bt&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof wt&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof Et&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof bt&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof wt&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof Et&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||n._flagOpacity||this._flagVisible||this._flagCap||this._flagJoin||this._flagMiter||this._flagScale||this.dashes&&this.dashes.length>0||!this._renderer.texture;if((i||s||a)&&(this._renderer.matrix||(this._renderer.matrix=new u(9)),this._matrix.toTransformArray(!0,Ne),Ee(Ne,n._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof x||(this._renderer.scale=new x),this._scale instanceof x?(this._renderer.scale.x=this._scale.x*n._renderer.scale.x,this._renderer.scale.y=this._scale.y*n._renderer.scale.y):(this._renderer.scale.x=this._scale*n._renderer.scale.x,this._renderer.scale.y=this._scale*n._renderer.scale.y),a&&(this._renderer.parent=n)),this._mask&&(t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,0),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1),Fe[this._mask._renderer.type].render.call(this._mask,t,e,this),t.stencilFunc(t.EQUAL,1,255),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.colorMask(!0,!0,!0,!0)),o?(this._renderer.rect||(this._renderer.rect={}),this._renderer.opacity=this._opacity*n._renderer.opacity,Fe.path.getBoundingClientRect(this._renderer.vertices,this._linewidth,this._renderer.rect),Fe.updateTexture.call(Fe,t,this)):(this._fill&&this._fill._update&&this._fill._update(),this._stroke&&this._stroke._update&&this._stroke._update()),!this._clip||r){t.bindTexture(t.TEXTURE_2D,this._renderer.texture);var h=this._renderer.rect;return t.uniformMatrix3fv(e.matrix,!1,this._renderer.matrix),t.uniform4f(e.rect,h.left,h.top,h.right,h.bottom),t.drawArrays(t.TRIANGLES,0,6),this._mask&&t.disable(t.STENCIL_TEST),this.flagReset()}}},text:{updateCanvas:function(t){var e=this.canvas,r=this.ctx,n=t._renderer.scale,i=t._stroke,s=t._linewidth*n,a=t._fill,o=t._renderer.opacity||t._opacity,h=t.dashes,l=t._decoration;e.width=Math.max(Math.ceil(t._renderer.rect.width*n.x),1),e.height=Math.max(Math.ceil(t._renderer.rect.height*n.y),1);var c,u,f,d,p,g,m,y,_,v,x,b=t._renderer.rect.centroid,w=b.x,M=b.y,E=a._renderer&&a._renderer.offset&&i._renderer&&i._renderer.offset;if(r.clearRect(0,0,e.width,e.height),E||(r.font=[t._style,t._weight,t._size+"px/"+t._leading+"px",t._family].join(" ")),r.textAlign="center",r.textBaseline="middle",a&&("string"==typeof a?r.fillStyle=a:(Fe[a._renderer.type].render.call(a,r,t),r.fillStyle=a._renderer.effect)),i&&("string"==typeof i?r.strokeStyle=i:(Fe[i._renderer.type].render.call(i,r,t),r.strokeStyle=i._renderer.effect),s&&(r.lineWidth=s)),"number"==typeof o&&(r.globalAlpha=o),h&&h.length>0&&(r.lineDashOffset=h.offset||0,r.setLineDash(h)),r.save(),r.scale(n.x,n.y),r.translate(w,M),Fe.isHidden.test(a)||(a._renderer&&a._renderer.offset?(g=a._renderer.scale.x,m=a._renderer.scale.y,r.save(),r.translate(-a._renderer.offset.x,-a._renderer.offset.y),r.scale(g,m),c=t._size/a._renderer.scale.y,u=t._leading/a._renderer.scale.y,r.font=[t._style,t._weight,c+"px/",u+"px",t._family].join(" "),f=a._renderer.offset.x/a._renderer.scale.x,d=a._renderer.offset.y/a._renderer.scale.y,r.fillText(t.value,f,d),r.restore()):r.fillText(t.value,0,0)),Fe.isHidden.test(i)||(i._renderer&&i._renderer.offset?(g=i._renderer.scale.x,m=i._renderer.scale.y,r.save(),r.translate(-i._renderer.offset.x,-i._renderer.offset.y),r.scale(g,m),c=t._size/i._renderer.scale.y,u=t._leading/i._renderer.scale.y,r.font=[t._style,t._weight,c+"px/",u+"px",t._family].join(" "),f=i._renderer.offset.x/i._renderer.scale.x,d=i._renderer.offset.y/i._renderer.scale.y,p=s/i._renderer.scale.x,r.lineWidth=p,r.strokeText(t.value,f,d),r.restore()):r.strokeText(t.value,0,0)),/(underline|strikethrough)/i.test(l)){var S=r.measureText(t.value);switch(l){case"underline":_=S.actualBoundingBoxAscent,x=S.actualBoundingBoxAscent;break;case"strikethrough":_=0,x=0}y=-S.width/2,v=S.width/2,r.lineWidth=Math.max(Math.floor(t._size/15),1),r.strokeStyle=r.fillStyle,r.beginPath(),r.moveTo(y,_),r.lineTo(v,x),r.stroke()}r.restore()},getBoundingClientRect:function(t,e){var r=Fe.ctx;r.font=[t._style,t._weight,t._size+"px/"+t._leading+"px",t._family].join(" "),r.textAlign="center",r.textBaseline=t._baseline;var n=1.25*r.measureText(t._value).width,i=1.25*Math.max(t._size,t._leading);this._linewidth&&!Fe.isHidden.test(this._stroke)&&(n+=2*this._linewidth,i+=2*this._linewidth);var s=n/2,a=i/2;switch(Fe.alignments[t._alignment]||t._alignment){case Fe.alignments.left:e.left=0,e.right=n;break;case Fe.alignments.right:e.left=-n,e.right=0;break;default:e.left=-s,e.right=s}switch(t._baseline){case"bottom":e.top=-i,e.bottom=0;break;case"top":e.top=0,e.bottom=i;break;default:e.top=-a,e.bottom=a}e.width=n,e.height=i,e.centroid||(e.centroid={}),e.centroid.x=s,e.centroid.y=a},render:function(t,e,r){if(!this._visible||!this._opacity)return this;this._update();var n=r||this.parent,i=n._matrix.manual||n._flagMatrix,s=this._matrix.manual||this._flagMatrix,a=this._renderer.parent!==n,o=this._flagVertices||this._flagFill||this._fill instanceof bt&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof wt&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof Et&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof bt&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof wt&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof Et&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||n._flagOpacity||this._flagVisible||this._flagScale||this._flagValue||this._flagFamily||this._flagSize||this._flagLeading||this._flagAlignment||this._flagBaseline||this._flagStyle||this._flagWeight||this._flagDecoration||this.dashes&&this.dashes.length>0||!this._renderer.texture;if((i||s||a)&&(this._renderer.matrix||(this._renderer.matrix=new u(9)),this._matrix.toTransformArray(!0,Ne),Ee(Ne,n._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof x||(this._renderer.scale=new x),this._scale instanceof x?(this._renderer.scale.x=this._scale.x*n._renderer.scale.x,this._renderer.scale.y=this._scale.y*n._renderer.scale.y):(this._renderer.scale.x=this._scale*n._renderer.scale.x,this._renderer.scale.y=this._scale*n._renderer.scale.y),a&&(this._renderer.parent=n)),this._mask&&(t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,0),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1),Fe[this._mask._renderer.type].render.call(this._mask,t,e,this),t.stencilFunc(t.EQUAL,1,255),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.colorMask(!0,!0,!0,!0)),o?(this._renderer.rect||(this._renderer.rect={}),this._renderer.opacity=this._opacity*n._renderer.opacity,Fe.text.getBoundingClientRect(this,this._renderer.rect),Fe.updateTexture.call(Fe,t,this)):(this._fill&&this._fill._update&&this._fill._update(),this._stroke&&this._stroke._update&&this._stroke._update()),!this._clip||r){t.bindTexture(t.TEXTURE_2D,this._renderer.texture);var h=this._renderer.rect;return t.uniformMatrix3fv(e.matrix,!1,this._renderer.matrix),t.uniform4f(e.rect,h.left,h.top,h.right,h.bottom),t.drawArrays(t.TRIANGLES,0,6),this._mask&&t.disable(t.STENCIL_TEST),this.flagReset()}}},"linear-gradient":{render:function(t,e){if(t.canvas.getContext("2d")){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops){this._renderer.effect=t.createLinearGradient(this.left._x,this.left._y,this.right._x,this.right._y);for(var r=0;r<this.stops.length;r++){var n=this.stops[r];this._renderer.effect.addColorStop(n._offset,n._color)}}return this.flagReset()}}},"radial-gradient":{render:function(t,e){if(t.canvas.getContext("2d")){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops){this._renderer.effect=t.createRadialGradient(this.center._x,this.center._y,0,this.focal._x,this.focal._y,this._radius);for(var r=0;r<this.stops.length;r++){var n=this.stops[r];this._renderer.effect.addColorStop(n._offset,n._color)}}return this.flagReset()}}},texture:{render:function(t,e){if(t.canvas.getContext("2d")){this._update();var r=this.image;if((this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)this._renderer.effect=t.createPattern(r,this._repeat);else if(!this._renderer.effect)return this.flagReset();return(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof x||(this._renderer.offset=new x),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,r&&(this._renderer.offset.x+=r.width/2,this._renderer.offset.y+=r.height/2,this._scale instanceof x?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof x||(this._renderer.scale=new x),this._scale instanceof x?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}}},updateTexture:function(t,e){this[e._renderer.type].updateCanvas.call(Fe,e),e._renderer.texture||(e._renderer.texture=t.createTexture()),t.bindTexture(t.TEXTURE_2D,e._renderer.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.canvas.width<=0||this.canvas.height<=0||t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.canvas)},program:{create:function(t,e){var r,n;if(r=t.createProgram(),g.each(e,(function(e){t.attachShader(r,e)})),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS))throw n=t.getProgramInfoLog(r),t.deleteProgram(r),new gt("unable to link program: "+n);return r}},shaders:{create:function(t,e,r){var n,i;if(n=t.createShader(t[r]),t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw i=t.getShaderInfoLog(n),t.deleteShader(n),new gt("unable to compile shader "+n+": "+i);return n},types:{vertex:"VERTEX_SHADER",fragment:"FRAGMENT_SHADER"},vertex:["precision mediump float;","attribute vec2 a_position;","","uniform mat3 u_matrix;","uniform vec2 u_resolution;","uniform vec4 u_rect;","","varying vec2 v_textureCoords;","","void main() {","   vec2 rectCoords = (a_position * (u_rect.zw - u_rect.xy)) + u_rect.xy;","   vec2 projected = (u_matrix * vec3(rectCoords, 1.0)).xy;","   vec2 normal = projected / u_resolution;","   vec2 clipspace = (normal * 2.0) - 1.0;","","   gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);","   v_textureCoords = a_position;","}"].join("\n"),fragment:["precision mediump float;","","uniform sampler2D u_image;","varying vec2 v_textureCoords;","","void main() {","  vec4 texel = texture2D(u_image, v_textureCoords);","  if (texel.a == 0.0) {","    discard;","  }","  gl_FragColor = texel;","}"].join("\n")},TextureRegistry:new _t};function Oe(t){var e,r,n;if(this.domElement=t.domElement||document.createElement("canvas"),void 0!==t.offscreenElement&&(Fe.canvas=t.offscreenElement,Fe.ctx=Fe.canvas.getContext("2d")),this.scene=new $,this.scene.parent=this,this._renderer={type:"renderer",matrix:new u(Se),scale:1,opacity:1},this._flagMatrix=!0,t=g.defaults(t||{},{antialias:!1,alpha:!0,premultipliedAlpha:!0,stencil:!0,preserveDrawingBuffer:!0,overdraw:!1}),this.overdraw=t.overdraw,e=this.ctx=this.domElement.getContext("webgl",t)||this.domElement.getContext("experimental-webgl",t),!this.ctx)throw new gt("unable to create a webgl context. Try using another renderer.");r=Fe.shaders.create(e,Fe.shaders.vertex,Fe.shaders.types.vertex),n=Fe.shaders.create(e,Fe.shaders.fragment,Fe.shaders.types.fragment),this.program=Fe.program.create(e,[r,n]),e.useProgram(this.program),this.program.position=e.getAttribLocation(this.program,"a_position"),this.program.matrix=e.getUniformLocation(this.program,"u_matrix"),this.program.rect=e.getUniformLocation(this.program,"u_rect");var i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.vertexAttribPointer(this.program.position,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.program.position),e.bufferData(e.ARRAY_BUFFER,new u([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enable(e.BLEND),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA)}function Ae(t){var e=g.defaults(t||{},{fullscreen:!1,fitted:!1,width:640,height:480,type:Ae.Types.svg,autostart:!1});if(g.each(e,(function(t,e){/fullscreen/i.test(e)||/autostart/i.test(e)||(this[e]=t)}),this),g.isElement(e.domElement)){var r=e.domElement.tagName.toLowerCase();/^(CanvasRenderer-canvas|WebGLRenderer-canvas|SVGRenderer-svg)$/.test(this.type+"-"+r)||(this.type=Ae.Types[r])}this.renderer=new Ae[this.type](this),this.setPlaying(e.autostart),this.frameCount=0,e.fullscreen?(this.fit=Te.bind(this),this.fit.domElement=window,this.fit.attached=!0,g.extend(document.body.style,{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"}),g.extend(this.renderer.domElement.style,{display:"block",top:0,left:0,right:0,bottom:0,position:"fixed"}),dt.bind(this.fit.domElement,"resize",this.fit),this.fit()):e.fitted?(this.fit=Ce.bind(this),g.extend(this.renderer.domElement.style,{display:"block"})):g.isElement(e.domElement)||(this.renderer.setSize(e.width,e.height,this.ratio),this.width=e.width,this.height=e.height),this.renderer.bind(m.Types.resize,Pe.bind(this)),this.scene=this.renderer.scene,Ae.Instances.push(this),e.autostart&&Ie.init()}function Te(){var t=document.body.getBoundingClientRect(),e=this.width=t.width,r=this.height=t.height;this.renderer.setSize(e,r,this.ratio)}function Ce(){var t=this.renderer.domElement.parentElement;if(t){var e=t.getBoundingClientRect(),r=this.width=e.width,n=this.height=e.height;this.renderer.setSize(r,n,this.ratio)}else console.warn("Two.js: Attempting to fit to parent, but no parent found.")}function Pe(t,e){this.width=t,this.height=e,this.trigger(m.Types.resize,t,e)}Fe.ctx=Fe.canvas.getContext("2d"),g.extend(Oe,{Utils:Fe}),g.extend(Oe.prototype,m,{constructor:Oe,setSize:function(t,e,r){this.width=t,this.height=e,this.ratio=void 0===r?B(this.ctx):r,this.domElement.width=t*this.ratio,this.domElement.height=e*this.ratio,g.isObject(this.domElement.style)&&g.extend(this.domElement.style,{width:t+"px",height:e+"px"}),this._renderer.matrix[0]=this._renderer.matrix[4]=this._renderer.scale=this.ratio,this._flagMatrix=!0,this.ctx.viewport(0,0,t*this.ratio,e*this.ratio);var n=this.ctx.getUniformLocation(this.program,"u_resolution");return this.ctx.uniform2f(n,t*this.ratio,e*this.ratio),this.trigger(m.Types.resize,t,e,r)},render:function(){var t=this.ctx;return this.overdraw||t.clear(t.COLOR_BUFFER_BIT),Fe.group.render.call(this.scene,t,this.program),this._flagMatrix=!1,this}}),g.extend(Ae,k),g.extend(Ae.prototype,m,{constructor:Ae,type:"",renderer:null,scene:null,width:0,height:0,frameCount:0,timeDelta:0,playing:!1,appendTo:function(t){return t.appendChild(this.renderer.domElement),this.fit&&(this.fit.domElement!==window&&(this.fit.domElement=t,this.fit.attached=!1),this.update()),this},play:function(){return this.playing=!0,Ie.init(),this.trigger(m.Types.play)},pause:function(){return this.playing=!1,this.trigger(m.Types.pause)},setPlaying:function(t){this.playing=t},release:function(t){var e,r,n;if(g.isObject(t)){if("function"==typeof t.unbind&&t.unbind(),t.vertices)for("function"==typeof t.vertices.unbind&&t.vertices.unbind(),e=0;e<t.vertices.length;e++)"function"==typeof(r=t.vertices[e]).unbind&&r.unbind();if(t.children)for(e=0;e<t.children.length;e++)n=t.children[e],this.release(n);return t}},update:function(){var t=!!this._lastFrame,e=g.performance.now();t&&(this.timeDelta=parseFloat((e-this._lastFrame).toFixed(3))),this._lastFrame=e,this.fit&&this.fit.domElement&&!this.fit.attached&&(dt.bind(this.fit.domElement,"resize",this.fit),this.fit.attached=!0,this.fit());var r=this.width,n=this.height,i=this.renderer;return r===i.width&&n===i.height||i.setSize(r,n,this.ratio),this.trigger(m.Types.update,this.frameCount,this.timeDelta),this.render()},render:function(){return this.renderer.render(),this.trigger(m.Types.render,this.frameCount++)},add:function(t){var e=t;return e instanceof Array||(e=Array.prototype.slice.call(arguments)),this.scene.add(e),this},remove:function(t){var e=t;return e instanceof Array||(e=Array.prototype.slice.call(arguments)),this.scene.remove(e),this},clear:function(){return this.scene.remove(this.scene.children),this},makeLine:function(t,e,r,n){var i=new Yt(t,e,r,n);return this.scene.add(i),i},makeArrow:function(t,r,n,i,s){var a="number"==typeof s?s:10,o=Math.atan2(i-r,n-t),h=new Ot([new E(t,r,void 0,void 0,void 0,void 0,e.move),new E(n,i,void 0,void 0,void 0,void 0,e.line),new E(n-a*Math.cos(o-Math.PI/4),i-a*Math.sin(o-Math.PI/4),void 0,void 0,void 0,void 0,e.line),new E(n,i,void 0,void 0,void 0,void 0,e.move),new E(n-a*Math.cos(o+Math.PI/4),i-a*Math.sin(o+Math.PI/4),void 0,void 0,void 0,void 0,e.line)],!1,!1,!0);return h.noFill(),h.cap="round",h.join="round",this.scene.add(h),h},makeRectangle:function(t,e,r,n){var i=new It(t,e,r,n);return this.scene.add(i),i},makeRoundedRectangle:function(t,e,r,n,i){var s=new Xt(t,e,r,n,i);return this.scene.add(s),s},makeCircle:function(t,e,r,n){var i=new Bt(t,e,r,n);return this.scene.add(i),i},makeEllipse:function(t,e,r,n,i){var s=new Ht(t,e,r,n,i);return this.scene.add(s),s},makeStar:function(t,e,r,n,i){var s=new be(t,e,r,n,i);return this.scene.add(s),s},makeCurve:function(t){var e=arguments.length,r=t;if(!Array.isArray(t)){r=[];for(var n=0;n<e;n+=2){var i=arguments[n];if("number"!=typeof i)break;var s=arguments[n+1];r.push(new E(i,s))}}var a=arguments[e-1],o=new Ot(r,!("boolean"==typeof a?a:void 0),!0),h=o.getBoundingClientRect();return o.center().translation.set(h.left+h.width/2,h.top+h.height/2),this.scene.add(o),o},makePolygon:function(t,e,r,n){var i=new ye(t,e,r,n);return this.scene.add(i),i},makeArcSegment:function(t,e,r,n,i,s,a){var o=new de(t,e,r,n,i,s,a);return this.scene.add(o),o},makePath:function(t){var e=arguments.length,r=t;if(!Array.isArray(t)){r=[];for(var n=0;n<e;n+=2){var i=arguments[n];if("number"!=typeof i)break;var s=arguments[n+1];r.push(new E(i,s))}}var a=arguments[e-1],o=new Ot(r,!("boolean"==typeof a?a:void 0)),h=o.getBoundingClientRect();return"number"==typeof h.top&&"number"==typeof h.left&&"number"==typeof h.right&&"number"==typeof h.bottom&&o.center().translation.set(h.left+h.width/2,h.top+h.height/2),this.scene.add(o),o},makeText:function(t,e,r,n){var i=new Jt(t,e,r,n);return this.add(i),i},makeLinearGradient:function(t,e,r,n){var i=Array.prototype.slice.call(arguments,4),s=new bt(t,e,r,n,i);return this.add(s),s},makeRadialGradient:function(t,e,r){var n=Array.prototype.slice.call(arguments,3),i=new wt(t,e,r,n);return this.add(i),i},makeSprite:function(t,e,r,n,i,s,a){var o=new Rt(t,e,r,n,i,s);return a&&o.play(),this.add(o),o},makeImageSequence:function(t,e,r,n,i){var s=new ce(t,e,r,n);return i&&s.play(),this.add(s),s},makeTexture:function(t,e){return new Et(t,e)},makeGroup:function(t){var e=t;e instanceof Array||(e=Array.prototype.slice.call(arguments));var r=new $;return this.scene.add(r),r.add(e),r},interpret:function(t,e,r){var n=t.tagName.toLowerCase();if(r=void 0===r||r,!(n in he))return null;var i=he[n].call(this,t);return r?this.add(e&&i instanceof $?i.children:i):i.parent&&i.remove(),i},load:function(t,e){var r,n,i,s,a=new $,o=function(t){for(dt.temp.innerHTML=t,n=0;n<dt.temp.children.length;n++)if(r=dt.temp.children[n],/svg/i.test(r.nodeName))for(s=this.interpret(r),i=0;i<s.children.length;i++)a.add(s.children[i]);else a.add(this.interpret(r));if("function"==typeof e){var o=dt.temp.children.length<=1?dt.temp.children[0]:dt.temp.children;e(a,o)}}.bind(this);return/.*\.svg/gi.test(t)?(le(t,o),a):(o(t),a)}});var Ie=dt.getRequestAnimationFrame();function Re(){for(var t=0;t<Ae.Instances.length;t++){var e=Ae.Instances[t];e.playing&&e.update()}Ae.nextFrameID=Ie(Re)}Ie.init=function(){Re(),Ie.init=function(){}},g.extend(Ae,{Anchor:E,Collection:X,Events:m,Group:$,Matrix:H,Path:Ot,Registry:_t,Shape:Y,Text:Jt,Vector:x,Gradient:xt,ImageSequence:ce,LinearGradient:bt,RadialGradient:wt,Sprite:Rt,Stop:vt,Texture:Et,ArcSegment:de,Circle:Bt,Ellipse:Ht,Line:Yt,Polygon:ye,Rectangle:It,RoundedRectangle:Xt,Star:be,CanvasRenderer:ct,SVGRenderer:Me,WebGLRenderer:Oe,Commands:e,Utils:g.extend({Error:gt,getRatio:B,defineGetterSetter:yt,read:he,xhr:le},g,ft,j,d)});const ze=Ae;var Le,je=function(){function t(t){this.config=t,t.two.width=t.elements.scene.clientWidth,this.two=new ze(t.two).appendTo(t.elements.scene)}return t.prototype.render=function(t){this.two.add(t)},t.prototype.remove=function(t){this.two.remove(t)},t.prototype.clear=function(){this.two.clear()},t.prototype.update=function(){this.two.update()},t.prototype.setSceneSize=function(){this.two.renderer.setSize(this.config.two.width,this.config.two.height)},t}(),De=function(){this.materials=[],this.sections=[],this.nodes=[],this.elements=[],this.boundaries=[],this.loads=[]},Be=(Le=function(t,e){return(Le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Le(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Ge=function(){function t(){this.highestNodeId=0,this.highestElementId=0,this._nodes=new Map,this._elements=new Map,this._boundaries=new Map,this._loads=new Map,this.sections=[],this.materials=[],this.results={displacements:void 0,innerForces:void 0,reactions:void 0},this._femElements=new Map}return Object.defineProperty(t.prototype,"nodes",{get:function(){return this._nodes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"elements",{get:function(){return this._elements},set:function(t){this._elements=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"boundaries",{get:function(){return this._boundaries},set:function(t){this._boundaries=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loads",{get:function(){return this._loads},set:function(t){this._loads=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"femElements",{get:function(){return this._femElements},enumerable:!1,configurable:!0}),t.prototype.setLoad=function(t,e){this._loads.set(t,e)},t.prototype.setBoundary=function(t,e){this._boundaries.set(t,e)},t.prototype.setNode=function(t){return this.highestNodeId+=1,this._nodes.set(this.highestNodeId,t),this.highestNodeId},t.prototype.deleteNode=function(t){this._nodes.has(t)&&this._nodes.delete(t)},t.prototype.getNode=function(t){return this._nodes.get(t)},t.prototype.setElement=function(t){return this.highestElementId+=1,this._elements.set(this.highestElementId,t),this.highestElementId},t.prototype.setFemElement=function(t,e){this._femElements.set(e,t)},t.prototype.deleteElement=function(t){this._elements.has(t)&&this._elements.delete(t)},t.prototype.getElement=function(t){return this._elements.get(t)},t.prototype.getJsonModel=function(){return function(t){var e=new De;return t.materials.forEach((function(t,r){e.materials.push({id:r,name:t.name,youngsModulus:t.youngsModulus})})),t.sections.forEach((function(t,r){e.sections.push({id:r,name:t.name,area:t.area})})),t.nodes.forEach((function(t,r){e.nodes.push({id:r,x:t.x,y:t.y})})),t.elements.forEach((function(t,r){e.elements.push({id:r,node1Id:t.node1Id,node2Id:t.node2Id,section:t.section,material:t.material})})),t.boundaries.forEach((function(t,r){e.boundaries.push({id:e.boundaries.length+1,nodeId:r,xFixed:t.xFixed,yFixed:t.yFixed})})),t.loads.forEach((function(t,r){e.loads.push({id:e.loads.length+1,nodeId:r,fx:t.fx,fy:t.fy})})),JSON.stringify(e)}(this)},t}(),Ve=function(t,e){this.x=t,this.y=e},qe=function(t,e){this.xFixed=t,this.yFixed=e},Ue=function(t,e){this.fx=t,this.fy=e},He=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Be(e,t),e}(Ue),Ye=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Be(e,t),e}(Ue),Xe=function(t,e){this.name=t,this.youngsModulus=e},We=function(t,e){this.name=t,this.area=e},Ze=function(t,e,r,n){this.node1Id=t,this.node2Id=e,this.section=r,this.material=n},Je=function(t,e){this.dx=t,this.dy=e},$e=function(t,e){this.x=t,this.y=e},Ke=function(){function t(t){this.config=t}return t.prototype.getPointFromModelCoordinateSystem=function(t,e){return new $e(this.getPointXfromNodeX(t),this.getPointYfromNodeY(e))},t.prototype.getPointFromNode=function(t){return new $e(this.getPointXfromNodeX(t.x),this.getPointYfromNodeY(t.y))},t.prototype.getNodeFromPoint=function(t){return new Ve(this.getNodeXfromPointX(t.x),this.getNodeYfromPointY(t.y))},t.prototype.getNodeXfromPointX=function(t){return this.scalePointToNode(t-this.config.translationValue)},t.prototype.getNodeYfromPointY=function(t){return this.scalePointToNode(this.config.two.height-t-this.config.translationValue)},t.prototype.getPointXfromNodeX=function(t){return this.scaleNodeToPoint(t)+this.config.translationValue},t.prototype.getPointYfromNodeY=function(t){return this.config.two.height-(this.scaleNodeToPoint(t)+this.config.translationValue)},t.prototype.scaleNodeToPoint=function(t){return t*this.config.scaleFactor.model},t.prototype.scalePointToNode=function(t){return t/this.config.scaleFactor.model},t}(),Qe=function(){function t(){this.supports=new ze.Group,this.nodes=new ze.Group,this.nodesLabels=new ze.Group,this.elements=new ze.Group,this.elementsLabels=new ze.Group,this.loads=new ze.Group,this.loadsLabels=new ze.Group,this.displacements=new ze.Group,this.displacementsLabels=new ze.Group,this.innerForces=new ze.Group,this.innerForcesLegend=new ze.Group,this.reactions=new ze.Group,this.reactionsLabels=new ze.Group,this.cursor=new ze.Group,this.cursorLabel=new ze.Group,this.other=new ze.Group}return t.prototype.clear=function(){for(var t in this)this[t]instanceof ze.Group&&this.clearChildrenInGroup(this[t])},t.prototype.clearChildrenInGroup=function(t){t.remove(t.children)},t}();const tr=function(){function t(t,e){this.config=t,this.pointBuilder=e}return t.prototype.createNode=function(t){return new ze.Circle(t.x,t.y,this.config.scaleFactor.node)},t.prototype.createElement=function(t,e){var r=new ze.Line(t.x,t.y,e.x,e.y);return r.stroke=this.config.color.element,r},t.prototype.createDisplacedElement=function(t,e){var r=this.createElement(t,e);return r.stroke=this.config.color.displacement,r},t.prototype.createInnerForceElement=function(t,e,r){var n=this.createElement(t,e);return n.stroke=r,n.linewidth=5,n},t.prototype.createSupport=function(t,e,r){if(!1===e&&!1===r)throw"Support has to have at least one direction fixed!";var n;return!0===e&&!0===r?((n=this.createBaseSupport()).translation.set(t.x,t.y),n.stroke=this.config.color.support,n):!1===e&&!0===r?((n=this.createSlidingSupport()).translation.set(t.x,t.y),n.stroke=this.config.color.support,n):!0===e&&!1===r?((n=this.createSlidingSupport()).rotation=Math.PI/2,n.translation.set(t.x,t.y),n.stroke=this.config.color.support,n):void 0},t.prototype.createBaseSupport=function(){var t=new ze.Polygon(0,this.config.scaleFactor.support,this.config.scaleFactor.support);return new ze.Group(t)},t.prototype.createSlidingSupport=function(){var t=this.createBaseSupport(),e=new ze.Line(-1*this.config.scaleFactor.support,2*this.config.scaleFactor.support,1*this.config.scaleFactor.support,2*this.config.scaleFactor.support);return new ze.Group([t,e])},t.prototype.createVerticalLoad=function(t,e){void 0===e&&(e=0);var r=this.createVerticalForce(t,e);return this.setLoadStyle(r),r},t.prototype.createHorizontalLoad=function(t,e){void 0===e&&(e=0);var r=this.createHorizontalForce(t,e);return this.setLoadStyle(r),r},t.prototype.createVerticalReaction=function(t,e){void 0===e&&(e=0);var r=this.createVerticalForce(t,e);return this.setReactionStyle(r),r},t.prototype.createHorizontalReaction=function(t,e){void 0===e&&(e=0);var r=this.createHorizontalForce(t,e);return this.setReactionStyle(r),r},t.prototype.createVerticalForce=function(t,e){void 0===e&&(e=0);var r=this._createForce();return e<0&&(r.rotation=Math.PI),r.translation.set(t.x,t.y),r},t.prototype.createHorizontalForce=function(t,e){void 0===e&&(e=0);var r=this._createForce();return r.rotation=e<0?-Math.PI/2:Math.PI/2,r.translation.set(t.x,t.y),r},t.prototype.setLoadStyle=function(t){t.stroke=this.config.color.load,t.fill=this.config.color.load,t.linewidth=3},t.prototype.setReactionStyle=function(t){t.stroke=this.config.color.reaction,t.fill=this.config.color.reaction,t.linewidth=3},t.prototype._createForce=function(){return new ze.Path([new ze.Anchor(0,2*this.config.scaleFactor.load),new ze.Anchor(0,0),new ze.Anchor(-.1*this.config.scaleFactor.load,.5*this.config.scaleFactor.load),new ze.Anchor(.1*this.config.scaleFactor.load,.5*this.config.scaleFactor.load),new ze.Anchor(0,0)],!0)},t.prototype.createGlobalCoordinateSystemIcon=function(t){var e=new ze.Line(t.x+this.config.scaleFactor.csIcon.icon,t.y,t.x,t.y),r=new ze.Line(t.x,t.y,t.x,t.y-this.config.scaleFactor.csIcon.icon),n=new ze.Text("x",t.x+this.config.scaleFactor.csIcon.icon+this.config.scaleFactor.csIcon.textOffset,t.y),i=new ze.Text("y",t.x,t.y-(this.config.scaleFactor.csIcon.icon+this.config.scaleFactor.csIcon.textOffset)),s=new ze.Group([e,r,n,i]);return s.stroke="red",s},t.prototype.createDimensions=function(){for(var t=[],e=0;e<=20;)t.push(this._createDimensionX(e.toFixed(1),this.pointBuilder.getPointFromModelCoordinateSystem(e,0))),e+=5;for(e=0;e<=5;)t.push(this._createDimensionY(e.toFixed(1),this.pointBuilder.getPointFromModelCoordinateSystem(0,e))),e+=5;return new ze.Group(t)},t.prototype._createDimensionX=function(t,e){var r=this.config.two.height,n=new ze.Line(e.x,r-15,e.x,r-30),i=new ze.Text(t,e.x,r-5);return new ze.Group([n,i])},t.prototype._createDimensionY=function(t,e){var r=new ze.Line(30,e.y,45,e.y),n=new ze.Text(t,15,e.y);return new ze.Group([r,n])},t.prototype.createBorder=function(){var t=[],e=this.config.two.width,r=this.config.two.height;return t.push(new ze.Line(0,0,e,0)),t.push(new ze.Line(e,0,e,r)),t.push(new ze.Line(0,r,e,r)),t.push(new ze.Line(0,r,0,0)),new ze.Group(t)},t.prototype.createNodeLabel=function(t,e){return this._createLabel(t,e.toString())},t.prototype.createElementLabel=function(t,e,r){var n={x:(t.x+e.x)/2,y:(t.y+e.y)/2},i=new ze.Circle(n.x-0,n.y-0,10),s=new ze.Text(r,n.x,n.y);return i.noStroke(),i.fill="#f6fbff",new ze.Group([i,s])},t.prototype.createLoadLabel=function(t,e,r){var n=this._createLabel(t,"("+e/1e3+", "+r/1e3+") [kN]");return this.styleLoadLabel(n),n},t.prototype.createReactionLabel=function(t,e,r){var n=this._createLabel(t,"("+(e/1e3).toFixed(1)+", "+(r/1e3).toFixed(1)+") [kN]");return this.styleReactionLabel(n),n},t.prototype.styleLoadLabel=function(t){t.stroke=this.config.color.load,t.alignment="left",t.position.y-=2*this.config.scaleFactor.nodeTextOffset},t.prototype.styleReactionLabel=function(t){t.stroke=this.config.color.reaction,t.alignment="left",t.position.y+=3*this.config.scaleFactor.nodeTextOffset},t.prototype.createDisplacementLabel=function(t,e,r){t.x+=e*this.config.scaleFactor.displacements,t.y-=r*this.config.scaleFactor.displacements;var n=this._createLabel(t,"("+Math.round(1e4*e)/10+", "+Math.round(1e4*r)/10+")");return n.stroke=this.config.color.displacement,n},t.prototype.createCursor=function(){var t=new ze.Group,e=this.config.scaleFactor.cursor;return t.add(new ze.Line(-e,0,-e/2,0)),t.add(new ze.Line(0,e,0,e/2)),t.add(new ze.Line(e/2,0,e,0)),t.add(new ze.Line(0,-e/2,0,-e)),t},t.prototype.createCursorLabel=function(){var t=this.config.two.height-10,e=this._createLabel(new $e(10,t),this.config.cursor.message);return e.alignment="left",e.stroke="blue",new ze.Group(e)},t.prototype._createLabel=function(t,e){return new ze.Text(e,t.x+this.config.scaleFactor.nodeTextOffset,t.y-this.config.scaleFactor.nodeTextOffset)},t.prototype.createInnerForceLegend=function(t,e){var r=new ze.Text("LEGEND:",0,-115);r.stroke="blue";var n=new ze.Text((t/1e3).toFixed(1)+" kN",0,-95),i=new ze.Text((e/1e3).toFixed(1)+" kN",0,95),s="rgb(0, 255, 255)",a="rgb(255, 0, 0)";n.stroke=s,i.stroke=a;var o=new ze.Rectangle(0,0,50,150),h=new ze.LinearGradient(0,-75,0,75,[new ze.Stop(0,s),new ze.Stop(1,a)]);return o.fill=h,o.noStroke(),new ze.Group([r,n,i,o])},t}();var er=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,s=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return a};const rr=function(){function t(){}return t.setDisplacementsScaleFactor=function(e,r){var n=t.getMaxAbsDisplacementValue(e);r.scaleFactor.displacements=t.maxDisplacementSizeInPx/n},t.getMaxAbsDisplacementValue=function(t){var e=0;return t.forEach((function(t){e<Math.abs(t.dx)&&(e=Math.abs(t.dx)),e<Math.abs(t.dy)&&(e=Math.abs(t.dy))})),e},t.setExtremalAxialForces=function(t,e){var r,n,i={max:0,min:0};try{for(var s=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),a=s.next();!a.done;a=s.next()){var o=er(a.value,2),h=(o[0],o[1]);h>i.max&&(i.max=h),h<i.min&&(i.min=h)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}e.results.axialForce=i},t.getInnerForceRgbColor=function(e,r){var n=r.max,i=r.min,s=255/(n-i)*(e-i),a=255-s;return t.getRgbStringFromNumbers(a.toFixed(1),s.toFixed(1),s.toFixed(1))},t.getRgbStringFromNumbers=function(t,e,r){return"rgb("+t+", "+e+", "+r+")"},t.maxDisplacementSizeInPx=50,t}(),nr=function(){function t(t){this.config=t,this.pointBuilder=new Ke(this.config),this.renderer=new je(this.config),this.rendererGroups=new Qe,this.sceneShapesCreator=new tr(this.config,this.pointBuilder),this.sceneNodeIdToNodeId=new Map,this.sceneElementIdToElementId=new Map}return t.prototype.resizeScene=function(){this.renderer.setSceneSize()},t.prototype.setNodes=function(t){var e=this;t.forEach((function(t,r){e.setNode(t,r)}))},t.prototype.setElements=function(t,e){var r=this;t.forEach((function(t,n){var i=e.get(t.node1Id),s=e.get(t.node2Id);r.setElement(n,i,s)}))},t.prototype.setSupports=function(t,e){var r=this;t.forEach((function(t,n){r.setSupport(t,e.get(n))}))},t.prototype.setLoads=function(t,e){var r=this;t.forEach((function(t,n){r.setLoad(t,e.get(n))}))},t.prototype.setReactions=function(t,e){var r=this;t.forEach((function(t,n){r.setReaction(t,e.get(n))}))},t.prototype.setDisplacements=function(t,e,r){var n=this;t.forEach((function(t){var i=r.get(t.node1Id),s=r.get(t.node2Id),a=n.pointBuilder.getPointFromNode(i),o=n.pointBuilder.getPointFromNode(s),h=e.get(t.node1Id),l=e.get(t.node2Id),c=n.getDisplacedPoint(a,h),u=n.getDisplacedPoint(o,l),f=n.sceneShapesCreator.createDisplacedElement(c,u);n.rendererGroups.displacements.add(f)})),r.forEach((function(t,r){var i=e.get(r);n.setDisplacementLabel(i,t)}))},t.prototype.clearResults=function(){this.rendererGroups.displacements.remove(this.rendererGroups.displacements.children),this.rendererGroups.innerForces.remove(this.rendererGroups.innerForces.children),this.rendererGroups.innerForcesLegend.remove(this.rendererGroups.innerForcesLegend.children),this.rendererGroups.displacementsLabels.remove(this.rendererGroups.displacementsLabels.children),this.rendererGroups.reactions.remove(this.rendererGroups.reactions.children),this.rendererGroups.reactionsLabels.remove(this.rendererGroups.reactionsLabels.children)},t.prototype.setInnerForces=function(t,e,r){var n=this;rr.setExtremalAxialForces(e,this.config),t.forEach((function(t,i){var s=r.get(t.node1Id),a=r.get(t.node2Id),o=e.get(i),h=rr.getInnerForceRgbColor(o,n.config.results.axialForce);n.setInnerForceElement(s,a,h)}))},t.prototype.setInnerForceElement=function(t,e,r){var n=this.pointBuilder.getPointFromNode(t),i=this.pointBuilder.getPointFromNode(e),s=this.sceneShapesCreator.createInnerForceElement(n,i,r);this.rendererGroups.innerForces.add(s),this.renderer.update()},t.prototype.setNode=function(t,e){var r=this.pointBuilder.getPointFromNode(t),n=this.sceneShapesCreator.createNode(r);this.rendererGroups.nodes.add(n),this.sceneNodeIdToNodeId.set(n.id,e),this.setNodeLabel(t,e),this.renderer.update()},t.prototype.setElement=function(t,e,r){var n=this.pointBuilder.getPointFromNode(e),i=this.pointBuilder.getPointFromNode(r),s=this.sceneShapesCreator.createElement(n,i);this.rendererGroups.elements.add(s),this.sceneElementIdToElementId.set(s.id,t),this.setElementLabel(t,e,r),this.renderer.update()},t.prototype.setSupport=function(t,e){var r=this.pointBuilder.getPointFromNode(e),n=this.sceneShapesCreator.createSupport(r,t.xFixed,t.yFixed);this.rendererGroups.supports.add(n),this.renderer.update()},t.prototype.setLoad=function(t,e){var r=this.pointBuilder.getPointFromNode(e);if(t.fx){var n=this.sceneShapesCreator.createHorizontalLoad(r,t.fx);this.rendererGroups.loads.add(n)}t.fy&&(n=this.sceneShapesCreator.createVerticalLoad(r,t.fy),this.rendererGroups.loads.add(n)),this.setLoadLabel(t,e),this.renderer.update()},t.prototype.setReaction=function(t,e){var r=this.pointBuilder.getPointFromNode(e);if(t.fx){var n=this.sceneShapesCreator.createHorizontalReaction(r,t.fx);this.rendererGroups.reactions.add(n)}t.fy&&(n=this.sceneShapesCreator.createVerticalReaction(r,t.fy),this.rendererGroups.reactions.add(n)),this.setReactionLabel(t,e),this.renderer.update()},t.prototype.setCoordinateSystemIcon=function(){var t=this.pointBuilder.getPointFromNode(new Ve(0,0)),e=this.sceneShapesCreator.createGlobalCoordinateSystemIcon(t);this.rendererGroups.other.add(e),this.renderer.update()},t.prototype.setDimensions=function(){var t=this.sceneShapesCreator.createDimensions();this.rendererGroups.other.add(t),this.renderer.update()},t.prototype.setBorder=function(){var t=this.sceneShapesCreator.createBorder();this.rendererGroups.other.add(t),this.renderer.update()},t.prototype.setNodeLabel=function(t,e){var r=this.pointBuilder.getPointFromNode(t),n=this.sceneShapesCreator.createNodeLabel(r,e);this.rendererGroups.nodesLabels.add(n),this.renderer.update()},t.prototype.setElementLabel=function(t,e,r){var n=this.pointBuilder.getPointFromNode(e),i=this.pointBuilder.getPointFromNode(r),s=this.sceneShapesCreator.createElementLabel(n,i,t);this.rendererGroups.elementsLabels.add(s),this.renderer.update()},t.prototype.setLoadLabel=function(t,e){var r=this.pointBuilder.getPointFromNode(e),n=this.sceneShapesCreator.createLoadLabel(r,t.fx,t.fy);this.rendererGroups.loadsLabels.add(n),this.renderer.update()},t.prototype.setReactionLabel=function(t,e){var r=this.pointBuilder.getPointFromNode(e),n=this.sceneShapesCreator.createReactionLabel(r,t.fx,t.fy);this.rendererGroups.reactionsLabels.add(n),this.renderer.update()},t.prototype.setDisplacementLabel=function(t,e){var r=this.pointBuilder.getPointFromNode(e),n=this.sceneShapesCreator.createDisplacementLabel(r,t.dx,t.dy);this.rendererGroups.displacementsLabels.add(n),this.renderer.update()},t.prototype.getDisplacedPoint=function(t,e){return t.x+=e.dx*this.config.scaleFactor.displacements,t.y-=e.dy*this.config.scaleFactor.displacements,t},t.prototype.render=function(){this.renderer.clear(),this.config.isVisible.supports&&this.renderer.render(this.rendererGroups.supports),this.config.isVisible.elements&&(this.renderer.render(this.rendererGroups.elements),this.config.isVisible.labels.all&&this.renderer.render(this.rendererGroups.elementsLabels)),this.config.isVisible.nodes&&(this.renderer.render(this.rendererGroups.nodes),this.config.isVisible.labels.all&&this.renderer.render(this.rendererGroups.nodesLabels)),this.config.isVisible.loads&&(this.renderer.render(this.rendererGroups.loads),this.config.isVisible.labels.all&&this.renderer.render(this.rendererGroups.loadsLabels)),this.config.isVisible.results.displacements&&(this.renderer.render(this.rendererGroups.displacements),this.renderer.render(this.rendererGroups.displacementsLabels)),this.config.isVisible.results.innerForces&&(this.renderer.render(this.rendererGroups.innerForces),this.renderer.render(this.rendererGroups.innerForcesLegend)),this.config.isVisible.results.reactions&&(this.renderer.render(this.rendererGroups.reactions),this.renderer.render(this.rendererGroups.reactionsLabels)),this.renderer.render(this.rendererGroups.other),this.renderer.render(this.rendererGroups.cursor),this.renderer.render(this.rendererGroups.cursorLabel),this.renderer.update(),this.config.elements.two.nodes=this.rendererGroups.nodes._renderer.elem},t.prototype.clearSceneObjects=function(){this.rendererGroups.clear()},t.prototype.remove=function(t){this.renderer.remove(t)},t.prototype.setCursor=function(){var t=this.sceneShapesCreator.createCursor(),e=this.sceneShapesCreator.createCursorLabel();this.rendererGroups.cursor=t,this.rendererGroups.cursorLabel=e},t.prototype.moveCursor=function(t,e){var r=this.pointBuilder.getPointFromModelCoordinateSystem(t,e);this.rendererGroups.cursor.position.x=r.x,this.rendererGroups.cursor.position.y=r.y,this.renderer.update()},t.prototype.updateCursorPositionLabel=function(){this.rendererGroups.cursorLabel.children[0].value=this.config.cursor.message,this.renderer.update()},t.prototype.getNodePositionFromCursorPosition=function(e,r){var n=this.pointBuilder.getNodeFromPoint(new $e(e,r));return n.x=t.roundToNearest(n.x,1),n.y=t.roundToNearest(n.y,1),n},t.prototype.highlightNode=function(t){this.rendererGroups.nodes.getById(t).fill="blue",this.renderer.update()},t.prototype.unHighlightNode=function(t){this.rendererGroups.nodes.getById(t).fill="white",this.renderer.update()},t.prototype.setInnerForceLegend=function(){var t=this.config.results.axialForce,e=t.max,r=t.min,n=this.sceneShapesCreator.createInnerForceLegend(e,r);this.rendererGroups.innerForcesLegend.add(n),this.setInnerForcesLegendPosition()},t.prototype.setInnerForcesLegendPosition=function(){this.rendererGroups.innerForcesLegend.children.length>0&&(this.rendererGroups.innerForcesLegend.children[0].position.x=this.config.two.width-100,this.rendererGroups.innerForcesLegend.children[0].position.y=this.config.two.height-125,this.renderer.update())},t.roundToNearest=function(t,e){return Math.round(t/e)*e},t}();var ir;!function(t){t.Node="node",t.Element="element",t.Support="support",t.Load="load",t.Select="select",t.Delete="delete"}(ir||(ir={}));var sr={elements:null,two:{width:void 0,height:600,autostart:!1,fitted:!1},scaleFactor:{model:25,support:20,load:40,node:7.5,nodeTextOffset:10,csIcon:{icon:40,textOffset:10},cursor:20,displacements:1},color:{node:"",element:"blue",load:"brown",displacement:"red",support:"green",reaction:"green"},translationValue:150,screenScalingFactor:.9,mode:{name:ir.Node,toolbox:void 0,state:{createElement:{selectedNodeId:void 0,secondNode:void 0,currentSection:new We("HEA 100",.00212),currentMaterial:new Xe("Steel",21e10)}}},selected:void 0,isVisible:{nodes:!0,elements:!0,supports:!0,loads:!0,labels:{all:!0},results:{displacements:!1,innerForces:!1,reactions:!1}},cursor:{snap:{active:!0,spacing:1},position:{x:0,y:0},message:"0.00, 0.00"},results:{axialForce:{max:void 0,min:void 0}}};function ar(){return(ar=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var or={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null},hr=function(t){if(t)throw new Error("The global config is readonly. \nPlease create a mathjs instance if you want to change the default configuration. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.config({ number: 'BigNumber' });\n");return Object.freeze(or)};ar(hr,or,{MATRIX_OPTIONS:["Matrix","Array"],NUMBER_OPTIONS:["number","BigNumber","Fraction"]});var lr=r(776);function cr(t){return"number"==typeof t}function ur(t){return!(!t||"object"!=typeof t||"function"!=typeof t.constructor)&&(!0===t.isBigNumber&&"object"==typeof t.constructor.prototype&&!0===t.constructor.prototype.isBigNumber||"function"==typeof t.constructor.isDecimal&&!0===t.constructor.isDecimal(t))}function fr(t){return t&&"object"==typeof t&&!0===Object.getPrototypeOf(t).isComplex||!1}function dr(t){return t&&"object"==typeof t&&!0===Object.getPrototypeOf(t).isFraction||!1}function pr(t){return t&&!0===t.constructor.prototype.isUnit||!1}function gr(t){return"string"==typeof t}var mr=Array.isArray;function yr(t){return t&&!0===t.constructor.prototype.isMatrix||!1}function _r(t){return Array.isArray(t)||yr(t)}function vr(t){return t&&t.isDenseMatrix&&!0===t.constructor.prototype.isMatrix||!1}function xr(t){return t&&t.isSparseMatrix&&!0===t.constructor.prototype.isMatrix||!1}function br(t){return t&&!0===t.constructor.prototype.isRange||!1}function wr(t){return t&&!0===t.constructor.prototype.isIndex||!1}function Mr(t){return"boolean"==typeof t}function Er(t){return t&&!0===t.constructor.prototype.isResultSet||!1}function Sr(t){return t&&!0===t.constructor.prototype.isHelp||!1}function Nr(t){return"function"==typeof t}function kr(t){return t instanceof Date}function Fr(t){return t instanceof RegExp}function Or(t){return!(!t||"object"!=typeof t||t.constructor!==Object||fr(t)||dr(t))}function Ar(t){return null===t}function Tr(t){return void 0===t}function Cr(t){return t&&!0===t.isAccessorNode&&!0===t.constructor.prototype.isNode||!1}function Pr(t){return t&&!0===t.isArrayNode&&!0===t.constructor.prototype.isNode||!1}function Ir(t){return t&&!0===t.isAssignmentNode&&!0===t.constructor.prototype.isNode||!1}function Rr(t){return t&&!0===t.isBlockNode&&!0===t.constructor.prototype.isNode||!1}function zr(t){return t&&!0===t.isConditionalNode&&!0===t.constructor.prototype.isNode||!1}function Lr(t){return t&&!0===t.isConstantNode&&!0===t.constructor.prototype.isNode||!1}function jr(t){return t&&!0===t.isFunctionAssignmentNode&&!0===t.constructor.prototype.isNode||!1}function Dr(t){return t&&!0===t.isFunctionNode&&!0===t.constructor.prototype.isNode||!1}function Br(t){return t&&!0===t.isIndexNode&&!0===t.constructor.prototype.isNode||!1}function Gr(t){return t&&!0===t.isNode&&!0===t.constructor.prototype.isNode||!1}function Vr(t){return t&&!0===t.isObjectNode&&!0===t.constructor.prototype.isNode||!1}function qr(t){return t&&!0===t.isOperatorNode&&!0===t.constructor.prototype.isNode||!1}function Ur(t){return t&&!0===t.isParenthesisNode&&!0===t.constructor.prototype.isNode||!1}function Hr(t){return t&&!0===t.isRangeNode&&!0===t.constructor.prototype.isNode||!1}function Yr(t){return t&&!0===t.isSymbolNode&&!0===t.constructor.prototype.isNode||!1}function Xr(t){return t&&!0===t.constructor.prototype.isChain||!1}function Wr(t){var e=typeof t;return"object"===e?null===t?"null":Array.isArray(t)?"Array":t instanceof Date?"Date":t instanceof RegExp?"RegExp":ur(t)?"BigNumber":fr(t)?"Complex":dr(t)?"Fraction":yr(t)?"Matrix":pr(t)?"Unit":wr(t)?"Index":br(t)?"Range":Er(t)?"ResultSet":Gr(t)?t.type:Xr(t)?"Chain":Sr(t)?"Help":"Object":"function"===e?"Function":e}function Zr(t){var e=typeof t;if("number"===e||"string"===e||"boolean"===e||null==t)return t;if("function"==typeof t.clone)return t.clone();if(Array.isArray(t))return t.map((function(t){return Zr(t)}));if(t instanceof Date)return new Date(t.valueOf());if(ur(t))return t;if(t instanceof RegExp)throw new TypeError("Cannot clone "+t);return function(t,e){var r={};for(var n in t)$r(t,n)&&(r[n]=e(t[n]));return r}(t,Zr)}function Jr(t,e){var r,n,i;if(Array.isArray(t)){if(!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(n=0,i=t.length;n<i;n++)if(!Jr(t[n],e[n]))return!1;return!0}if("function"==typeof t)return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(r in t)if(!(r in e)||!Jr(t[r],e[r]))return!1;for(r in e)if(!(r in t))return!1;return!0}return t===e}function $r(t,e){return t&&Object.hasOwnProperty.call(t,e)}function Kr(t,e,r,n){function i(n){var i=function(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n],s=t[i];void 0!==s&&(r[i]=s)}return r}(n,e.map(Qr));return function(t,e,r){if(!e.filter((t=>!function(t){return t&&"?"===t[0]}(t))).every((t=>void 0!==r[t]))){var n=e.filter((t=>void 0===r[t]));throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(n.map((t=>'"'.concat(t,'"'))).join(", "),"."))}}(t,e,n),r(i)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function Qr(t){return t&&"?"===t[0]?t.slice(1):t}var tn=Kr("BigNumber",["?on","config"],(t=>{var{on:e,config:r}=t,n=lr.clone({precision:r.precision,modulo:lr.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(t){return new n(t.value)},e&&e("config",(function(t,e){t.precision!==e.precision&&n.config({precision:t.precision})})),n}),{isClass:!0}),en=r(977);function rn(t){return"boolean"==typeof t||!!isFinite(t)&&t===Math.round(t)}Math.sign,Math.log2,Math.log10,Math.log1p,Math.cbrt,Math.expm1;function nn(t,e,r){var n={2:"0b",8:"0o",16:"0x"}[e],i="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!rn(r))throw new Error("size must be an integer");if(t>2**(r-1)-1||t<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!rn(t))throw new Error("Value must be an integer");t<0&&(t+=2**r),i="i".concat(r)}var s="";return t<0&&(t=-t,s="-"),"".concat(s).concat(n).concat(t.toString(e)).concat(i)}function sn(t,e){if("function"==typeof e)return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var r,n,i="auto";if(e&&(e.notation&&(i=e.notation),cr(e)?r=e:cr(e.precision)&&(r=e.precision),e.wordSize&&"number"!=typeof(n=e.wordSize)))throw new Error('Option "wordSize" must be a number');switch(i){case"fixed":return on(t,r);case"exponential":return hn(t,r);case"engineering":return function(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=ln(an(t),e),n=r.exponent,i=r.coefficients,s=n%3==0?n:n<0?n-3-n%3:n-n%3;if(cr(e))for(;e>i.length||n-s+1>i.length;)i.push(0);else for(var a=Math.abs(n-s)-(i.length-1),o=0;o<a;o++)i.push(0);for(var h=Math.abs(n-s),l=1;h>0;)l++,h--;var c=i.slice(l).join(""),u=cr(e)&&c.length||c.match(/[1-9]/)?"."+c:"",f=i.slice(0,l).join("")+u+"e"+(n>=0?"+":"")+s.toString();return r.sign+f}(t,r);case"bin":return nn(t,2,n);case"oct":return nn(t,8,n);case"hex":return nn(t,16,n);case"auto":return function(t,e,r){if(isNaN(t)||!isFinite(t))return String(t);var n=r&&void 0!==r.lowerExp?r.lowerExp:-3,i=r&&void 0!==r.upperExp?r.upperExp:5,s=an(t),a=e?ln(s,e):s;if(a.exponent<n||a.exponent>=i)return hn(t,e);var o=a.coefficients,h=a.exponent;o.length<e&&(o=o.concat(cn(e-o.length))),o=o.concat(cn(h-o.length+1+(o.length<e?e-o.length:0)));var l=h>0?h:0;return l<(o=cn(-h).concat(o)).length-1&&o.splice(l+1,0,"."),a.sign+o.join("")}(t,r,e&&e).replace(/((\.\d*?)(0+))($|e)/,(function(){var t=arguments[2],e=arguments[4];return"."!==t?t+e:e}));default:throw new Error('Unknown notation "'+i+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function an(t){var e=String(t).toLowerCase().match(/^0*?(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var r=e[1],n=e[2],i=parseFloat(e[4]||"0"),s=n.indexOf(".");i+=-1!==s?s-1:n.length-1;var a=n.replace(".","").replace(/^0*/,(function(t){return i-=t.length,""})).replace(/0*$/,"").split("").map((function(t){return parseInt(t)}));return 0===a.length&&(a.push(0),i++),{sign:r,coefficients:a,exponent:i}}function on(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=an(t),n="number"==typeof e?ln(r,r.exponent+1+e):r,i=n.coefficients,s=n.exponent+1,a=s+(e||0);return i.length<a&&(i=i.concat(cn(a-i.length))),s<0&&(i=cn(1-s).concat(i),s=1),s<i.length&&i.splice(s,0,0===s?"0.":"."),n.sign+i.join("")}function hn(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=an(t),n=e?ln(r,e):r,i=n.coefficients,s=n.exponent;i.length<e&&(i=i.concat(cn(e-i.length)));var a=i.shift();return n.sign+a+(i.length>0?"."+i.join(""):"")+"e"+(s>=0?"+":"")+s}function ln(t,e){for(var r={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},n=r.coefficients;e<=0;)n.unshift(0),r.exponent++,e++;if(n.length>e&&n.splice(e,n.length-e)[0]>=5){var i=e-1;for(n[i]++;10===n[i];)n.pop(),0===i&&(n.unshift(0),r.exponent++,i++),n[--i]++}return r}function cn(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}var un=Number.EPSILON||2220446049250313e-31;function fn(t,e,r){if(null==r)return t===e;if(t===e)return!0;if(isNaN(t)||isNaN(e))return!1;if(isFinite(t)&&isFinite(e)){var n=Math.abs(t-e);return n<un||n<=Math.max(Math.abs(t),Math.abs(e))*r}return!1}Math.acosh,Math.asinh,Math.atanh,Math.cosh,Math.sinh;var dn=(Math.tanh,Kr("Complex",[],(()=>(en.prototype.type="Complex",en.prototype.isComplex=!0,en.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},en.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},en.prototype.format=function(t){var e=this.im,r=this.re,n=sn(this.re,t),i=sn(this.im,t),s=cr(t)?t:t?t.precision:null;if(null!==s){var a=Math.pow(10,-s);Math.abs(r/e)<a&&(r=0),Math.abs(e/r)<a&&(e=0)}return 0===e?n:0===r?1===e?"i":-1===e?"-i":i+"i":e<0?-1===e?n+" - i":n+" - "+i.substring(1)+"i":1===e?n+" + i":n+" + "+i+"i"},en.fromPolar=function(t){switch(arguments.length){case 1:var e=arguments[0];if("object"==typeof e)return en(e);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var r=arguments[0],n=arguments[1];if(cr(r)){if(pr(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),cr(n))return new en({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},en.prototype.valueOf=en.prototype.toString,en.fromJSON=function(t){return new en(t)},en.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},en)),{isClass:!0}));function pn(t){var e=0,r=1,n=Object.create(null),i=Object.create(null),s=0,a=function(t){var a=i[t];if(a&&(delete n[a],delete i[t],--e,r===a)){if(!e)return s=0,void(r=1);for(;!hasOwnProperty.call(n,++r););}};return t=Math.abs(t),{hit:function(o){var h=i[o],l=++s;if(n[l]=o,i[o]=l,!h){if(++e<=t)return;return o=n[r],a(o),o}if(delete n[h],r===h)for(;!hasOwnProperty.call(n,++r););},delete:a,clear:function(){e=s=0,r=1,n=Object.create(null),i=Object.create(null)}}}function gn(t){var{hasher:e,limit:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r=null==r?Number.POSITIVE_INFINITY:r,e=null==e?JSON.stringify:e,function n(){"object"!=typeof n.cache&&(n.cache={values:new Map,lru:pn(r||Number.POSITIVE_INFINITY)});for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var a=e(i);if(n.cache.values.has(a))return n.cache.lru.hit(a),n.cache.values.get(a);var o=t.apply(t,i);return n.cache.values.set(a,o),n.cache.values.delete(n.cache.lru.hit(a)),o}}gn((function(t){return new t(1).exp()}),{hasher:yn}),gn((function(t){return new t(1).plus(new t(5).sqrt()).div(2)}),{hasher:yn});var mn=gn((function(t){return t.acos(-1)}),{hasher:yn});function yn(t){return t[0].precision}function _n(t,e){return Kr(t,["config","BigNumber"],(t=>{var{config:r,BigNumber:n}=t;return"BigNumber"===r.number?new n(e):e}))}gn((function(t){return mn(t).times(2)}),{hasher:yn}),Math.PI,Math.PI,Math.E,_n("fineStructure",.0072973525693),_n("weakMixingAngle",.2229),_n("efimovFactor",22.7),_n("sackurTetrode",-1.16487052358);var vn=r(628),xn=Kr("Fraction",[],(()=>(vn.prototype.type="Fraction",vn.prototype.isFraction=!0,vn.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},vn.fromJSON=function(t){return new vn(t)},vn)),{isClass:!0}),bn=Kr("Matrix",[],(()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(t,e){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(t,e,r){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(t,e,r){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(t,e){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(t,e){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(t,e){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t}),{isClass:!0});function wn(t,e,r){var n=new(0,t.constructor)(2),i="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!rn(r))throw new Error("size must be an integer");if(t.greaterThan(n.pow(r-1).sub(1))||t.lessThan(n.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(n.pow(r))),i="i".concat(r)}switch(e){case 2:return"".concat(t.toBinary()).concat(i);case 8:return"".concat(t.toOctal()).concat(i);case 16:return"".concat(t.toHexadecimal()).concat(i);default:throw new Error("Base ".concat(e," not supported "))}}function Mn(t,e){return void 0!==e?t.toExponential(e-1):t.toExponential()}function En(t,e){return"number"==typeof t?sn(t,e):ur(t)?function(t,e){if("function"==typeof e)return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var r,n,i="auto";if(void 0!==e&&(e.notation&&(i=e.notation),"number"==typeof e?r=e:e.precision&&(r=e.precision),e.wordSize&&"number"!=typeof(n=e.wordSize)))throw new Error('Option "wordSize" must be a number');switch(i){case"fixed":return function(t,e){return t.toFixed(e)}(t,r);case"exponential":return Mn(t,r);case"engineering":return function(t,e){var r=t.e,n=r%3==0?r:r<0?r-3-r%3:r-r%3,i=t.mul(Math.pow(10,-n)),s=i.toPrecision(e);return-1!==s.indexOf("e")&&(s=i.toString()),s+"e"+(r>=0?"+":"")+n.toString()}(t,r);case"bin":return wn(t,2,n);case"oct":return wn(t,8,n);case"hex":return wn(t,16,n);case"auto":var s=e&&void 0!==e.lowerExp?e.lowerExp:-3,a=e&&void 0!==e.upperExp?e.upperExp:5;if(t.isZero())return"0";var o=t.toSignificantDigits(r),h=o.e;return(h>=s&&h<a?o.toFixed():Mn(t,r)).replace(/((\.\d*?)(0+))($|e)/,(function(){var t=arguments[2],e=arguments[4];return"."!==t?t+e:e}));default:throw new Error('Unknown notation "'+i+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}(t,e):function(t){return t&&"object"==typeof t&&"number"==typeof t.s&&"number"==typeof t.n&&"number"==typeof t.d||!1}(t)?e&&"decimal"===e.fraction?t.toString():t.s*t.n+"/"+t.d:Array.isArray(t)?Sn(t,e):gr(t)?'"'+t+'"':"function"==typeof t?t.syntax?String(t.syntax):"function":t&&"object"==typeof t?"function"==typeof t.format?t.format(e):t&&t.toString(e)!=={}.toString()?t.toString(e):"{"+Object.keys(t).map((r=>'"'+r+'": '+En(t[r],e))).join(", ")+"}":String(t)}function Sn(t,e){if(Array.isArray(t)){for(var r="[",n=t.length,i=0;i<n;i++)0!==i&&(r+=", "),r+=Sn(t[i],e);return r+"]"}return En(t,e)}function Nn(t,e,r){if(!(this instanceof Nn))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=(new Error).stack}function kn(t,e,r){if(!(this instanceof kn))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),void 0!==this.min&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=(new Error).stack}function Fn(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function On(t,e,r){var n,i=t.length;if(i!==e[r])throw new Nn(i,e[r]);if(r<e.length-1){var s=r+1;for(n=0;n<i;n++){var a=t[n];if(!Array.isArray(a))throw new Nn(e.length-1,e.length,"<");On(t[n],e,s)}}else for(n=0;n<i;n++)if(Array.isArray(t[n]))throw new Nn(e.length+1,e.length,">")}function An(t,e){if(0===e.length){if(Array.isArray(t))throw new Nn(t.length,0)}else On(t,e,0)}function Tn(t,e){if(!cr(t)||!rn(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||"number"==typeof e&&t>=e)throw new kn(t,e)}function Cn(t,e,r){if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(0===e.length)throw new Error("Resizing to scalar is not supported");return e.forEach((function(t){if(!cr(t)||!rn(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+En(e)+")")})),Pn(t,e,0,void 0!==r?r:0),t}function Pn(t,e,r,n){var i,s,a=t.length,o=e[r],h=Math.min(a,o);if(t.length=o,r<e.length-1){var l=r+1;for(i=0;i<h;i++)s=t[i],Array.isArray(s)||(s=[s],t[i]=s),Pn(s,e,l,n);for(i=h;i<o;i++)s=[],t[i]=s,Pn(s,e,l,n)}else{for(i=0;i<h;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=h;i<o;i++)t[i]=n}}function In(t,e){var r=function(t){if(!Array.isArray(t))return t;var e=[];return t.forEach((function t(r){Array.isArray(r)?r.forEach(t):e.push(r)})),e}(t),n=r.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(0===e.length)throw new Nn(0,n,"!=");var i=zn(e=Rn(e,n));if(n!==i)throw new Nn(i,n,"!=");try{return function(t,e){for(var r,n=t,i=e.length-1;i>0;i--){var s=e[i];r=[];for(var a=n.length/s,o=0;o<a;o++)r.push(n.slice(o*s,(o+1)*s));n=r}return n}(r,e)}catch(t){if(t instanceof Nn)throw new Nn(i,n,"!=");throw t}}function Rn(t,e){var r=zn(t),n=t.slice(),i=t.indexOf(-1);if(t.indexOf(-1,i+1)>=0)throw new Error("More than one wildcard in sizes");if(i>=0){if(e%r!=0)throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-r);n[i]=-e/r}return n}function zn(t){return t.reduce(((t,e)=>t*e),1)}function Ln(t,e,r,n){var i=n||Fn(t);if(r)for(var s=0;s<r;s++)t=[t],i.unshift(1);for(t=jn(t,e,0);i.length<e;)i.push(1);return t}function jn(t,e,r){var n,i;if(Array.isArray(t)){var s=r+1;for(n=0,i=t.length;n<i;n++)t[n]=jn(t[n],e,s)}else for(var a=r;a<e;a++)t=[t];return t}function Dn(t,e){for(var r,n=0,i=0;i<t.length;i++){var s=t[i],a=Array.isArray(s);if(0===i&&a&&(n=s.length),a&&s.length!==n)return;var o=a?Dn(s,e):e(s);if(void 0===r)r=o;else if(r!==o)return"mixed"}return r}Nn.prototype=new RangeError,Nn.prototype.constructor=RangeError,Nn.prototype.name="DimensionError",Nn.prototype.isDimensionError=!0,kn.prototype=new RangeError,kn.prototype.constructor=RangeError,kn.prototype.name="IndexError",kn.prototype.isIndexError=!0;var Bn=Kr("DenseMatrix",["Matrix"],(t=>{var{Matrix:e}=t;function r(t,e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(e&&!gr(e))throw new Error("Invalid datatype: "+e);if(yr(t))"DenseMatrix"===t.type?(this._data=Zr(t._data),this._size=Zr(t._size),this._datatype=e||t._datatype):(this._data=t.toArray(),this._size=t.size(),this._datatype=e||t._datatype);else if(t&&mr(t.data)&&mr(t.size))this._data=t.data,this._size=t.size,An(this._data,this._size),this._datatype=e||t.datatype;else if(mr(t))this._data=l(t),this._size=Fn(this._data),An(this._data,this._size),this._datatype=e;else{if(t)throw new TypeError("Unsupported type of data ("+Wr(t)+")");this._data=[],this._size=[0],this._datatype=e}}function n(t,e){if(!wr(e))throw new TypeError("Invalid index");if(e.isScalar())return t.get(e.min());var n=e.size();if(n.length!==t._size.length)throw new Nn(n.length,t._size.length);for(var s=e.min(),a=e.max(),o=0,h=t._size.length;o<h;o++)Tn(s[o],t._size[o]),Tn(a[o],t._size[o]);return new r(i(t._data,e,n.length,0),t._datatype)}function i(t,e,r,n){var s=n===r-1,a=e.dimension(n);return s?a.map((function(e){return Tn(e,t.length),t[e]})).valueOf():a.map((function(s){return Tn(s,t.length),i(t[s],e,r,n+1)})).valueOf()}function s(t,e,r,n){if(!e||!0!==e.isIndex)throw new TypeError("Invalid index");var i,s=e.size(),o=e.isScalar();if(yr(r)?(i=r.size(),r=r.valueOf()):i=Fn(r),o){if(0!==i.length)throw new TypeError("Scalar expected");t.set(e.min(),r,n)}else{if(s.length<t._size.length)throw new Nn(s.length,t._size.length,"<");if(i.length<s.length){for(var l=0,c=0;1===s[l]&&1===i[l];)l++;for(;1===s[l];)c++,l++;r=Ln(r,s.length,c,i)}if(!Jr(s,i))throw new Nn(s,i,">");h(t,e.max().map((function(t){return t+1})),n);var u=s.length;a(t._data,e,r,u,0)}return t}function a(t,e,r,n,i){var s=i===n-1,o=e.dimension(i);s?o.forEach((function(e,n){Tn(e),t[e]=r[n[0]]})):o.forEach((function(s,o){Tn(s),a(t[s],e,r[o[0]],n,i+1)}))}function o(t,e,r){if(0===e.length){for(var n=t._data;mr(n);)n=n[0];return n}return t._size=e.slice(0),t._data=Cn(t._data,t._size,r),t}function h(t,e,r){for(var n=t._size.slice(0),i=!1;n.length<e.length;)n.push(0),i=!0;for(var s=0,a=e.length;s<a;s++)e[s]>n[s]&&(n[s]=e[s],i=!0);i&&o(t,n,r)}function l(t){for(var e=0,r=t.length;e<r;e++){var n=t[e];mr(n)?t[e]=l(n):n&&!0===n.isMatrix&&(t[e]=l(n.valueOf()))}return t}return r.prototype=new e,r.prototype.createDenseMatrix=function(t,e){return new r(t,e)},r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return Dn(this._data,Wr)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(t,e){return new r(t,e)},r.prototype.subset=function(t,e,r){switch(arguments.length){case 1:return n(this,t);case 2:case 3:return s(this,t,e,r);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(t){if(!mr(t))throw new TypeError("Array expected");if(t.length!==this._size.length)throw new Nn(t.length,this._size.length);for(var e=0;e<t.length;e++)Tn(t[e],this._size[e]);for(var r=this._data,n=0,i=t.length;n<i;n++){var s=t[n];Tn(s,r.length),r=r[s]}return r},r.prototype.set=function(t,e,r){if(!mr(t))throw new TypeError("Array expected");if(t.length<this._size.length)throw new Nn(t.length,this._size.length,"<");var n,i,s;h(this,t.map((function(t){return t+1})),r);var a=this._data;for(n=0,i=t.length-1;n<i;n++)Tn(s=t[n],a.length),a=a[s];return Tn(s=t[t.length-1],a.length),a[s]=e,this},r.prototype.resize=function(t,e,r){if(!_r(t))throw new TypeError("Array or Matrix expected");var n=t.valueOf().map((t=>Array.isArray(t)&&1===t.length?t[0]:t));return o(r?this.clone():this,n,e)},r.prototype.reshape=function(t,e){var r=e?this.clone():this;r._data=In(r._data,t);var n=r._size.reduce(((t,e)=>t*e));return r._size=Rn(t,n),r},r.prototype.clone=function(){return new r({data:Zr(this._data),size:Zr(this._size),datatype:this._datatype})},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(t){var e=this,n=function r(n,i){return mr(n)?n.map((function(t,e){return r(t,i.concat(e))})):t(n,i,e)}(this._data,[]);return new r(n,void 0!==this._datatype?Dn(n,Wr):void 0)},r.prototype.forEach=function(t){var e=this;!function r(n,i){mr(n)?n.forEach((function(t,e){r(t,i.concat(e))})):t(n,i,e)}(this._data,[])},r.prototype[Symbol.iterator]=function*(){yield*function*t(e,r){if(mr(e))for(var n=0;n<e.length;n++)yield*t(e[n],r.concat(n));else yield{value:e,index:r}}(this._data,[])},r.prototype.rows=function(){var t=[];if(2!==this.size().length)throw new TypeError("Rows can only be returned for a 2D matrix.");var e=this._data;for(var n of e)t.push(new r([n],this._datatype));return t},r.prototype.columns=function(){var t=this,e=[],n=this.size();if(2!==n.length)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var i=this._data,s=function(n){var s=i.map((t=>[t[n]]));e.push(new r(s,t._datatype))},a=0;a<n[1];a++)s(a);return e},r.prototype.toArray=function(){return Zr(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(t){return En(this._data,t)},r.prototype.toString=function(){return En(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(t){if(t){if(ur(t)&&(t=t.toNumber()),!cr(t)||!rn(t))throw new TypeError("The parameter k must be an integer number")}else t=0;for(var e=t>0?t:0,n=t<0?-t:0,i=this._size[0],s=this._size[1],a=Math.min(i-n,s-e),o=[],h=0;h<a;h++)o[h]=this._data[h+n][h+e];return new r({data:o,size:[a],datatype:this._datatype})},r.diagonal=function(t,e,n,i){if(!mr(t))throw new TypeError("Array expected, size parameter");if(2!==t.length)throw new Error("Only two dimensions matrix are supported");if(t=t.map((function(t){if(ur(t)&&(t=t.toNumber()),!cr(t)||!rn(t)||t<1)throw new Error("Size values must be positive integers");return t})),n){if(ur(n)&&(n=n.toNumber()),!cr(n)||!rn(n))throw new TypeError("The parameter k must be an integer number")}else n=0;var s,a=n>0?n:0,o=n<0?-n:0,h=t[0],l=t[1],c=Math.min(h-o,l-a);if(mr(e)){if(e.length!==c)throw new Error("Invalid value array length");s=function(t){return e[t]}}else if(yr(e)){var u=e.size();if(1!==u.length||u[0]!==c)throw new Error("Invalid matrix length");s=function(t){return e.get([t])}}else s=function(){return e};i||(i=ur(s(0))?s(0).mul(0):0);var f=[];if(t.length>0){f=Cn(f,t,i);for(var d=0;d<c;d++)f[d+o][d+a]=s(d)}return new r({data:f,size:[h,l]})},r.fromJSON=function(t){return new r(t)},r.prototype.swapRows=function(t,e){if(!(cr(t)&&rn(t)&&cr(e)&&rn(e)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return Tn(t,this._size[0]),Tn(e,this._size[0]),r._swapRows(t,e,this._data),this},r._swapRows=function(t,e,r){var n=r[t];r[t]=r[e],r[e]=n},r}),{isClass:!0}),Gn=r(287);function Vn(t,e){if(Un(t)&&qn(t,e))return t[e];if("function"==typeof t[e]&&function(t,e){return!(null==t||"function"!=typeof t[e]||$r(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)||!$r(Yn,e)&&(e in Object.prototype||e in Function.prototype))}(t,e))throw new Error('Cannot access method "'+e+'" as a property');throw new Error('No access to property "'+e+'"')}function qn(t,e){return!(!t||"object"!=typeof t||!$r(Hn,e)&&(e in Object.prototype||e in Function.prototype))}function Un(t){return"object"==typeof t&&t&&t.constructor===Object}var Hn={length:!0,name:!0},Yn={toString:!0,valueOf:!0,toLocaleString:!0};function Xn(t){return!!t&&(t instanceof Map||t instanceof class{constructor(t){this.wrappedObject=t}keys(){return Object.keys(this.wrappedObject)}get(t){return Vn(this.wrappedObject,t)}set(t,e){return function(t,e,r){if(Un(t)&&qn(t,e))return t[e]=r,r;throw new Error('No access to property "'+e+'"')}(this.wrappedObject,t,e),this}has(t){return t in this.wrappedObject}}||"function"==typeof t.set&&"function"==typeof t.get&&"function"==typeof t.keys&&"function"==typeof t.has)}var Wn=function(){return Wn=Gn.create,Gn},Zn=Kr("typed",["?BigNumber","?Complex","?DenseMatrix","?Fraction"],(function(t){var{BigNumber:e,Complex:r,DenseMatrix:n,Fraction:i}=t,s=Wn();return s.types=[{name:"number",test:cr},{name:"Complex",test:fr},{name:"BigNumber",test:ur},{name:"Fraction",test:dr},{name:"Unit",test:pr},{name:"string",test:gr},{name:"Chain",test:Xr},{name:"Array",test:mr},{name:"Matrix",test:yr},{name:"DenseMatrix",test:vr},{name:"SparseMatrix",test:xr},{name:"Range",test:br},{name:"Index",test:wr},{name:"boolean",test:Mr},{name:"ResultSet",test:Er},{name:"Help",test:Sr},{name:"function",test:Nr},{name:"Date",test:kr},{name:"RegExp",test:Fr},{name:"null",test:Ar},{name:"undefined",test:Tr},{name:"AccessorNode",test:Cr},{name:"ArrayNode",test:Pr},{name:"AssignmentNode",test:Ir},{name:"BlockNode",test:Rr},{name:"ConditionalNode",test:zr},{name:"ConstantNode",test:Lr},{name:"FunctionNode",test:Dr},{name:"FunctionAssignmentNode",test:jr},{name:"IndexNode",test:Br},{name:"Node",test:Gr},{name:"ObjectNode",test:Vr},{name:"OperatorNode",test:qr},{name:"ParenthesisNode",test:Ur},{name:"RangeNode",test:Hr},{name:"SymbolNode",test:Yr},{name:"Map",test:Xn},{name:"Object",test:Or}],s.conversions=[{from:"number",to:"BigNumber",convert:function(t){if(e||Jn(t),t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+t+"). Use function bignumber(x) to convert to BigNumber.");return new e(t)}},{from:"number",to:"Complex",convert:function(t){return r||$n(t),new r(t,0)}},{from:"number",to:"string",convert:function(t){return t+""}},{from:"BigNumber",to:"Complex",convert:function(t){return r||$n(t),new r(t.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(t){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(t){return r||$n(t),new r(t.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(t){i||Kn(t);var e=new i(t);if(e.valueOf()!==t)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+t+"). Use function fraction(x) to convert to Fraction.");return e}},{from:"string",to:"number",convert:function(t){var e=Number(t);if(isNaN(e))throw new Error('Cannot convert "'+t+'" to a number');return e}},{from:"string",to:"BigNumber",convert:function(t){e||Jn(t);try{return new e(t)}catch(e){throw new Error('Cannot convert "'+t+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(t){i||Kn(t);try{return new i(t)}catch(e){throw new Error('Cannot convert "'+t+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(t){r||$n(t);try{return new r(t)}catch(e){throw new Error('Cannot convert "'+t+'" to Complex')}}},{from:"boolean",to:"number",convert:function(t){return+t}},{from:"boolean",to:"BigNumber",convert:function(t){return e||Jn(t),new e(+t)}},{from:"boolean",to:"Fraction",convert:function(t){return i||Kn(t),new i(+t)}},{from:"boolean",to:"string",convert:function(t){return String(t)}},{from:"Array",to:"Matrix",convert:function(t){return n||function(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}(),new n(t)}},{from:"Matrix",to:"Array",convert:function(t){return t.valueOf()}}],s}));function Jn(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function $n(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function Kn(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}function Qn(t,e,r){return t&&"function"==typeof t.map?t.map((function(t){return Qn(t,e,r)})):e(t)}var ti="number",ei="number, number";function ri(t){return Math.abs(t)}function ni(t,e){return t+e}function ii(t,e){return t*e}function si(t){return-t}function ai(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return parseFloat(on(t,e))}ri.signature=ti,ni.signature=ei,ii.signature=ei,si.signature=ti,ai.signature=ei;var oi=Kr("abs",["typed"],(t=>{var{typed:e}=t;return e("abs",{number:ri,Complex:function(t){return t.abs()},BigNumber:function(t){return t.abs()},Fraction:function(t){return t.abs()},"Array | Matrix":function(t){return Qn(t,this,!0)},Unit:function(t){return t.abs()}})}));var hi="addScalar",li=Kr(hi,["typed"],(t=>{var{typed:e}=t;return e(hi,{"number, number":ni,"Complex, Complex":function(t,e){return t.add(e)},"BigNumber, BigNumber":function(t,e){return t.plus(e)},"Fraction, Fraction":function(t,e){return t.add(e)},"Unit, Unit":function(t,e){if(null===t.value||void 0===t.value)throw new Error("Parameter x contains a unit with undefined value");if(null===e.value||void 0===e.value)throw new Error("Parameter y contains a unit with undefined value");if(!t.equalBase(e))throw new Error("Units do not match");var r=t.clone();return r.value=this(r.value,e.value),r.fixPrefix=!1,r}})})),ci=Kr("bignumber",["typed","BigNumber"],(t=>{var{typed:e,BigNumber:r}=t;return e("bignumber",{"":function(){return new r(0)},number:function(t){return new r(t+"")},string:function(t){var e=t.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(e){var n=e[2],i=r(e[1]),s=new r(2).pow(Number(n));if(i.gt(s.sub(1)))throw new SyntaxError('String "'.concat(t,'" is out of range'));var a=new r(2).pow(Number(n)-1);return i.gte(a)?i.sub(s):i}return new r(t)},BigNumber:function(t){return t},Fraction:function(t){return new r(t.n).div(t.d).times(t.s)},null:function(t){return new r(0)},"Array | Matrix":function(t){return Qn(t,this)}})}));var ui="conj",fi=Kr(ui,["typed"],(t=>{var{typed:e}=t;return e(ui,{number:function(t){return t},BigNumber:function(t){return t},Complex:function(t){return t.conjugate()},"Array | Matrix":function(t){return Qn(t,this)}})}));function di(t,e,r){if(null==r)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var n=t.minus(e).abs();if(n.isZero())return!0;var i=t.constructor.max(t.abs(),e.abs());return n.lte(i.times(r))}return!1}var pi="equalScalar",gi=Kr(pi,["typed","config"],(t=>{var{typed:e,config:r}=t;return e(pi,{"boolean, boolean":function(t,e){return t===e},"number, number":function(t,e){return fn(t,e,r.epsilon)},"BigNumber, BigNumber":function(t,e){return t.eq(e)||di(t,e,r.epsilon)},"Fraction, Fraction":function(t,e){return t.equals(e)},"Complex, Complex":function(t,e){return function(t,e,r){return fn(t.re,e.re,r)&&fn(t.im,e.im,r)}(t,e,r.epsilon)},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return this(t.value,e.value)}})}));Kr(pi,["typed","config"],(t=>{var{typed:e,config:r}=t;return e(pi,{"number, number":function(t,e){return fn(t,e,r.epsilon)}})})),Math.pow(2,53),Kr("hex",["typed","format"],(t=>{var{typed:e,format:r}=t;return e("hex",{"number | BigNumber":function(t){return r(t,{notation:"hex"})},"number | BigNumber, number":function(t,e){return r(t,{notation:"hex",wordSize:e})}})}));var mi="isInteger",yi=Kr(mi,["typed"],(t=>{var{typed:e}=t;return e(mi,{number:rn,BigNumber:function(t){return t.isInt()},Fraction:function(t){return 1===t.d&&isFinite(t.n)},"Array | Matrix":function(t){return Qn(t,this)}})}));var _i=Kr("multiplyScalar",["typed"],(t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":ii,"Complex, Complex":function(t,e){return t.mul(e)},"BigNumber, BigNumber":function(t,e){return t.times(e)},"Fraction, Fraction":function(t,e){return t.mul(e)},"number | Fraction | BigNumber | Complex, Unit":function(t,e){var r=e.clone();return r.value=null===r.value?r._normalize(t):this(r.value,t),r},"Unit, number | Fraction | BigNumber | Complex":function(t,e){var r=t.clone();return r.value=null===r.value?r._normalize(e):this(r.value,e),r},"Unit, Unit":function(t,e){return t.multiply(e)}})}));var vi=Kr("number",["typed"],(t=>{var{typed:e}=t,r=e("number",{"":function(){return 0},number:function(t){return t},string:function(t){if("NaN"===t)return NaN;var e,r,n=(r=(e=t).match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/))?{input:e,radix:{"0b":2,"0o":8,"0x":16}[r[1]],integerPart:r[2],fractionalPart:r[3]}:null;if(n)return function(t){for(var e=parseInt(t.integerPart,t.radix),r=0,n=0;n<t.fractionalPart.length;n++)r+=parseInt(t.fractionalPart[n],t.radix)/Math.pow(t.radix,n+1);var i=e+r;if(isNaN(i))throw new SyntaxError('String "'+t.input+'" is no valid number');return i}(n);var i=0,s=t.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);s&&(i=Number(s[2]),t=s[1]);var a=Number(t);if(isNaN(a))throw new SyntaxError('String "'+t+'" is no valid number');if(s){if(a>2**i-1)throw new SyntaxError('String "'.concat(t,'" is out of range'));a>=2**(i-1)&&(a-=2**i)}return a},BigNumber:function(t){return t.toNumber()},Fraction:function(t){return t.valueOf()},Unit:function(t){throw new Error("Second argument with valueless unit expected")},null:function(t){return 0},"Unit, string | Unit":function(t,e){return t.toNumber(e)},"Array | Matrix":function(t){return Qn(t,this)}});return r.fromJSON=function(t){return parseFloat(t.value)},r}));Kr("oct",["typed","format"],(t=>{var{typed:e,format:r}=t;return e("oct",{"number | BigNumber":function(t){return r(t,{notation:"oct"})},"number | BigNumber, number":function(t,e){return r(t,{notation:"oct",wordSize:e})}})})),r(377);Date.now();var xi=Kr("SparseMatrix",["typed","equalScalar","Matrix"],(t=>{var{typed:e,equalScalar:r,Matrix:n}=t;function i(t,e){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(e&&!gr(e))throw new Error("Invalid datatype: "+e);if(yr(t))!function(t,e,r){"SparseMatrix"===e.type?(t._values=e._values?Zr(e._values):void 0,t._index=Zr(e._index),t._ptr=Zr(e._ptr),t._size=Zr(e._size),t._datatype=r||e._datatype):s(t,e.valueOf(),r||e._datatype)}(this,t,e);else if(t&&mr(t.index)&&mr(t.ptr)&&mr(t.size))this._values=t.values,this._index=t.index,this._ptr=t.ptr,this._size=t.size,this._datatype=e||t.datatype;else if(mr(t))s(this,t,e);else{if(t)throw new TypeError("Unsupported type of data ("+Wr(t)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=e}}function s(t,n,i){t._values=[],t._index=[],t._ptr=[],t._datatype=i;var s=n.length,a=0,o=r,h=0;if(gr(i)&&(o=e.find(r,[i,i])||r,h=e.convert(0,i)),s>0){var l=0;do{t._ptr.push(t._index.length);for(var c=0;c<s;c++){var u=n[c];if(mr(u)){if(0===l&&a<u.length&&(a=u.length),l<u.length){var f=u[l];o(f,h)||(t._values.push(f),t._index.push(c))}}else 0===l&&a<1&&(a=1),o(u,h)||(t._values.push(u),t._index.push(c))}l++}while(l<a)}t._ptr.push(t._index.length),t._size=[s,a]}function a(t,e){if(!wr(e))throw new TypeError("Invalid index");if(e.isScalar())return t.get(e.min());var r,n,s,a,o=e.size();if(o.length!==t._size.length)throw new Nn(o.length,t._size.length);var h=e.min(),l=e.max();for(r=0,n=t._size.length;r<n;r++)Tn(h[r],t._size[r]),Tn(l[r],t._size[r]);var c=t._values,u=t._index,f=t._ptr,d=e.dimension(0),p=e.dimension(1),g=[],m=[];d.forEach((function(t,e){m[t]=e[0],g[t]=!0}));var y=c?[]:void 0,_=[],v=[];return p.forEach((function(t){for(v.push(_.length),s=f[t],a=f[t+1];s<a;s++)r=u[s],!0===g[r]&&(_.push(m[r]),y&&y.push(c[s]))})),v.push(_.length),new i({values:y,index:_,ptr:v,size:o,datatype:t._datatype})}function o(t,e,r,n){if(!e||!0!==e.isIndex)throw new TypeError("Invalid index");var i,s=e.size(),a=e.isScalar();if(yr(r)?(i=r.size(),r=r.toArray()):i=Fn(r),a){if(0!==i.length)throw new TypeError("Scalar expected");t.set(e.min(),r,n)}else{if(1!==s.length&&2!==s.length)throw new Nn(s.length,t._size.length,"<");if(i.length<s.length){for(var o=0,h=0;1===s[o]&&1===i[o];)o++;for(;1===s[o];)h++,o++;r=Ln(r,s.length,h,i)}if(!Jr(s,i))throw new Nn(s,i,">");for(var l=e.min()[0],c=e.min()[1],u=i[0],f=i[1],d=0;d<u;d++)for(var p=0;p<f;p++){var g=r[d][p];t.set([d+l,p+c],g,n)}}return t}function h(t,e,r,n){if(r-e==0)return r;for(var i=e;i<r;i++)if(n[i]===t)return i;return e}function l(t,e,r,n,i,s,a){i.splice(t,0,n),s.splice(t,0,e);for(var o=r+1;o<a.length;o++)a[o]++}function c(t,n,i,s){var a=s||0,o=r,h=0;gr(t._datatype)&&(o=e.find(r,[t._datatype,t._datatype])||r,h=e.convert(0,t._datatype),a=e.convert(a,t._datatype));var l,c,u,f=!o(a,h),d=t._size[0],p=t._size[1];if(i>p){for(c=p;c<i;c++)if(t._ptr[c]=t._values.length,f)for(l=0;l<d;l++)t._values.push(a),t._index.push(l);t._ptr[i]=t._values.length}else i<p&&(t._ptr.splice(i+1,p-i),t._values.splice(t._ptr[i],t._values.length),t._index.splice(t._ptr[i],t._index.length));if(p=i,n>d){if(f){var g=0;for(c=0;c<p;c++){t._ptr[c]=t._ptr[c]+g,u=t._ptr[c+1]+g;var m=0;for(l=d;l<n;l++,m++)t._values.splice(u+m,0,a),t._index.splice(u+m,0,l),g++}t._ptr[p]=t._values.length}}else if(n<d){var y=0;for(c=0;c<p;c++){t._ptr[c]=t._ptr[c]-y;var _=t._ptr[c],v=t._ptr[c+1]-y;for(u=_;u<v;u++)(l=t._index[u])>n-1&&(t._values.splice(u,1),t._index.splice(u,1),y++)}t._ptr[c]=t._values.length}return t._size[0]=n,t._size[1]=i,t}function u(t,e,r,n,i){var s,a,o=n[0],h=n[1],l=[];for(s=0;s<o;s++)for(l[s]=[],a=0;a<h;a++)l[s][a]=0;for(a=0;a<h;a++)for(var c=r[a],u=r[a+1],f=c;f<u;f++)l[s=e[f]][a]=t?i?Zr(t[f]):t[f]:1;return l}return i.prototype=new n,i.prototype.createSparseMatrix=function(t,e){return new i(t,e)},i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return Dn(this._values,Wr)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(t,e){return new i(t,e)},i.prototype.density=function(){var t=this._size[0],e=this._size[1];return 0!==t&&0!==e?this._index.length/(t*e):0},i.prototype.subset=function(t,e,r){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return a(this,t);case 2:case 3:return o(this,t,e,r);default:throw new SyntaxError("Wrong number of arguments")}},i.prototype.get=function(t){if(!mr(t))throw new TypeError("Array expected");if(t.length!==this._size.length)throw new Nn(t.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var e=t[0],r=t[1];Tn(e,this._size[0]),Tn(r,this._size[1]);var n=h(e,this._ptr[r],this._ptr[r+1],this._index);return n<this._ptr[r+1]&&this._index[n]===e?this._values[n]:0},i.prototype.set=function(t,n,i){if(!mr(t))throw new TypeError("Array expected");if(t.length!==this._size.length)throw new Nn(t.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var s=t[0],a=t[1],o=this._size[0],u=this._size[1],f=r,d=0;gr(this._datatype)&&(f=e.find(r,[this._datatype,this._datatype])||r,d=e.convert(0,this._datatype)),(s>o-1||a>u-1)&&(c(this,Math.max(s+1,o),Math.max(a+1,u),i),o=this._size[0],u=this._size[1]),Tn(s,o),Tn(a,u);var p=h(s,this._ptr[a],this._ptr[a+1],this._index);return p<this._ptr[a+1]&&this._index[p]===s?f(n,d)?function(t,e,r,n,i){r.splice(t,1),n.splice(t,1);for(var s=e+1;s<i.length;s++)i[s]--}(p,a,this._values,this._index,this._ptr):this._values[p]=n:l(p,s,a,n,this._values,this._index,this._ptr),this},i.prototype.resize=function(t,e,r){if(!_r(t))throw new TypeError("Array or Matrix expected");var n=t.valueOf().map((t=>Array.isArray(t)&&1===t.length?t[0]:t));if(2!==n.length)throw new Error("Only two dimensions matrix are supported");return n.forEach((function(t){if(!cr(t)||!rn(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+En(n)+")")})),c(r?this.clone():this,n[0],n[1],e)},i.prototype.reshape=function(t,e){if(!mr(t))throw new TypeError("Array expected");if(2!==t.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");t.forEach((function(e){if(!cr(e)||!rn(e)||e<=-2||0===e)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+En(t)+")")}));var r=this._size[0]*this._size[1];if(r!==(t=Rn(t,r))[0]*t[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var n=e?this.clone():this;if(this._size[0]===t[0]&&this._size[1]===t[1])return n;for(var i=[],s=0;s<n._ptr.length;s++)for(var a=0;a<n._ptr[s+1]-n._ptr[s];a++)i.push(s);for(var o=n._values.slice(),c=n._index.slice(),u=0;u<n._index.length;u++){var f=c[u],d=i[u],p=f*n._size[1]+d;i[u]=p%t[1],c[u]=Math.floor(p/t[1])}n._values.length=0,n._index.length=0,n._ptr.length=t[1]+1,n._size=t.slice();for(var g=0;g<n._ptr.length;g++)n._ptr[g]=0;for(var m=0;m<o.length;m++){var y=c[m],_=i[m],v=o[m];l(h(y,n._ptr[_],n._ptr[_+1],n._index),y,_,v,n._values,n._index,n._ptr)}return n},i.prototype.clone=function(){return new i({values:this._values?Zr(this._values):void 0,index:Zr(this._index),ptr:Zr(this._ptr),size:Zr(this._size),datatype:this._datatype})},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(t,n){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var s=this;return function(t,n,s,a,o,h,l){var c=[],u=[],f=[],d=r,p=0;gr(t._datatype)&&(d=e.find(r,[t._datatype,t._datatype])||r,p=e.convert(0,t._datatype));for(var g=function(t,e,r){t=h(t,e,r),d(t,p)||(c.push(t),u.push(e))},m=0;m<=o;m++){f.push(c.length);var y=t._ptr[m],_=t._ptr[m+1];if(l)for(var v=y;v<_;v++){var x=t._index[v];x>=0&&x<=s&&g(t._values[v],x-0,m-0)}else{for(var b={},w=y;w<_;w++)b[t._index[w]]=t._values[w];for(var M=0;M<=s;M++)g(M in b?b[M]:0,M-0,m-0)}}return f.push(c.length),new i({values:c,index:u,ptr:f,size:[s-0+1,o-0+1]})}(this,0,this._size[0]-1,0,this._size[1]-1,(function(e,r,n){return t(e,[r,n],s)}),n)},i.prototype.forEach=function(t,e){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var r=this._size[0],n=this._size[1],i=0;i<n;i++){var s=this._ptr[i],a=this._ptr[i+1];if(e)for(var o=s;o<a;o++){var h=this._index[o];t(this._values[o],[h,i],this)}else{for(var l={},c=s;c<a;c++)l[this._index[c]]=this._values[c];for(var u=0;u<r;u++)t(u in l?l[u]:0,[u,i],this)}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var t=this._size[1],e=0;e<t;e++)for(var r=this._ptr[e],n=this._ptr[e+1],i=r;i<n;i++){var s=this._index[i];yield{value:this._values[i],index:[s,e]}}},i.prototype.toArray=function(){return u(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return u(this._values,this._index,this._ptr,this._size,!1)},i.prototype.format=function(t){for(var e=this._size[0],r=this._size[1],n=this.density(),i="Sparse Matrix ["+En(e,t)+" x "+En(r,t)+"] density: "+En(n,t)+"\n",s=0;s<r;s++)for(var a=this._ptr[s],o=this._ptr[s+1],h=a;h<o;h++)i+="\n    ("+En(this._index[h],t)+", "+En(s,t)+") ==> "+(this._values?En(this._values[h],t):"X");return i},i.prototype.toString=function(){return En(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(t){if(t){if(ur(t)&&(t=t.toNumber()),!cr(t)||!rn(t))throw new TypeError("The parameter k must be an integer number")}else t=0;var e=t>0?t:0,r=t<0?-t:0,n=this._size[0],s=this._size[1],a=Math.min(n-r,s-e),o=[],h=[],l=[];l[0]=0;for(var c=e;c<s&&o.length<a;c++)for(var u=this._ptr[c],f=this._ptr[c+1],d=u;d<f;d++){var p=this._index[d];if(p===c-e+r){o.push(this._values[d]),h[o.length-1]=p-r;break}}return l.push(o.length),new i({values:o,index:h,ptr:l,size:[a,1]})},i.fromJSON=function(t){return new i(t)},i.diagonal=function(t,n,s,a,o){if(!mr(t))throw new TypeError("Array expected, size parameter");if(2!==t.length)throw new Error("Only two dimensions matrix are supported");if(t=t.map((function(t){if(ur(t)&&(t=t.toNumber()),!cr(t)||!rn(t)||t<1)throw new Error("Size values must be positive integers");return t})),s){if(ur(s)&&(s=s.toNumber()),!cr(s)||!rn(s))throw new TypeError("The parameter k must be an integer number")}else s=0;var h=r,l=0;gr(o)&&(h=e.find(r,[o,o])||r,l=e.convert(0,o));var c,u=s>0?s:0,f=s<0?-s:0,d=t[0],p=t[1],g=Math.min(d-f,p-u);if(mr(n)){if(n.length!==g)throw new Error("Invalid value array length");c=function(t){return n[t]}}else if(yr(n)){var m=n.size();if(1!==m.length||m[0]!==g)throw new Error("Invalid matrix length");c=function(t){return n.get([t])}}else c=function(){return n};for(var y=[],_=[],v=[],x=0;x<p;x++){v.push(y.length);var b=x-u;if(b>=0&&b<g){var w=c(b);h(w,l)||(_.push(b+f),y.push(w))}}return v.push(y.length),new i({values:y,index:_,ptr:v,size:[d,p]})},i.prototype.swapRows=function(t,e){if(!(cr(t)&&rn(t)&&cr(e)&&rn(e)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return Tn(t,this._size[0]),Tn(e,this._size[0]),i._swapRows(t,e,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(t,e,r,n,i){for(var s=n[t],a=n[t+1],o=s;o<a;o++)i(r[o],e[o])},i._swapRows=function(t,e,r,n,i,s){for(var a=0;a<r;a++){var o=s[a],l=s[a+1],c=h(t,o,l,i),u=h(e,o,l,i);if(c<l&&u<l&&i[c]===t&&i[u]===e){if(n){var f=n[c];n[c]=n[u],n[u]=f}}else if(c<l&&i[c]===t&&(u>=l||i[u]!==e)){var d=n?n[c]:void 0;i.splice(u,0,e),n&&n.splice(u,0,d),i.splice(u<=c?c+1:c,1),n&&n.splice(u<=c?c+1:c,1)}else if(u<l&&i[u]===e&&(c>=l||i[c]!==t)){var p=n?n[u]:void 0;i.splice(c,0,t),n&&n.splice(c,0,p),i.splice(c<=u?u+1:u,1),n&&n.splice(c<=u?u+1:u,1)}}},i}),{isClass:!0});Kr("bin",["typed","format"],(t=>{var{typed:e,format:r}=t;return e("bin",{"number | BigNumber":function(t){return r(t,{notation:"bin"})},"number | BigNumber, number":function(t,e){return r(t,{notation:"bin",wordSize:e})}})}));var bi="unaryMinus",wi=Kr(bi,["typed"],(t=>{var{typed:e}=t;return e(bi,{number:si,Complex:function(t){return t.neg()},BigNumber:function(t){return t.neg()},Fraction:function(t){return t.neg()},Unit:function(t){var e=t.clone();return e.value=this(t.value),e},"Array | Matrix":function(t){return Qn(t,this,!0)}})})),Mi=Kr("fraction",["typed","Fraction"],(t=>{var{typed:e,Fraction:r}=t;return e("fraction",{number:function(t){if(!isFinite(t)||isNaN(t))throw new Error(t+" cannot be represented as a fraction");return new r(t)},string:function(t){return new r(t)},"number, number":function(t,e){return new r(t,e)},null:function(t){return new r(0)},BigNumber:function(t){return new r(t.toString())},Fraction:function(t){return t},Object:function(t){return new r(t)},"Array | Matrix":function(t){return Qn(t,this)}})})),Ei="matrix",Si=Kr(Ei,["typed","Matrix","DenseMatrix","SparseMatrix"],(t=>{var{typed:e,Matrix:r,DenseMatrix:n,SparseMatrix:i}=t;return e(Ei,{"":function(){return s([])},string:function(t){return s([],t)},"string, string":function(t,e){return s([],t,e)},Array:function(t){return s(t)},Matrix:function(t){return s(t,t.storage())},"Array | Matrix, string":s,"Array | Matrix, string, string":s});function s(t,e,r){if("dense"===e||"default"===e||void 0===e)return new n(t,r);if("sparse"===e)return new i(t,r);throw new TypeError("Unknown matrix type "+JSON.stringify(e)+".")}})),Ni=Kr("algorithm03",["typed"],(t=>{var{typed:e}=t;return function(t,r,n,i){var s=t._data,a=t._size,o=t._datatype,h=r._values,l=r._index,c=r._ptr,u=r._size,f=r._datatype;if(a.length!==u.length)throw new Nn(a.length,u.length);if(a[0]!==u[0]||a[1]!==u[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+u+")");if(!h)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var d,p=a[0],g=a[1],m=0,y=n;"string"==typeof o&&o===f&&(d=o,m=e.convert(0,d),y=e.find(n,[d,d]));for(var _=[],v=0;v<p;v++)_[v]=[];for(var x=[],b=[],w=0;w<g;w++){for(var M=w+1,E=c[w],S=c[w+1],N=E;N<S;N++){var k=l[N];x[k]=i?y(h[N],s[k][w]):y(s[k][w],h[N]),b[k]=M}for(var F=0;F<p;F++)b[F]===M?_[F][w]=x[F]:_[F][w]=i?y(m,s[F][w]):y(s[F][w],m)}return t.createDenseMatrix({data:_,size:[p,g],datatype:d})}})),ki=Kr("algorithm05",["typed","equalScalar"],(t=>{var{typed:e,equalScalar:r}=t;return function(t,n,i){var s=t._values,a=t._index,o=t._ptr,h=t._size,l=t._datatype,c=n._values,u=n._index,f=n._ptr,d=n._size,p=n._datatype;if(h.length!==d.length)throw new Nn(h.length,d.length);if(h[0]!==d[0]||h[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+d+")");var g,m=h[0],y=h[1],_=r,v=0,x=i;"string"==typeof l&&l===p&&(g=l,_=e.find(r,[g,g]),v=e.convert(0,g),x=e.find(i,[g,g]));var b,w,M,E,S=s&&c?[]:void 0,N=[],k=[],F=S?[]:void 0,O=S?[]:void 0,A=[],T=[];for(w=0;w<y;w++){k[w]=N.length;var C=w+1;for(M=o[w],E=o[w+1];M<E;M++)b=a[M],N.push(b),A[b]=C,F&&(F[b]=s[M]);for(M=f[w],E=f[w+1];M<E;M++)A[b=u[M]]!==C&&N.push(b),T[b]=C,O&&(O[b]=c[M]);if(S)for(M=k[w];M<N.length;){var P=A[b=N[M]],I=T[b];if(P===C||I===C){var R=x(P===C?F[b]:v,I===C?O[b]:v);_(R,v)?N.splice(M,1):(S.push(R),M++)}}}return k[y]=N.length,t.createSparseMatrix({values:S,index:N,ptr:k,size:[m,y],datatype:g})}})),Fi=Kr("algorithm11",["typed","equalScalar"],(t=>{var{typed:e,equalScalar:r}=t;return function(t,n,i,s){var a=t._values,o=t._index,h=t._ptr,l=t._size,c=t._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var u,f=l[0],d=l[1],p=r,g=0,m=i;"string"==typeof c&&(u=c,p=e.find(r,[u,u]),g=e.convert(0,u),n=e.convert(n,u),m=e.find(i,[u,u]));for(var y=[],_=[],v=[],x=0;x<d;x++){v[x]=_.length;for(var b=h[x],w=h[x+1],M=b;M<w;M++){var E=o[M],S=s?m(n,a[M]):m(a[M],n);p(S,g)||(_.push(E),y.push(S))}}return v[d]=_.length,t.createSparseMatrix({values:y,index:_,ptr:v,size:[f,d],datatype:u})}})),Oi=Kr("algorithm12",["typed","DenseMatrix"],(t=>{var{typed:e,DenseMatrix:r}=t;return function(t,n,i,s){var a=t._values,o=t._index,h=t._ptr,l=t._size,c=t._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var u,f=l[0],d=l[1],p=i;"string"==typeof c&&(u=c,n=e.convert(n,u),p=e.find(i,[u,u]));for(var g=[],m=[],y=[],_=0;_<d;_++){for(var v=_+1,x=h[_],b=h[_+1],w=x;w<b;w++){var M=o[w];m[M]=a[w],y[M]=v}for(var E=0;E<f;E++)0===_&&(g[E]=[]),y[E]===v?g[E][_]=s?p(n,m[E]):p(m[E],n):g[E][_]=s?p(n,0):p(0,n)}return new r({data:g,size:[f,d],datatype:u})}})),Ai=Kr("algorithm13",["typed"],(t=>{var{typed:e}=t;return function(t,n,i){var s,a=t._data,o=t._size,h=t._datatype,l=n._data,c=n._size,u=n._datatype,f=[];if(o.length!==c.length)throw new Nn(o.length,c.length);for(var d=0;d<o.length;d++){if(o[d]!==c[d])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+c+")");f[d]=o[d]}var p=i;"string"==typeof h&&h===u&&(s=h,p=e.find(i,[s,s]));var g=f.length>0?r(p,0,f,f[0],a,l):[];return t.createDenseMatrix({data:g,size:f,datatype:s})};function r(t,e,n,i,s,a){var o=[];if(e===n.length-1)for(var h=0;h<i;h++)o[h]=t(s[h],a[h]);else for(var l=0;l<i;l++)o[l]=r(t,e+1,n,n[e+1],s[l],a[l]);return o}})),Ti=Kr("algorithm14",["typed"],(t=>{var{typed:e}=t;return function(t,n,i,s){var a,o=t._data,h=t._size,l=t._datatype,c=i;"string"==typeof l&&(a=l,n=e.convert(n,a),c=e.find(i,[a,a]));var u=h.length>0?r(c,0,h,h[0],o,n,s):[];return t.createDenseMatrix({data:u,size:Zr(h),datatype:a})};function r(t,e,n,i,s,a,o){var h=[];if(e===n.length-1)for(var l=0;l<i;l++)h[l]=o?t(a,s[l]):t(s[l],a);else for(var c=0;c<i;c++)h[c]=r(t,e+1,n,n[e+1],s[c],a,o);return h}})),Ci=Kr("algorithm01",["typed"],(t=>{var{typed:e}=t;return function(t,r,n,i){var s=t._data,a=t._size,o=t._datatype,h=r._values,l=r._index,c=r._ptr,u=r._size,f=r._datatype;if(a.length!==u.length)throw new Nn(a.length,u.length);if(a[0]!==u[0]||a[1]!==u[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+u+")");if(!h)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var d,p,g=a[0],m=a[1],y="string"==typeof o&&o===f?o:void 0,_=y?e.find(n,[y,y]):n,v=[];for(d=0;d<g;d++)v[d]=[];var x=[],b=[];for(p=0;p<m;p++){for(var w=p+1,M=c[p],E=c[p+1],S=M;S<E;S++)x[d=l[S]]=i?_(h[S],s[d][p]):_(s[d][p],h[S]),b[d]=w;for(d=0;d<g;d++)b[d]===w?v[d][p]=x[d]:v[d][p]=s[d][p]}return t.createDenseMatrix({data:v,size:[g,m],datatype:y})}}));function Pi(){throw new Error('No "bignumber" implementation available')}function Ii(){throw new Error('No "fraction" implementation available')}var Ri=Kr("numeric",["number","?bignumber","?fraction"],(t=>{var{number:e,bignumber:r,fraction:n}=t,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},s={number:t=>e(t),BigNumber:r?t=>r(t):Pi,Fraction:n?t=>n(t):Ii};return function(t,e){var r=Wr(t);if(!(r in i))throw new TypeError("Cannot convert "+t+' of type "'+r+'"; valid input types are '+Object.keys(i).join(", "));if(!(e in s))throw new TypeError("Cannot convert "+t+' to type "'+e+'"; valid output types are '+Object.keys(s).join(", "));return e===r?t:s[e](t)}})),zi="size",Li=Kr(zi,["typed","config","?matrix"],(t=>{var{typed:e,config:r,matrix:n}=t;return e(zi,{Matrix:function(t){return t.create(t.size())},Array:Fn,string:function(t){return"Array"===r.matrix?[t.length]:n([t.length])},"number | Complex | BigNumber | Unit | boolean | null":function(t){return"Array"===r.matrix?[]:n?n([]):function(){throw new Error('No "matrix" implementation available')}()}})})),ji=Kr("algorithm07",["typed","DenseMatrix"],(t=>{var{typed:e,DenseMatrix:r}=t;return function(t,i,s){var a=t._size,o=t._datatype,h=i._size,l=i._datatype;if(a.length!==h.length)throw new Nn(a.length,h.length);if(a[0]!==h[0]||a[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+h+")");var c,u,f,d=a[0],p=a[1],g=0,m=s;"string"==typeof o&&o===l&&(c=o,g=e.convert(0,c),m=e.find(s,[c,c]));var y=[];for(u=0;u<d;u++)y[u]=[];var _=[],v=[],x=[],b=[];for(f=0;f<p;f++){var w=f+1;for(n(t,f,x,_,w),n(i,f,b,v,w),u=0;u<d;u++){var M=x[u]===w?_[u]:g,E=b[u]===w?v[u]:g;y[u][f]=m(M,E)}}return new r({data:y,size:[d,p],datatype:c})};function n(t,e,r,n,i){for(var s=t._values,a=t._index,o=t._ptr,h=o[e],l=o[e+1];h<l;h++){var c=a[h];r[c]=i,n[c]=s[h]}}})),Di="smaller",Bi=Kr(Di,["typed","config","matrix","DenseMatrix"],(t=>{var{typed:e,config:r,matrix:n,DenseMatrix:i}=t,s=Ni({typed:e}),a=ji({typed:e,DenseMatrix:i}),o=Oi({typed:e,DenseMatrix:i}),h=Ai({typed:e}),l=Ti({typed:e});return e(Di,{"boolean, boolean":function(t,e){return t<e},"number, number":function(t,e){return t<e&&!fn(t,e,r.epsilon)},"BigNumber, BigNumber":function(t,e){return t.lt(e)&&!di(t,e,r.epsilon)},"Fraction, Fraction":function(t,e){return-1===t.compare(e)},"Complex, Complex":function(t,e){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return this(t.value,e.value)},"SparseMatrix, SparseMatrix":function(t,e){return a(t,e,this)},"SparseMatrix, DenseMatrix":function(t,e){return s(e,t,this,!0)},"DenseMatrix, SparseMatrix":function(t,e){return s(t,e,this,!1)},"DenseMatrix, DenseMatrix":function(t,e){return h(t,e,this)},"Array, Array":function(t,e){return this(n(t),n(e)).valueOf()},"Array, Matrix":function(t,e){return this(n(t),e)},"Matrix, Array":function(t,e){return this(t,n(e))},"SparseMatrix, any":function(t,e){return o(t,e,this,!1)},"DenseMatrix, any":function(t,e){return l(t,e,this,!1)},"any, SparseMatrix":function(t,e){return o(e,t,this,!0)},"any, DenseMatrix":function(t,e){return l(e,t,this,!0)},"Array, any":function(t,e){return l(n(t),e,this,!1).valueOf()},"any, Array":function(t,e){return l(n(e),t,this,!0).valueOf()}})})),Gi=Kr("algorithm10",["typed","DenseMatrix"],(t=>{var{typed:e,DenseMatrix:r}=t;return function(t,n,i,s){var a=t._values,o=t._index,h=t._ptr,l=t._size,c=t._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var u,f=l[0],d=l[1],p=i;"string"==typeof c&&(u=c,n=e.convert(n,u),p=e.find(i,[u,u]));for(var g=[],m=[],y=[],_=0;_<d;_++){for(var v=_+1,x=h[_],b=h[_+1],w=x;w<b;w++){var M=o[w];m[M]=a[w],y[M]=v}for(var E=0;E<f;E++)0===_&&(g[E]=[]),y[E]===v?g[E][_]=s?p(n,m[E]):p(m[E],n):g[E][_]=n}return new r({data:g,size:[f,d],datatype:u})}})),Vi="subtract",qi=Kr(Vi,["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],(t=>{var{typed:e,matrix:r,equalScalar:n,addScalar:i,unaryMinus:s,DenseMatrix:a}=t,o=Ci({typed:e}),h=Ni({typed:e}),l=ki({typed:e,equalScalar:n}),c=Gi({typed:e,DenseMatrix:a}),u=Ai({typed:e}),f=Ti({typed:e});return e(Vi,{"number, number":function(t,e){return t-e},"Complex, Complex":function(t,e){return t.sub(e)},"BigNumber, BigNumber":function(t,e){return t.minus(e)},"Fraction, Fraction":function(t,e){return t.sub(e)},"Unit, Unit":function(t,e){if(null===t.value)throw new Error("Parameter x contains a unit with undefined value");if(null===e.value)throw new Error("Parameter y contains a unit with undefined value");if(!t.equalBase(e))throw new Error("Units do not match");var r=t.clone();return r.value=this(r.value,e.value),r.fixPrefix=!1,r},"SparseMatrix, SparseMatrix":function(t,e){return Ui(t,e),l(t,e,this)},"SparseMatrix, DenseMatrix":function(t,e){return Ui(t,e),h(e,t,this,!0)},"DenseMatrix, SparseMatrix":function(t,e){return Ui(t,e),o(t,e,this,!1)},"DenseMatrix, DenseMatrix":function(t,e){return Ui(t,e),u(t,e,this)},"Array, Array":function(t,e){return this(r(t),r(e)).valueOf()},"Array, Matrix":function(t,e){return this(r(t),e)},"Matrix, Array":function(t,e){return this(t,r(e))},"SparseMatrix, any":function(t,e){return c(t,s(e),i)},"DenseMatrix, any":function(t,e){return f(t,e,this)},"any, SparseMatrix":function(t,e){return c(e,t,this,!0)},"any, DenseMatrix":function(t,e){return f(e,t,this,!0)},"Array, any":function(t,e){return f(r(t),e,this,!1).valueOf()},"any, Array":function(t,e){return f(r(e),t,this,!0).valueOf()}})}));function Ui(t,e){var r=t.size(),n=e.size();if(r.length!==n.length)throw new Nn(r.length,n.length)}var Hi=Kr("transpose",["typed","matrix"],(t=>{var{typed:e,matrix:r}=t;return e("transpose",{Array:function(t){return this(r(t)).valueOf()},Matrix:function(t){var e,r=t.size();switch(r.length){case 1:e=t.clone();break;case 2:var n=r[0],i=r[1];if(0===i)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+En(r)+")");switch(t.storage()){case"dense":e=function(t,e,r){for(var n,i=t._data,s=[],a=0;a<r;a++){n=s[a]=[];for(var o=0;o<e;o++)n[o]=Zr(i[o][a])}return t.createDenseMatrix({data:s,size:[r,e],datatype:t._datatype})}(t,n,i);break;case"sparse":e=function(t,e,r){for(var n,i,s,a=t._values,o=t._index,h=t._ptr,l=a?[]:void 0,c=[],u=[],f=[],d=0;d<e;d++)f[d]=0;for(n=0,i=o.length;n<i;n++)f[o[n]]++;for(var p=0,g=0;g<e;g++)u.push(p),p+=f[g],f[g]=u[g];for(u.push(p),s=0;s<r;s++)for(var m=h[s],y=h[s+1],_=m;_<y;_++){var v=f[o[_]]++;c[v]=s,a&&(l[v]=Zr(a[_]))}return t.createSparseMatrix({values:l,index:c,ptr:u,size:[r,e],datatype:t._datatype})}(t,n,i)}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+En(this._size)+")")}return e},any:function(t){return Zr(t)}})})),Yi="zeros",Xi=Kr(Yi,["typed","config","matrix","BigNumber"],(t=>{var{typed:e,config:r,matrix:n,BigNumber:i}=t;return e(Yi,{"":function(){return"Array"===r.matrix?s([]):s([],"default")},"...number | BigNumber | string":function(t){if("string"==typeof t[t.length-1]){var e=t.pop();return s(t,e)}return"Array"===r.matrix?s(t):s(t,"default")},Array:s,Matrix:function(t){var e=t.storage();return s(t.valueOf(),e)},"Array | Matrix, string":function(t,e){return s(t.valueOf(),e)}});function s(t,e){var r=function(t){var e=!1;return t.forEach((function(t,r,n){ur(t)&&(e=!0,n[r]=t.toNumber())})),e}(t)?new i(0):0;if(function(t){t.forEach((function(t){if("number"!=typeof t||!rn(t)||t<0)throw new Error("Parameters in function zeros must be positive integers")}))}(t),e){var s=n(e);return t.length>0?s.resize(t,r):s}var a=[];return t.length>0?Cn(a,t,r):a}})),Wi="divideScalar",Zi=Kr(Wi,["typed","numeric"],(t=>{var{typed:e,numeric:r}=t;return e(Wi,{"number, number":function(t,e){return t/e},"Complex, Complex":function(t,e){return t.div(e)},"BigNumber, BigNumber":function(t,e){return t.div(e)},"Fraction, Fraction":function(t,e){return t.div(e)},"Unit, number | Fraction | BigNumber":function(t,e){var n=t.clone(),i=r(1,Wr(e));return n.value=this(null===n.value?n._normalize(i):n.value,e),n},"number | Fraction | BigNumber, Unit":function(t,e){var n=e.clone();n=n.pow(-1);var i=r(1,Wr(t));return n.value=this(t,null===e.value?e._normalize(i):e.value),n},"Unit, Unit":function(t,e){return t.divide(e)}})})),Ji="equal",$i=(Kr(Ji,["typed","equalScalar"],(t=>{var{typed:e,equalScalar:r}=t;return e(Ji,{"any, any":function(t,e){return null===t?null===e:null===e?null===t:void 0===t?void 0===e:void 0===e?void 0===t:r(t,e)}})})),Kr("ImmutableDenseMatrix",["smaller","DenseMatrix"],(t=>{var{smaller:e,DenseMatrix:r}=t;function n(t,e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(e&&!gr(e))throw new Error("Invalid datatype: "+e);if(yr(t)||mr(t)){var i=new r(t,e);this._data=i._data,this._size=i._size,this._datatype=i._datatype,this._min=null,this._max=null}else if(t&&mr(t.data)&&mr(t.size))this._data=t.data,this._size=t.size,this._datatype=t.datatype,this._min=void 0!==t.min?t.min:null,this._max=void 0!==t.max?t.max:null;else{if(t)throw new TypeError("Unsupported type of data ("+Wr(t)+")");this._data=[],this._size=[0],this._datatype=e,this._min=null,this._max=null}}return n.prototype=new r,n.prototype.type="ImmutableDenseMatrix",n.prototype.isImmutableDenseMatrix=!0,n.prototype.subset=function(t){switch(arguments.length){case 1:var e=r.prototype.subset.call(this,t);return yr(e)?new n({data:e._data,size:e._size,datatype:e._datatype}):e;case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},n.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},n.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},n.prototype.clone=function(){return new n({data:Zr(this._data),size:Zr(this._size),datatype:this._datatype})},n.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.fromJSON=function(t){return new n(t)},n.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},n.prototype.min=function(){if(null===this._min){var t=null;this.forEach((function(r){(null===t||e(r,t))&&(t=r)})),this._min=null!==t?t:void 0}return this._min},n.prototype.max=function(){if(null===this._max){var t=null;this.forEach((function(r){(null===t||e(t,r))&&(t=r)})),this._max=null!==t?t:void 0}return this._max},n}),{isClass:!0})),Ki=Kr("Index",["ImmutableDenseMatrix"],(t=>{var{ImmutableDenseMatrix:e}=t;function r(t){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._isScalar=!0;for(var e=0,i=arguments.length;e<i;e++){var s=arguments[e];if(br(s))this._dimensions.push(s),this._isScalar=!1;else if(Array.isArray(s)||yr(s)){var a=n(s.valueOf());this._dimensions.push(a);var o=a.size();1===o.length&&1===o[0]||(this._isScalar=!1)}else if("number"==typeof s)this._dimensions.push(n([s]));else{if("string"!=typeof s)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._dimensions.push(s)}}}function n(t){for(var r=0,n=t.length;r<n;r++)if("number"!=typeof t[r]||!rn(t[r]))throw new TypeError("Index parameters must be positive integer numbers");return new e(t)}return r.prototype.type="Index",r.prototype.isIndex=!0,r.prototype.clone=function(){var t=new r;return t._dimensions=Zr(this._dimensions),t._isScalar=this._isScalar,t},r.create=function(t){var e=new r;return r.apply(e,t),e},r.prototype.size=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var n=this._dimensions[e];t[e]="string"==typeof n?1:n.size()[0]}return t},r.prototype.max=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var n=this._dimensions[e];t[e]="string"==typeof n?n:n.max()}return t},r.prototype.min=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var n=this._dimensions[e];t[e]="string"==typeof n?n:n.min()}return t},r.prototype.forEach=function(t){for(var e=0,r=this._dimensions.length;e<r;e++)t(this._dimensions[e],e,this)},r.prototype.dimension=function(t){return this._dimensions[t]||null},r.prototype.isObjectProperty=function(){return 1===this._dimensions.length&&"string"==typeof this._dimensions[0]},r.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},r.prototype.isScalar=function(){return this._isScalar},r.prototype.toArray=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var n=this._dimensions[e];t.push("string"==typeof n?n:n.toArray())}return t},r.prototype.valueOf=r.prototype.toArray,r.prototype.toString=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var n=this._dimensions[e];"string"==typeof n?t.push(JSON.stringify(n)):t.push(n.toString())}return"["+t.join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},r.fromJSON=function(t){return r.create(t.dimensions)},r}),{isClass:!0});function Qi(t,e,r,n){if(!(this instanceof Qi))throw new SyntaxError("Constructor must be called with the new operator");this.fn=t,this.count=e,this.min=r,this.max=n,this.message="Wrong number of arguments in function "+t+" ("+e+" provided, "+r+(null!=n?"-"+n:"")+" expected)",this.stack=(new Error).stack}function ts(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function es(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function rs(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?es(Object(r),!0).forEach((function(e){ts(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):es(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}Qi.prototype=new Error,Qi.prototype.constructor=Error,Qi.prototype.name="ArgumentsError",Qi.prototype.isArgumentsError=!0;var ns="Number of decimals in function round must be an integer",is="round",ss=Kr(is,["typed","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],(t=>{var{typed:e,matrix:r,equalScalar:n,zeros:i,BigNumber:s,DenseMatrix:a}=t,o=Fi({typed:e,equalScalar:n}),h=Oi({typed:e,DenseMatrix:a}),l=Ti({typed:e});return e(is,rs(rs({},as),{},{Complex:function(t){return t.round()},"Complex, number":function(t,e){if(e%1)throw new TypeError(ns);return t.round(e)},"Complex, BigNumber":function(t,e){if(!e.isInteger())throw new TypeError(ns);var r=e.toNumber();return t.round(r)},"number, BigNumber":function(t,e){if(!e.isInteger())throw new TypeError(ns);return new s(t).toDecimalPlaces(e.toNumber())},BigNumber:function(t){return t.toDecimalPlaces(0)},"BigNumber, BigNumber":function(t,e){if(!e.isInteger())throw new TypeError(ns);return t.toDecimalPlaces(e.toNumber())},Fraction:function(t){return t.round()},"Fraction, number":function(t,e){if(e%1)throw new TypeError(ns);return t.round(e)},"Array | Matrix":function(t){return Qn(t,this,!0)},"SparseMatrix, number | BigNumber":function(t,e){return o(t,e,this,!1)},"DenseMatrix, number | BigNumber":function(t,e){return l(t,e,this,!1)},"number | Complex | BigNumber, SparseMatrix":function(t,e){return n(t,0)?i(e.size(),e.storage()):h(e,t,this,!0)},"number | Complex | BigNumber, DenseMatrix":function(t,e){return n(t,0)?i(e.size(),e.storage()):l(e,t,this,!0)},"Array, number | BigNumber":function(t,e){return l(r(t),e,this,!1).valueOf()},"number | Complex | BigNumber, Array":function(t,e){return l(r(e),t,this,!0).valueOf()}}))})),as={number:ai,"number, number":function(t,e){if(!rn(e))throw new TypeError(ns);if(e<0||e>15)throw new Error("Number of decimals in function round must be in the range of 0-15");return ai(t,e)}},os="unequal";Kr(os,["typed","equalScalar"],(t=>{var{typed:e,equalScalar:r}=t;return e(os,{"any, any":function(t,e){return null===t?null!==e:null===e?null!==t:void 0===t?void 0!==e:void 0===e?void 0!==t:!r(t,e)}})})),r(228);var hs=Kr("dot",["typed","addScalar","multiplyScalar","conj","size"],(t=>{var{typed:e,addScalar:r,multiplyScalar:n,conj:i,size:s}=t;return e("dot",{"Array | DenseMatrix, Array | DenseMatrix":function(t,s){var h=a(t,s),l=yr(t)?t._data:t,c=yr(t)?t._datatype:void 0,u=yr(s)?s._data:s,f=yr(s)?s._datatype:void 0,d=2===o(t).length,p=2===o(s).length,g=r,m=n;if(c&&f&&c===f&&"string"==typeof c){var y=c;g=e.find(r,[y,y]),m=e.find(n,[y,y])}if(!d&&!p){for(var _=m(i(l[0]),u[0]),v=1;v<h;v++)_=g(_,m(i(l[v]),u[v]));return _}if(!d&&p){for(var x=m(i(l[0]),u[0][0]),b=1;b<h;b++)x=g(x,m(i(l[b]),u[b][0]));return x}if(d&&!p){for(var w=m(i(l[0][0]),u[0]),M=1;M<h;M++)w=g(w,m(i(l[M][0]),u[M]));return w}if(d&&p){for(var E=m(i(l[0][0]),u[0][0]),S=1;S<h;S++)E=g(E,m(i(l[S][0]),u[S][0]));return E}},"SparseMatrix, SparseMatrix":function(t,e){a(t,e);for(var i=t._index,s=t._values,o=e._index,h=e._values,l=0,c=r,u=n,f=0,d=0;f<i.length&&d<o.length;){var p=i[f],g=o[d];p<g?f++:p>g?d++:p===g&&(l=c(l,u(s[f],h[d])),f++,d++)}return l}});function a(t,e){var r,n,i=o(t),s=o(e);if(1===i.length)r=i[0];else{if(2!==i.length||1!==i[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+i.join(", ")+")");r=i[0]}if(1===s.length)n=s[0];else{if(2!==s.length||1!==s[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+s.join(", ")+")");n=s[0]}if(r!==n)throw new RangeError("Vectors must have equal length ("+r+" != "+n+")");if(0===r)throw new RangeError("Cannot calculate the dot product of empty vectors");return r}function o(t){return yr(t)?t.size():s(t)}})),ls="identity",cs=Kr(ls,["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],(t=>{var{typed:e,config:r,matrix:n,BigNumber:i,DenseMatrix:s,SparseMatrix:a}=t;return e(ls,{"":function(){return"Matrix"===r.matrix?n([]):[]},string:function(t){return n(t)},"number | BigNumber":function(t){return h(t,t,"Matrix"===r.matrix?"dense":void 0)},"number | BigNumber, string":function(t,e){return h(t,t,e)},"number | BigNumber, number | BigNumber":function(t,e){return h(t,e,"Matrix"===r.matrix?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(t,e,r){return h(t,e,r)},Array:function(t){return o(t)},"Array, string":function(t,e){return o(t,e)},Matrix:function(t){return o(t.valueOf(),t.storage())},"Matrix, string":function(t,e){return o(t.valueOf(),e)}});function o(t,e){switch(t.length){case 0:return e?n(e):[];case 1:return h(t[0],t[0],e);case 2:return h(t[0],t[1],e);default:throw new Error("Vector containing two values expected")}}function h(t,e,r){var n=ur(t)||ur(e)?i:null;if(ur(t)&&(t=t.toNumber()),ur(e)&&(e=e.toNumber()),!rn(t)||t<1)throw new Error("Parameters in function identity must be positive integers");if(!rn(e)||e<1)throw new Error("Parameters in function identity must be positive integers");var o=n?new i(1):1,h=n?new n(0):0,l=[t,e];if(r){if("sparse"===r)return a.diagonal(l,o,0,h);if("dense"===r)return s.diagonal(l,o,0,h);throw new TypeError('Unknown matrix type "'.concat(r,'"'))}for(var c=Cn([],l,h),u=t<e?t:e,f=0;f<u;f++)c[f][f]=o;return c}})),us="larger",fs=Kr(us,["typed","config","matrix","DenseMatrix"],(t=>{var{typed:e,config:r,matrix:n,DenseMatrix:i}=t,s=Ni({typed:e}),a=ji({typed:e,DenseMatrix:i}),o=Oi({typed:e,DenseMatrix:i}),h=Ai({typed:e}),l=Ti({typed:e});return e(us,{"boolean, boolean":function(t,e){return t>e},"number, number":function(t,e){return t>e&&!fn(t,e,r.epsilon)},"BigNumber, BigNumber":function(t,e){return t.gt(e)&&!di(t,e,r.epsilon)},"Fraction, Fraction":function(t,e){return 1===t.compare(e)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return this(t.value,e.value)},"SparseMatrix, SparseMatrix":function(t,e){return a(t,e,this)},"SparseMatrix, DenseMatrix":function(t,e){return s(e,t,this,!0)},"DenseMatrix, SparseMatrix":function(t,e){return s(t,e,this,!1)},"DenseMatrix, DenseMatrix":function(t,e){return h(t,e,this)},"Array, Array":function(t,e){return this(n(t),n(e)).valueOf()},"Array, Matrix":function(t,e){return this(n(t),e)},"Matrix, Array":function(t,e){return this(t,n(e))},"SparseMatrix, any":function(t,e){return o(t,e,this,!1)},"DenseMatrix, any":function(t,e){return l(t,e,this,!1)},"any, SparseMatrix":function(t,e){return o(e,t,this,!0)},"any, DenseMatrix":function(t,e){return l(e,t,this,!0)},"Array, any":function(t,e){return l(n(t),e,this,!1).valueOf()},"any, Array":function(t,e){return l(n(e),t,this,!0).valueOf()}})})),ds="multiply",ps=Kr(ds,["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],(t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:i,equalScalar:s,dot:a}=t,o=Fi({typed:e,equalScalar:s}),h=Ti({typed:e});function l(t,e){switch(t.length){case 1:switch(e.length){case 1:if(t[0]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(t[0]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+t[0]+") must match Matrix rows ("+e[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+e.length+" dimensions)")}break;case 2:switch(e.length){case 1:if(t[1]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+t[1]+") must match Vector length ("+e[0]+")");break;case 2:if(t[1]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+t[1]+") must match Matrix B rows ("+e[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+e.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+t.length+" dimensions)")}}var c=e("_multiplyMatrixVector",{"DenseMatrix, any":function(t,r){var s,a=t._data,o=t._size,h=t._datatype,l=r._data,c=r._datatype,u=o[0],f=o[1],d=n,p=i;h&&c&&h===c&&"string"==typeof h&&(s=h,d=e.find(n,[s,s]),p=e.find(i,[s,s]));for(var g=[],m=0;m<u;m++){for(var y=a[m],_=p(y[0],l[0]),v=1;v<f;v++)_=d(_,p(y[v],l[v]));g[m]=_}return t.createDenseMatrix({data:g,size:[u],datatype:s})},"SparseMatrix, any":function(t,r){var a=t._values,o=t._index,h=t._ptr,l=t._datatype;if(!a)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var c,u=r._data,f=r._datatype,d=t._size[0],p=r._size[0],g=[],m=[],y=[],_=n,v=i,x=s,b=0;l&&f&&l===f&&"string"==typeof l&&(c=l,_=e.find(n,[c,c]),v=e.find(i,[c,c]),x=e.find(s,[c,c]),b=e.convert(0,c));var w=[],M=[];y[0]=0;for(var E=0;E<p;E++){var S=u[E];if(!x(S,b))for(var N=h[E],k=h[E+1],F=N;F<k;F++){var O=o[F];M[O]?w[O]=_(w[O],v(S,a[F])):(M[O]=!0,m.push(O),w[O]=v(S,a[F]))}}for(var A=m.length,T=0;T<A;T++){var C=m[T];g[T]=w[C]}return y[1]=m.length,t.createSparseMatrix({values:g,index:m,ptr:y,size:[d,1],datatype:c})}}),u=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function(t,r){var s,a=t._data,o=t._size,h=t._datatype,l=r._data,c=r._size,u=r._datatype,f=o[0],d=o[1],p=c[1],g=n,m=i;h&&u&&h===u&&"string"==typeof h&&(s=h,g=e.find(n,[s,s]),m=e.find(i,[s,s]));for(var y=[],_=0;_<f;_++){var v=a[_];y[_]=[];for(var x=0;x<p;x++){for(var b=m(v[0],l[0][x]),w=1;w<d;w++)b=g(b,m(v[w],l[w][x]));y[_][x]=b}}return t.createDenseMatrix({data:y,size:[f,p],datatype:s})},"DenseMatrix, SparseMatrix":function(t,r){var a=t._data,o=t._size,h=t._datatype,l=r._values,c=r._index,u=r._ptr,f=r._size,d=r._datatype;if(!l)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var p,g=o[0],m=f[1],y=n,_=i,v=s,x=0;h&&d&&h===d&&"string"==typeof h&&(p=h,y=e.find(n,[p,p]),_=e.find(i,[p,p]),v=e.find(s,[p,p]),x=e.convert(0,p));for(var b=[],w=[],M=[],E=r.createSparseMatrix({values:b,index:w,ptr:M,size:[g,m],datatype:p}),S=0;S<m;S++){M[S]=w.length;var N=u[S],k=u[S+1];if(k>N)for(var F=0,O=0;O<g;O++){for(var A=O+1,T=void 0,C=N;C<k;C++){var P=c[C];F!==A?(T=_(a[O][P],l[C]),F=A):T=y(T,_(a[O][P],l[C]))}F!==A||v(T,x)||(w.push(O),b.push(T))}}return M[m]=w.length,E},"SparseMatrix, DenseMatrix":function(t,r){var a=t._values,o=t._index,h=t._ptr,l=t._datatype;if(!a)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var c,u=r._data,f=r._datatype,d=t._size[0],p=r._size[0],g=r._size[1],m=n,y=i,_=s,v=0;l&&f&&l===f&&"string"==typeof l&&(c=l,m=e.find(n,[c,c]),y=e.find(i,[c,c]),_=e.find(s,[c,c]),v=e.convert(0,c));for(var x=[],b=[],w=[],M=t.createSparseMatrix({values:x,index:b,ptr:w,size:[d,g],datatype:c}),E=[],S=[],N=0;N<g;N++){w[N]=b.length;for(var k=N+1,F=0;F<p;F++){var O=u[F][N];if(!_(O,v))for(var A=h[F],T=h[F+1],C=A;C<T;C++){var P=o[C];S[P]!==k?(S[P]=k,b.push(P),E[P]=y(O,a[C])):E[P]=m(E[P],y(O,a[C]))}}for(var I=w[N],R=b.length,z=I;z<R;z++){var L=b[z];x[z]=E[L]}}return w[g]=b.length,M},"SparseMatrix, SparseMatrix":function(t,r){var s,a=t._values,o=t._index,h=t._ptr,l=t._datatype,c=r._values,u=r._index,f=r._ptr,d=r._datatype,p=t._size[0],g=r._size[1],m=a&&c,y=n,_=i;l&&d&&l===d&&"string"==typeof l&&(s=l,y=e.find(n,[s,s]),_=e.find(i,[s,s]));for(var v,x,b,w,M,E,S,N,k=m?[]:void 0,F=[],O=[],A=t.createSparseMatrix({values:k,index:F,ptr:O,size:[p,g],datatype:s}),T=m?[]:void 0,C=[],P=0;P<g;P++){O[P]=F.length;var I=P+1;for(M=f[P],E=f[P+1],w=M;w<E;w++)if(N=u[w],m)for(x=h[N],b=h[N+1],v=x;v<b;v++)C[S=o[v]]!==I?(C[S]=I,F.push(S),T[S]=_(c[w],a[v])):T[S]=y(T[S],_(c[w],a[v]));else for(x=h[N],b=h[N+1],v=x;v<b;v++)C[S=o[v]]!==I&&(C[S]=I,F.push(S));if(m)for(var R=O[P],z=F.length,L=R;L<z;L++){var j=F[L];k[L]=T[j]}}return O[g]=F.length,A}});return e(ds,function(t,e){for(var r in e)$r(e,r)&&(t[r]=e[r]);return t}({"Array, Array":function(t,e){l(Fn(t),Fn(e));var n=this(r(t),r(e));return yr(n)?n.valueOf():n},"Matrix, Matrix":function(t,r){var s=t.size(),o=r.size();return l(s,o),1===s.length?1===o.length?function(t,e,r){if(0===r)throw new Error("Cannot multiply two empty vectors");return a(t,e)}(t,r,s[0]):function(t,r){if("dense"!==r.storage())throw new Error("Support for SparseMatrix not implemented");return function(t,r){var s,a=t._data,o=t._size,h=t._datatype,l=r._data,c=r._size,u=r._datatype,f=o[0],d=c[1],p=n,g=i;h&&u&&h===u&&"string"==typeof h&&(s=h,p=e.find(n,[s,s]),g=e.find(i,[s,s]));for(var m=[],y=0;y<d;y++){for(var _=g(a[0],l[0][y]),v=1;v<f;v++)_=p(_,g(a[v],l[v][y]));m[y]=_}return t.createDenseMatrix({data:m,size:[d],datatype:s})}(t,r)}(t,r):1===o.length?c(t,r):u(t,r)},"Matrix, Array":function(t,e){return this(t,r(e))},"Array, Matrix":function(t,e){return this(r(t,e.storage()),e)},"SparseMatrix, any":function(t,e){return o(t,e,i,!1)},"DenseMatrix, any":function(t,e){return h(t,e,i,!1)},"any, SparseMatrix":function(t,e){return o(e,t,i,!0)},"any, DenseMatrix":function(t,e){return h(e,t,i,!0)},"Array, any":function(t,e){return h(r(t),e,i,!1).valueOf()},"any, Array":function(t,e){return h(r(e),t,i,!0).valueOf()},"any, any":i,"any, any, ...any":function(t,e,r){for(var n=this(t,e),i=0;i<r.length;i++)n=this(n,r[i]);return n}},i.signatures))})),gs=Kr("FibonacciHeap",["smaller","larger"],(t=>{var{smaller:e,larger:r}=t,n=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}function s(t,e,r){e.left.right=e.right,e.right.left=e.left,r.degree--,r.child===e&&(r.child=e.right),0===r.degree&&(r.child=null),e.left=t,e.right=t.right,t.right=e,e.right.left=e,e.parent=null,e.mark=!1}function a(t,e){var r=e.parent;r&&(e.mark?(s(t,e,r),a(r)):e.mark=!0)}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(t,r){var n={key:t,value:r,degree:0};if(this._minimum){var i=this._minimum;n.left=i,n.right=i.right,i.right=n,n.right.left=n,e(t,i.key)&&(this._minimum=n)}else n.left=n,n.right=n,this._minimum=n;return this._size++,n},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return 0===this._size},i.prototype.extractMinimum=function(){var t=this._minimum;if(null===t)return t;for(var i=this._minimum,s=t.degree,a=t.child;s>0;){var h=a.right;a.left.right=a.right,a.right.left=a.left,a.left=i,a.right=i.right,i.right=a,a.right.left=a,a.parent=null,a=h,s--}return t.left.right=t.right,t.right.left=t.left,i=t===t.right?null:function(t,i){var s,a=Math.floor(Math.log(i)*n)+1,h=new Array(a),l=0,c=t;if(c)for(l++,c=c.right;c!==t;)l++,c=c.right;for(;l>0;){for(var u=c.degree,f=c.right;s=h[u];){if(r(c.key,s.key)){var d=s;s=c,c=d}o(s,c),h[u]=null,u++}h[u]=c,c=f,l--}t=null;for(var p=0;p<a;p++)(s=h[p])&&(t?(s.left.right=s.right,s.right.left=s.left,s.left=t,s.right=t.right,t.right=s,s.right.left=s,e(s.key,t.key)&&(t=s)):t=s);return t}(i=t.right,this._size),this._size--,this._minimum=i,t},i.prototype.remove=function(t){this._minimum=function(t,r,n){r.key=-1;var i=r.parent;return i&&e(r.key,i.key)&&(s(t,r,i),a(t,i)),e(r.key,t.key)&&(t=r),t}(this._minimum,t),this.extractMinimum()};var o=function(t,e){t.left.right=t.right,t.right.left=t.left,t.parent=e,e.child?(t.left=e.child,t.right=e.child.right,e.child.right=t,t.right.left=t):(e.child=t,t.right=t,t.left=t),e.degree++,t.mark=!1};return i}),{isClass:!0});var ms="index",ys=Kr(ms,["typed","Index"],(t=>{var{typed:e,Index:r}=t;return e(ms,{"...number | string | BigNumber | Range | Array | Matrix":function(t){var e=t.map((function(t){return ur(t)?t.toNumber():Array.isArray(t)||yr(t)?t.map((function(t){return ur(t)?t.toNumber():t})):t})),n=new r;return r.apply(n,e),n}})})),_s=Kr("Spa",["addScalar","equalScalar","FibonacciHeap"],(t=>{var{addScalar:e,equalScalar:r,FibonacciHeap:n}=t;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new n}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(t,e){if(this._values[t])this._values[t].value=e;else{var r=this._heap.insert(t,e);this._values[t]=r}},i.prototype.get=function(t){var e=this._values[t];return e?e.value:0},i.prototype.accumulate=function(t,r){var n=this._values[t];n?n.value=e(n.value,r):(n=this._heap.insert(t,r),this._values[t]=n)},i.prototype.forEach=function(t,e,n){var i=this._heap,s=this._values,a=[],o=i.extractMinimum();for(o&&a.push(o);o&&o.key<=e;)o.key>=t&&(r(o.value,0)||n(o.key,o.value,this)),(o=i.extractMinimum())&&a.push(o);for(var h=0;h<a.length;h++){var l=a[h];s[(o=i.insert(l.key,l.value)).key]=o}},i.prototype.swap=function(t,e){var r=this._values[t],n=this._values[e];if(!r&&n)r=this._heap.insert(t,n.value),this._heap.remove(n),this._values[t]=r,this._values[e]=void 0;else if(r&&!n)n=this._heap.insert(e,r.value),this._heap.remove(r),this._values[e]=n,this._values[t]=void 0;else if(r&&n){var i=r.value;r.value=n.value,n.value=i}},i}),{isClass:!0}),vs=Kr("lup",["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtract","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],(t=>{var{typed:e,matrix:r,abs:n,addScalar:i,divideScalar:s,multiplyScalar:a,subtract:o,larger:h,equalScalar:l,unaryMinus:c,DenseMatrix:u,SparseMatrix:f,Spa:d}=t;return e("lup",{DenseMatrix:function(t){return p(t)},SparseMatrix:function(t){return function(t){var e,r,i,o=t._size[0],u=t._size[1],p=Math.min(o,u),g=t._values,m=t._index,y=t._ptr,_=[],v=[],x=[],b=[o,p],w=[],M=[],E=[],S=[p,u],N=[],k=[];for(e=0;e<o;e++)N[e]=e,k[e]=e;var F=function(){var t=new d;r<o&&(x.push(_.length),_.push(1),v.push(r)),E.push(w.length);var u=y[r],p=y[r+1];for(i=u;i<p;i++)e=m[i],t.set(N[e],g[i]);r>0&&t.forEach(0,r-1,(function(e,r){f._forEachRow(e,_,v,x,(function(n,i){n>e&&t.accumulate(n,c(a(i,r)))}))}));var F,O,A,T,C=r,P=t.get(r),I=n(P);t.forEach(r+1,o-1,(function(t,e){var r=n(e);h(r,I)&&(C=t,I=r,P=e)})),r!==C&&(f._swapRows(r,C,b[1],_,v,x),f._swapRows(r,C,S[1],w,M,E),t.swap(r,C),O=C,A=k[F=r],T=k[O],N[A]=O,N[T]=F,k[F]=T,k[O]=A),t.forEach(0,o-1,(function(t,e){t<=r?(w.push(e),M.push(t)):(e=s(e,P),l(e,0)||(_.push(e),v.push(t)))}))};for(r=0;r<u;r++)F();return E.push(w.length),x.push(_.length),{L:new f({values:_,index:v,ptr:x,size:b}),U:new f({values:w,index:M,ptr:E,size:S}),p:N,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}(t)},Array:function(t){var e=p(r(t));return{L:e.L.valueOf(),U:e.U.valueOf(),p:e.p}}});function p(t){var e,r,c,f=t._size[0],d=t._size[1],p=Math.min(f,d),g=Zr(t._data),m=[],y=[f,p],_=[],v=[p,d],x=[];for(e=0;e<f;e++)x[e]=e;for(r=0;r<d;r++){if(r>0)for(e=0;e<f;e++){var b=Math.min(e,r),w=0;for(c=0;c<b;c++)w=i(w,a(g[e][c],g[c][r]));g[e][r]=o(g[e][r],w)}var M=r,E=0,S=0;for(e=r;e<f;e++){var N=g[e][r],k=n(N);h(k,E)&&(M=e,E=k,S=N)}if(r!==M&&(x[r]=[x[M],x[M]=x[r]][0],u._swapRows(r,M,g)),r<f)for(e=r+1;e<f;e++){var F=g[e][r];l(F,0)||(g[e][r]=s(g[e][r],S))}}for(r=0;r<d;r++)for(e=0;e<f;e++)0===r&&(e<d&&(_[e]=[]),m[e]=[]),e<r?(e<d&&(_[e][r]=g[e][r]),r<f&&(m[e][r]=0)):e!==r?(e<d&&(_[e][r]=0),r<f&&(m[e][r]=g[e][r])):(e<d&&(_[e][r]=g[e][r]),r<f&&(m[e][r]=1));var O=new u({data:m,size:y}),A=new u({data:_,size:v}),T=[];for(e=0,p=x.length;e<p;e++)T[x[e]]=e;return{L:O,U:A,p:T,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}})),xs=Kr("det",["typed","matrix","subtract","multiply","unaryMinus","lup"],(t=>{var{typed:e,matrix:r,subtract:n,multiply:i,unaryMinus:s,lup:a}=t;return e("det",{any:function(t){return Zr(t)},"Array | Matrix":function(t){var e;switch((e=yr(t)?t.size():Array.isArray(t)?(t=r(t)).size():[]).length){case 0:return Zr(t);case 1:if(1===e[0])return Zr(t.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+En(e)+")");case 2:var o=e[0];if(o===e[1])return function(t,e,r){if(1===e)return Zr(t[0][0]);if(2===e)return n(i(t[0][0],t[1][1]),i(t[1][0],t[0][1]));for(var o=a(t),h=o.U[0][0],l=1;l<e;l++)h=i(h,o.U[l][l]);for(var c=0,u=0,f=[];;){for(;f[u];)u++;if(u>=e)break;for(var d=u,p=0;!f[o.p[d]];)f[o.p[d]]=!0,d=o.p[d],p++;p%2==0&&c++}return c%2==0?h:s(h)}(t.clone().valueOf(),o);throw new RangeError("Matrix must be square (size: "+En(e)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+En(e)+")")}}})})),bs=Kr("inv",["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],(t=>{var{typed:e,matrix:r,divideScalar:n,addScalar:i,multiply:s,unaryMinus:a,det:o,identity:h,abs:l}=t;return e("inv",{"Array | Matrix":function(t){var e=yr(t)?t.size():Fn(t);switch(e.length){case 1:if(1===e[0])return yr(t)?r([n(1,t.valueOf()[0])]):[n(1,t[0])];throw new RangeError("Matrix must be square (size: "+En(e)+")");case 2:var i=e[0],s=e[1];if(i===s)return yr(t)?r(c(t.valueOf(),i,s),t.storage()):c(t,i,s);throw new RangeError("Matrix must be square (size: "+En(e)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+En(e)+")")}},any:function(t){return n(1,t)}});function c(t,e,r){var c,u,f,d,p;if(1===e){if(0===(d=t[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,d)]]}if(2===e){var g=o(t);if(0===g)throw Error("Cannot calculate inverse, determinant is zero");return[[n(t[1][1],g),n(a(t[0][1]),g)],[n(a(t[1][0]),g),n(t[0][0],g)]]}var m=t.concat();for(c=0;c<e;c++)m[c]=m[c].concat();for(var y=h(e).valueOf(),_=0;_<r;_++){var v=l(m[_][_]),x=_;for(c=_+1;c<e;)l(m[c][_])>v&&(v=l(m[c][_]),x=c),c++;if(0===v)throw Error("Cannot calculate inverse, determinant is zero");(c=x)!==_&&(p=m[_],m[_]=m[c],m[c]=p,p=y[_],y[_]=y[c],y[c]=p);var b=m[_],w=y[_];for(c=0;c<e;c++){var M=m[c],E=y[c];if(c!==_){if(0!==M[_]){for(f=n(a(M[_]),b[_]),u=_;u<r;u++)M[u]=i(M[u],s(f,b[u]));for(u=0;u<r;u++)E[u]=i(E[u],s(f,w[u]))}}else{for(f=b[_],u=_;u<r;u++)M[u]=n(M[u],f);for(u=0;u<r;u++)E[u]=n(E[u],f)}}}return y}})),ws=tn({config:hr}),Ms=dn({}),Es=xn({}),Ss=bn({}),Ns=Bn({Matrix:Ss}),ks=Zn({BigNumber:ws,Complex:Ms,DenseMatrix:Ns,Fraction:Es}),Fs=oi({typed:ks}),Os=li({typed:ks}),As=ci({BigNumber:ws,typed:ks}),Ts=fi({typed:ks}),Cs=gi({config:hr,typed:ks}),Ps=yi({typed:ks}),Is=_i({typed:ks}),Rs=vi({typed:ks}),zs=xi({Matrix:Ss,equalScalar:Cs,typed:ks}),Ls=wi({typed:ks}),js=Mi({Fraction:Es,typed:ks}),Ds=Si({DenseMatrix:Ns,Matrix:Ss,SparseMatrix:zs,typed:ks}),Bs=Ri({bignumber:As,fraction:js,number:Rs}),Gs=Li({matrix:Ds,config:hr,typed:ks}),Vs=Bi({DenseMatrix:Ns,config:hr,matrix:Ds,typed:ks}),qs=qi({DenseMatrix:Ns,addScalar:Os,equalScalar:Cs,matrix:Ds,typed:ks,unaryMinus:Ls}),Us=Hi({matrix:Ds,typed:ks}),Hs=Xi({BigNumber:ws,config:hr,matrix:Ds,typed:ks}),Ys=Zi({numeric:Bs,typed:ks}),Xs=Ki({ImmutableDenseMatrix:$i({DenseMatrix:Ns,smaller:Vs})}),Ws=ss({BigNumber:ws,DenseMatrix:Ns,equalScalar:Cs,matrix:Ds,typed:ks,zeros:Hs}),Zs=hs({addScalar:Os,conj:Ts,multiplyScalar:Is,size:Gs,typed:ks}),Js=cs({BigNumber:ws,DenseMatrix:Ns,SparseMatrix:zs,config:hr,matrix:Ds,typed:ks}),$s=fs({DenseMatrix:Ns,config:hr,matrix:Ds,typed:ks}),Ks=ps({addScalar:Os,dot:Zs,equalScalar:Cs,matrix:Ds,multiplyScalar:Is,typed:ks}),Qs=gs({larger:$s,smaller:Vs}),ta=ys({Index:Xs,typed:ks}),ea=bs({abs:Fs,addScalar:Os,det:xs({lup:vs({DenseMatrix:Ns,Spa:_s({FibonacciHeap:Qs,addScalar:Os,equalScalar:Cs}),SparseMatrix:zs,abs:Fs,addScalar:Os,divideScalar:Ys,equalScalar:Cs,larger:$s,matrix:Ds,multiplyScalar:Is,subtract:qs,typed:ks,unaryMinus:Ls}),matrix:Ds,multiply:Ks,subtract:qs,typed:ks,unaryMinus:Ls}),divideScalar:Ys,identity:Js,matrix:Ds,multiply:Ks,typed:ks,unaryMinus:Ls});class ra{constructor(t,e){this.femNodes=t,this.femElements=e}_initGlobalStiffnessMatrixWithZeros(){const t=2*this.femNodes.size;this.matrix=Hs(t,t).toArray()}createGlobalStiffnessMatrix(){this._initGlobalStiffnessMatrixWithZeros(),this.femElements.forEach((t=>{const e=this.nodeGlobalIndexMap.get(t.node1).concat(this.nodeGlobalIndexMap.get(t.node2));t.globalStiffnessMatrix.forEach(((t,r)=>{t.forEach(((t,n)=>{this.matrix[e[r]][e[n]]+=t}))}))}))}createNodeGlobalIndexMap(){this.nodeGlobalIndexMap=new Map;let t=0;this.femNodes.forEach((e=>{this.nodeGlobalIndexMap.set(e,[t,t+1]),t+=2}))}getElementsGlobalIndexes(t){return this._getGlobalIndexArray(t.node1).concat(this._getGlobalIndexArray(t.node2))}_getGlobalIndexArray(t){return this.nodeGlobalIndexMap.get(t)}getSubsettedMatrix(t){return Ds(this.matrix).subset(ta(t,t)).toArray()}getMatrix(){return this.matrix}}class na{constructor(t,e){this.boundaries=new Map,this._fill(t,e)}_fill(t,e){e.forEach(((e,r)=>{if(t.has(r)){const e=t.get(r);this.boundaries.set(r,e)}else this.boundaries.set(r,new qe(!1,!1))}))}getMatrix(){const t=[];return this.boundaries.forEach((e=>{t.push(+e.xFixed,+e.yFixed)})),t}getUnboundedMatrixIndexes(){const t=[];return this.getMatrix().forEach(((e,r)=>{0===e&&t.push(r)})),t}getBoundedMatrixIndexes(){const t=[];return this.getMatrix().forEach(((e,r)=>{0!==e&&t.push(r)})),t}}class ia{constructor(t,e){this.loads=new Map,this._fill(t,e)}_fill(t,e){e.forEach(((e,r)=>{if(t.has(r)){const e=t.get(r);this.loads.set(r,e)}else this.loads.set(r,new He(0,0))}))}getMatrix(){const t=[];return this.loads.forEach((e=>{t.push(e.fx,e.fy)})),t}getSubsettedMatrix(t){return Ds(this.getMatrix()).subset(ta(t))}}class sa{constructor(t){this.matrix=Hs(t).toArray()}addUnboundedDisplacements(t,e){e.forEach(((e,r)=>{0===e&&(this.matrix[r]=t.shift())}))}getMatrix(){return this.matrix}}const aa={};class oa{constructor(t){this.femModel=t,this.precision=3}init(){this.globalStiffness=new ra(this.femModel.nodes,this.femModel.femElements),this.globalStiffness.createNodeGlobalIndexMap(),this.globalStiffness.createGlobalStiffnessMatrix(),this.globalBoundary=new na(this.femModel.boundaries,this.femModel.nodes),this.globalLoads=new ia(this.femModel.loads,this.femModel.nodes)}calculate(){this._calculateDisplacementsMatrix(),this._calculateInnerForces(),this._calculateReactionForces()}_calculateDisplacementsMatrix(){const t=this.globalBoundary.getUnboundedMatrixIndexes(),e=this.globalStiffness.getSubsettedMatrix(t),r=this.globalLoads.getSubsettedMatrix(t),n=class{static calculateDisplacements=(t,e)=>Ks(ea(t),e).toArray()}.calculateDisplacements(e,r),i=new sa(this.globalBoundary.getMatrix().length);i.addUnboundedDisplacements(n,this.globalBoundary.getMatrix()),this.displacements=i.getMatrix(),aa.displacements=new Map,this.femModel.nodes.forEach(((t,e)=>{aa.displacements.set(e,new Je(this.displacements[2*(e-1)],this.displacements[2*(e-1)+1]))}))}_calculateInnerForces(){aa.innerForces=new Map,this.femModel.femElements.forEach(((t,e)=>{const r=this.globalStiffness.getElementsGlobalIndexes(t),n=Ds(this.displacements).subset(ta(r)),i=Ks(t.localStiffnessMatrix,Ks(t.transformationMatrix,n)).toArray()[2];aa.innerForces.set(e,i)}))}_calculateReactionForces(){const t=this.globalForcesMatrix=Ks(this.globalStiffness.getMatrix(),this.displacements),e=qs(t,this.globalLoads.getMatrix());aa.reactions=new Map,this.femModel.nodes.forEach(((t,r)=>{const n=this._roundToThreeDecimalPlaces(e[2*(r-1)]),i=this._roundToThreeDecimalPlaces(e[2*(r-1)+1]);0===n&&0===i||aa.reactions.set(r,new Ye(n,i))}))}_roundToThreeDecimalPlaces(t){return Math.round(1e3*t)/1e3}_consoleLogInnerForcesResults(){this.femModel.femElements.forEach((t=>{console.log(Ws(t.innerForces,this.precision))}))}getResults(){return aa}log(){}}const ha=Math.sin,la=Math.cos,ca=(Math.atan,Math.pow);class ua{constructor(t,e,r,n){var i,s,a;this.material=t,this.section=e,this.node1=r,this.node2=n,this.length=(i=this.node1,s=this.node2,ca(ca(s.x-i.x,2)+ca(s.y-i.y,2),.5)),this.angle=((t,e)=>Math.atan2(e.y-t.y,e.x-t.x))(this.node1,this.node2),this.transformationMatrix=(a=this.angle,[[la(a),ha(a),0,0],[-ha(a),la(a),0,0],[0,0,la(a),ha(a)],[0,0,-ha(a),la(a)]]),this.localStiffnessMatrix=this.createLocalStiffnessMatrix(),this.globalStiffnessMatrix=this.createGlobalStiffnessMatrix()}createLocalStiffnessMatrix(){return Ks(this.material.youngsModulus*this.section.area/this.length,[[1,0,-1,0],[0,0,0,0],[-1,0,1,0],[0,0,0,0]])}createGlobalStiffnessMatrix(){return Ks(Ks(Us(this.transformationMatrix),this.localStiffnessMatrix),this.transformationMatrix)}}class fa{constructor(t){this.calculator=new oa(function(t){return t.femElements.clear(),t.elements.forEach((function(e,r){var n=t.nodes.get(e.node1Id),i=t.nodes.get(e.node2Id),s=new ua(e.material,e.section,n,i);t.setFemElement(s,r)})),t}(t)),this.calculator.init()}calculate(){this.calculator.calculate()}getResults(){return this.calculator.getResults()}}const da=function(){function t(t,e){this.model=t,this.view=e}return t.prototype.init=function(){this.setScene(),this.renderScene(),this.addEventListeners()},t.prototype.getJsonModel=function(){return this.model.getJsonModel()},t.prototype.setScene=function(){this.view.setNodes(this.model.nodes),this.view.setElements(this.model.elements,this.model.nodes),this.view.setSupports(this.model.boundaries,this.model.nodes),this.view.setLoads(this.model.loads,this.model.nodes),this.view.setDimensions(),this.view.setCoordinateSystemIcon(),this.view.setCursor()},t.prototype.renderScene=function(){this.view.render()},t.prototype.addEventListeners=function(){var t=sr.elements,e=t.modes,r=t.sceneVisibility,n=t.scene,i=t.two,s=t.calcBtn;window.addEventListener("resize",this.handleResizeSceneToContainersSize.bind(this)),s.addEventListener("click",this.handleCalculate.bind(this)),r.addEventListener("click",this.handleSceneVisibility.bind(this)),n.addEventListener("mousemove",this.handleCursorMove.bind(this)),n.addEventListener("mousewheel",this.handleMousewheel.bind(this)),n.addEventListener("click",this.handleMouseClickOnContainer.bind(this)),e.addEventListener("change",this.handleCurrentActiveMode.bind(this)),i.nodes.addEventListener("mouseover",this.handleMouseOverNode.bind(this)),i.nodes.addEventListener("mouseout",this.handleMouseLeaveNode.bind(this))},t.prototype.handleMousewheel=function(t){var e=(t.wheelDeltaY||-t.deltaY)/1e3;sr.scaleFactor.model*=e>0?1/sr.screenScalingFactor:sr.screenScalingFactor,this.view.clearSceneObjects(),this.setScene(),this.renderScene()},t.prototype.handleCurrentActiveMode=function(t){"radio"===t.target.type&&(this.hideToolbox(this.getToolboxHTMLElement(sr.mode.name)),sr.mode.name=t.target.value,this.showToolbox(sr.mode.name))},t.prototype.showToolbox=function(t){var e=this.getToolboxHTMLElement(t);return e&&(e.hidden=!1),e},t.prototype.hideToolbox=function(t){return t&&(t.hidden=!0),t},t.prototype.getToolboxHTMLElement=function(t){switch(t){case ir.Element:return sr.elements.toolbox.element;case ir.Support:return sr.elements.toolbox.support;case ir.Load:return sr.elements.toolbox.load;default:return}},t.prototype.handleResizeSceneToContainersSize=function(){sr.two.width=sr.elements.scene.clientWidth,this.view.setInnerForcesLegendPosition(),this.view.resizeScene()},t.prototype.handleMouseOverNode=function(t){var e=t.target.id;this.view.highlightNode(e)},t.prototype.handleMouseLeaveNode=function(t){var e=t.target.id;this.view.unHighlightNode(e)},t.prototype.handleSceneVisibility=function(t){"checkbox"===t.target.type&&("nodes"===t.target.value&&(sr.isVisible.nodes=!sr.isVisible.nodes),"elements"===t.target.value&&(sr.isVisible.elements=!sr.isVisible.elements),"supports"===t.target.value&&(sr.isVisible.supports=!sr.isVisible.supports),"loads"===t.target.value&&(sr.isVisible.loads=!sr.isVisible.loads),"labels"===t.target.value&&(sr.isVisible.labels.all=!sr.isVisible.labels.all),"displacements"===t.target.value&&(sr.isVisible.results.displacements=!sr.isVisible.results.displacements),"forces"===t.target.value&&(sr.isVisible.results.innerForces=!sr.isVisible.results.innerForces),"reactions"===t.target.value&&(sr.isVisible.results.reactions=!sr.isVisible.results.reactions),this.view.render())},t.prototype.handleCalculate=function(){var t=new fa(this.model);t.calculate(),this.model.results=t.getResults(),rr.setDisplacementsScaleFactor(this.model.results.displacements,sr),this.view.clearResults(),this.view.setDisplacements(this.model.elements,this.model.results.displacements,this.model.nodes),this.view.setInnerForces(this.model.elements,this.model.results.innerForces,this.model.nodes),this.view.setInnerForceLegend(),this.view.setReactions(this.model.results.reactions,this.model.nodes),[sr.elements.sceneVisibility.querySelector("input[value=displacements]"),sr.elements.sceneVisibility.querySelector("input[value=forces]"),sr.elements.sceneVisibility.querySelector("input[value=reactions]")].forEach((function(t){return t.disabled=!1}))},t.prototype.handleCursorMove=function(t){var e=this.view.getNodePositionFromCursorPosition(t.pageX,t.pageY),r=sr.cursor.position,n=r.x,i=r.y;n===e.x&&i===e.y||(sr.cursor.position.x=e.x,sr.cursor.position.y=e.y,sr.cursor.message=e.x.toFixed(1)+", "+e.y.toFixed(1),this.view.moveCursor(e.x,e.y),this.view.updateCursorPositionLabel())},t.prototype.handleMouseClickOnContainer=function(t){if(sr.mode.name===ir.Node){var e=this.view.getNodePositionFromCursorPosition(t.pageX,t.pageY),r=this.model.setNode(e);this.view.setNode(e,r)}if(sr.mode.name===ir.Element)if(sr.mode.state.createElement.selectedNodeId)if(i=t.target.id,r=this.view.sceneNodeIdToNodeId.get(i))this.createElement(sr.mode.state.createElement.selectedNodeId,r);else{e=this.view.getNodePositionFromCursorPosition(t.pageX,t.pageY);var n=this.model.setNode(e);this.view.setNode(e,n),this.createElement(sr.mode.state.createElement.selectedNodeId,n)}else{var i=t.target.id;if(r=this.view.sceneNodeIdToNodeId.get(i))sr.mode.state.createElement.selectedNodeId=r;else{e=this.view.getNodePositionFromCursorPosition(t.pageX,t.pageY);var s=this.model.setNode(e);this.view.setNode(e,s),sr.mode.state.createElement.selectedNodeId=s}}if(sr.mode.name===ir.Support&&(i=t.target.id,r=this.view.sceneNodeIdToNodeId.get(i))){e=this.model.getNode(r);var a=sr.elements.toolbox.xFixed.checked,o=sr.elements.toolbox.yFixed.checked,h=new qe(a,o);this.model.setBoundary(r,h),this.view.setSupport(h,e)}if(sr.mode.name===ir.Load&&(i=t.target.id,r=this.view.sceneNodeIdToNodeId.get(i))){e=this.model.getNode(r);var l=parseInt(sr.elements.toolbox.fx.value),c=parseInt(sr.elements.toolbox.fy.value);if(Ps(l)&&Ps(c)&&(0!==c||0!==l)){var u=new He(1e3*l,1e3*c);this.model.setLoad(r,u),this.view.setLoad(u,e)}}},t.prototype.createElement=function(t,e){var r=new Ze(t,e,sr.mode.state.createElement.currentSection,sr.mode.state.createElement.currentMaterial),n=this.model.nodes.get(t),i=this.model.nodes.get(e),s=this.model.setElement(r);this.view.setElement(s,n,i),sr.mode.state.createElement.selectedNodeId=void 0,sr.mode.state.createElement.secondNode=void 0},t}();var pa=new Ge,ga={scene:document.getElementById("scene"),calcBtn:document.getElementById("calc-btn"),sceneVisibility:document.getElementById("scene-visibility"),modes:document.getElementById("mode"),two:{nodes:void 0},toolbox:{element:document.getElementById("element-toolbox"),support:document.getElementById("support-toolbox"),load:document.getElementById("load-toolbox"),fx:document.getElementById("fx-input"),fy:document.getElementById("fy-input"),xFixed:document.getElementById("support-xFixed-cb"),yFixed:document.getElementById("support-yFixed-cb")}},ma=function(){function t(t,e){this.config=sr,this.config.elements=t,this.model=e?function(t){var e=new Ge,r=JSON.parse(t);return r.materials.forEach((function(t){e.materials=[new Xe(t.name,t.youngsModulus)]})),r.sections.forEach((function(t){e.sections=[new We(t.name,t.area)]})),r.nodes.forEach((function(t){e.setNode(new Ve(t.x,t.y))})),r.elements.forEach((function(t){e.setElement(new Ze(t.node1Id,t.node2Id,t.section,t.material))})),r.boundaries.forEach((function(t){e.boundaries.set(t.nodeId,new qe(t.xFixed,t.yFixed))})),r.loads.forEach((function(t){e.loads.set(t.nodeId,new He(t.fx,t.fy))})),e}(e):pa}return t.prototype.init=function(){this.controller=new da(this.model,new nr(sr)),this.controller.init()},t.prototype.getJsonModel=function(){return this.controller.getJsonModel()},t.prototype.getThumbnail=function(){return sr.elements.scene.innerHTML},t}();new ma(ga).init()})(),fem=n})();